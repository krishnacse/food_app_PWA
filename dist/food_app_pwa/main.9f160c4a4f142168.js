"use strict";(self.webpackChunkstudent_management=self.webpackChunkstudent_management||[]).push([[179],{6304:(pt,be,M)=>{M.d(be,{Dh:()=>Ne,GT:()=>ye,cc:()=>Ee,hO:()=>Le,on:()=>B,pX:()=>se,xv:()=>pe});var h=M(5879),U=M(7142),O=M(3698);pt=M.hmd(pt);const ee=["ngOnDestroy"],se=(Re,dt,ct,J={})=>new Proxy(Re,{get:(Ie,ae)=>ct.runOutsideAngular(()=>{var Me;if(Re[ae])return!(null===(Me=J?.spy)||void 0===Me)&&Me.get&&J.spy.get(ae,Re[ae]),Re[ae];if(ee.indexOf(ae)>-1)return()=>{};const Ve=dt.toPromise().then(z=>{const De=z&&z[ae];return"function"==typeof De?De.bind(z):De&&De.then?De.then(je=>ct.run(()=>je)):ct.run(()=>De)});return new Proxy(()=>{},{get:(z,De)=>Ve[De],apply:(z,De,je)=>Ve.then(wt=>{var ln;const dn=wt&&wt(...je);return!(null===(ln=J?.spy)||void 0===ln)&&ln.apply&&J.spy.apply(ae,je,dn),dn})})})}),ye=(Re,dt)=>{dt.forEach(ct=>{Object.getOwnPropertyNames(ct.prototype||ct).forEach(J=>{Object.defineProperty(Re.prototype,J,Object.getOwnPropertyDescriptor(ct.prototype||ct,J))})})};class _e{constructor(dt){return dt}}const Ne=new h.OlP("angularfire2.app.options"),pe=new h.OlP("angularfire2.app.name");function B(Re,dt,ct){const Ie="object"==typeof ct&&ct||{};Ie.name=Ie.name||"string"==typeof ct&&ct||"[DEFAULT]";const Me=U.Z.apps.filter(Ve=>Ve&&Ve.name===Ie.name)[0]||dt.runOutsideAngular(()=>U.Z.initializeApp(Re,Ie));try{JSON.stringify(Re)!==JSON.stringify(Me.options)&&G("error",`${Me.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new _e(Me)}const G=(Re,...dt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Re](...dt)},ne={provide:_e,useFactory:B,deps:[Ne,h.R0b,[new h.FiY,pe]]};let Le=(()=>{class Re{constructor(ct){U.Z.registerVersion("angularfire",O.q4.full,"core"),U.Z.registerVersion("angularfire",O.q4.full,"app-compat"),U.Z.registerVersion("angular",h.q4F.full,ct.toString())}static initializeApp(ct,J){return{ngModule:Re,providers:[{provide:Ne,useValue:ct},{provide:pe,useValue:J}]}}}return Re.\u0275fac=function(ct){return new(ct||Re)(h.LFG(h.Lbi))},Re.\u0275mod=h.oAB({type:Re}),Re.\u0275inj=h.cJS({providers:[ne]}),Re})();function Ee(Re,dt,ct,J,Ie){const[,ae,Me]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===Re)||[];if(ae)return function Qe(Re,dt){try{return Re.toString()===dt.toString()}catch{return Re===dt}}(Ie,Me)||(Ge("error",`${dt} was already initialized on the ${ct} Firebase App with different settings.${Oe?" You may need to reload as Firebase is not HMR aware.":""}`),Ge("warn",{is:Ie,was:Me})),ae;{const Ve=J();return globalThis.\u0275AngularfireInstanceCache.push([Re,Ve,Ie]),Ve}}const Oe=!!pt.hot,Ge=(Re,...dt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Re](...dt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},3698:(pt,be,M)=>{M.d(be,{q4:()=>Fn,iC:()=>xo,HU:()=>Li,vb:()=>Ga,JM:()=>Ao,n1:()=>Ha,u3:()=>$r});var h=M(5879),U=M(3182),O=M(5861),ee=M(534),se=M(9058),ye=M(4537),_e=M(7879);M(2591);const pe="@firebase/remote-config",B="0.4.4",Ee=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class qn{constructor(k,H,de,we){this.client=k,this.storage=H,this.storageCache=de,this.logger=we}isCachedDataFresh(k,H){if(!H)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const de=Date.now()-H,we=de<=k;return this.logger.debug(`Config fetch cache check. Cache age millis: ${de}. Cache max age millis (minimumFetchIntervalMillis setting): ${k}. Is cache hit: ${we}.`),we}fetch(k){var H=this;return(0,O.Z)(function*(){const[de,we]=yield Promise.all([H.storage.getLastSuccessfulFetchTimestampMillis(),H.storage.getLastSuccessfulFetchResponse()]);if(we&&H.isCachedDataFresh(k.cacheMaxAgeMillis,de))return we;k.eTag=we&&we.eTag;const $e=yield H.client.fetch(k),We=[H.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===$e.status&&We.push(H.storage.setLastSuccessfulFetchResponse($e)),yield Promise.all(We),$e})()}}function Nr(V=navigator){return V.languages&&V.languages[0]||V.language}class le{constructor(k,H,de,we,$e,We){this.firebaseInstallations=k,this.sdkVersion=H,this.namespace=de,this.projectId=we,this.apiKey=$e,this.appId=We}fetch(k){var H=this;return(0,O.Z)(function*(){const[de,we]=yield Promise.all([H.firebaseInstallations.getId(),H.firebaseInstallations.getToken()]),We=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${H.projectId}/namespaces/${H.namespace}:fetch?key=${H.apiKey}`,kt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":k.eTag||"*"},Vt={sdk_version:H.sdkVersion,app_instance_id:de,app_instance_id_token:we,app_id:H.appId,language_code:Nr()},Gt={method:"POST",headers:kt,body:JSON.stringify(Vt)},En=fetch(We,Gt),jr=new Promise((xi,vs)=>{k.signal.addEventListener(()=>{const il=new Error("The operation was aborted.");il.name="AbortError",vs(il)})});let Mi;try{yield Promise.race([En,jr]),Mi=yield En}catch(xi){let vs="fetch-client-network";throw"AbortError"===xi?.name&&(vs="fetch-timeout"),Ee.create(vs,{originalErrorMessage:xi?.message})}let zr=Mi.status;const sa=Mi.headers.get("ETag")||void 0;let qa,oa;if(200===Mi.status){let xi;try{xi=yield Mi.json()}catch(vs){throw Ee.create("fetch-client-parse",{originalErrorMessage:vs?.message})}qa=xi.entries,oa=xi.state}if("INSTANCE_STATE_UNSPECIFIED"===oa?zr=500:"NO_CHANGE"===oa?zr=304:("NO_TEMPLATE"===oa||"EMPTY_CONFIG"===oa)&&(qa={}),304!==zr&&200!==zr)throw Ee.create("fetch-status",{httpStatus:zr});return{status:zr,eTag:sa,config:qa}})()}}class ue{constructor(k,H){this.client=k,this.storage=H}fetch(k){var H=this;return(0,O.Z)(function*(){const de=(yield H.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return H.attemptFetch(k,de)})()}attemptFetch(k,{throttleEndTimeMillis:H,backoffCount:de}){var we=this;return(0,O.Z)(function*(){yield function ge(V,k){return new Promise((H,de)=>{const we=Math.max(k-Date.now(),0),$e=setTimeout(H,we);V.addEventListener(()=>{clearTimeout($e),de(Ee.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(k.signal,H);try{const $e=yield we.client.fetch(k);return yield we.storage.deleteThrottleMetadata(),$e}catch($e){if(!function he(V){if(!(V instanceof se.ZR&&V.customData))return!1;const k=Number(V.customData.httpStatus);return 429===k||500===k||503===k||504===k}($e))throw $e;const We={throttleEndTimeMillis:Date.now()+(0,se.$s)(de),backoffCount:de+1};return yield we.storage.setThrottleMetadata(We),we.attemptFetch(k,We)}})()}}class rt{constructor(k,H,de,we,$e){this.app=k,this._client=H,this._storageCache=de,this._storage=we,this._logger=$e,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Xe(V,k){const H=V.target.error||void 0;return Ee.create(k,{originalErrorMessage:H&&H?.message})}const qt="app_namespace_store";class fn{constructor(k,H,de,we=function Nt(){return new Promise((V,k)=>{try{const H=indexedDB.open("firebase_remote_config",1);H.onerror=de=>{k(Xe(de,"storage-open"))},H.onsuccess=de=>{V(de.target.result)},H.onupgradeneeded=de=>{0===de.oldVersion&&de.target.result.createObjectStore(qt,{keyPath:"compositeKey"})}}catch(H){k(Ee.create("storage-open",{originalErrorMessage:H?.message}))}})}()){this.appId=k,this.appName=H,this.namespace=de,this.openDbPromise=we}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(k){return this.set("last_fetch_status",k)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(k){return this.set("last_successful_fetch_timestamp_millis",k)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(k){return this.set("last_successful_fetch_response",k)}getActiveConfig(){return this.get("active_config")}setActiveConfig(k){return this.set("active_config",k)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(k){return this.set("active_config_etag",k)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(k){return this.set("throttle_metadata",k)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(k){var H=this;return(0,O.Z)(function*(){const de=yield H.openDbPromise;return new Promise((we,$e)=>{const kt=de.transaction([qt],"readonly").objectStore(qt),Vt=H.createCompositeKey(k);try{const Gt=kt.get(Vt);Gt.onerror=En=>{$e(Xe(En,"storage-get"))},Gt.onsuccess=En=>{const jr=En.target.result;we(jr?jr.value:void 0)}}catch(Gt){$e(Ee.create("storage-get",{originalErrorMessage:Gt?.message}))}})})()}set(k,H){var de=this;return(0,O.Z)(function*(){const we=yield de.openDbPromise;return new Promise(($e,We)=>{const Vt=we.transaction([qt],"readwrite").objectStore(qt),Gt=de.createCompositeKey(k);try{const En=Vt.put({compositeKey:Gt,value:H});En.onerror=jr=>{We(Xe(jr,"storage-set"))},En.onsuccess=()=>{$e()}}catch(En){We(Ee.create("storage-set",{originalErrorMessage:En?.message}))}})})()}delete(k){var H=this;return(0,O.Z)(function*(){const de=yield H.openDbPromise;return new Promise((we,$e)=>{const kt=de.transaction([qt],"readwrite").objectStore(qt),Vt=H.createCompositeKey(k);try{const Gt=kt.delete(Vt);Gt.onerror=En=>{$e(Xe(En,"storage-delete"))},Gt.onsuccess=()=>{we()}}catch(Gt){$e(Ee.create("storage-delete",{originalErrorMessage:Gt?.message}))}})})()}createCompositeKey(k){return[this.appId,this.appName,this.namespace,k].join()}}class Zn{constructor(k){this.storage=k}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var k=this;return(0,O.Z)(function*(){const H=k.storage.getLastFetchStatus(),de=k.storage.getLastSuccessfulFetchTimestampMillis(),we=k.storage.getActiveConfig(),$e=yield H;$e&&(k.lastFetchStatus=$e);const We=yield de;We&&(k.lastSuccessfulFetchTimestampMillis=We);const kt=yield we;kt&&(k.activeConfig=kt)})()}setLastFetchStatus(k){return this.lastFetchStatus=k,this.storage.setLastFetchStatus(k)}setLastSuccessfulFetchTimestampMillis(k){return this.lastSuccessfulFetchTimestampMillis=k,this.storage.setLastSuccessfulFetchTimestampMillis(k)}setActiveConfig(k){return this.activeConfig=k,this.storage.setActiveConfig(k)}}function mr(){return Or.apply(this,arguments)}function Or(){return(Or=(0,O.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Kn(){(0,ee._registerComponent)(new ye.wA("remote-config",function V(k,{instanceIdentifier:H}){const de=k.getProvider("app").getImmediate(),we=k.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ee.create("registration-window");if(!(0,se.hl)())throw Ee.create("indexed-db-unavailable");const{projectId:$e,apiKey:We,appId:kt}=de.options;if(!$e)throw Ee.create("registration-project-id");if(!We)throw Ee.create("registration-api-key");if(!kt)throw Ee.create("registration-app-id");const Vt=new fn(kt,de.name,H=H||"firebase"),Gt=new Zn(Vt),En=new _e.Yd(pe);En.logLevel=_e.in.ERROR;const jr=new le(we,ee.SDK_VERSION,H,$e,We,kt),Mi=new ue(jr,Vt),zr=new qn(Mi,Vt,Gt,En),sa=new rt(de,zr,Gt,Vt,En);return function Me(V){const k=(0,se.m9)(V);k._initializePromise||(k._initializePromise=k._storageCache.loadFromStorage().then(()=>{k._isInitializationComplete=!0}))}(sa),sa},"PUBLIC").setMultipleInstances(!0)),(0,ee.registerVersion)(pe,B),(0,ee.registerVersion)(pe,B,"esm2017")}();var lr=M(8990);const Tn="analytics",dr="firebase_id",oi="origin",ht=6e4,xt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Mt="https://www.googletagmanager.com/gtag/js",Rt=new _e.Yd("@firebase/analytics"),Dn=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function jt(V){if(!V.startsWith(Mt)){const k=Dn.create("invalid-gtag-resource",{gtagURL:V});return Rt.warn(k.message),""}return V}function wn(V){return Promise.all(V.map(k=>k.catch(H=>H)))}function gn(){return(gn=(0,O.Z)(function*(V,k,H,de,we,$e){const We=de[we];try{if(We)yield k[We];else{const Vt=(yield wn(H)).find(Gt=>Gt.measurementId===we);Vt&&(yield k[Vt.appId])}}catch(kt){Rt.error(kt)}V("config",we,$e)})).apply(this,arguments)}function wr(){return(wr=(0,O.Z)(function*(V,k,H,de,we){try{let $e=[];if(we&&we.send_to){let We=we.send_to;Array.isArray(We)||(We=[We]);const kt=yield wn(H);for(const Vt of We){const Gt=kt.find(jr=>jr.measurementId===Vt),En=Gt&&k[Gt.appId];if(!En){$e=[];break}$e.push(En)}}0===$e.length&&($e=Object.values(k)),yield Promise.all($e),V("event",de,we||{})}catch($e){Rt.error($e)}})).apply(this,arguments)}const zn=30,On=new class Hn{constructor(k={},H=1e3){this.throttleMetadata=k,this.intervalMillis=H}getThrottleMetadata(k){return this.throttleMetadata[k]}setThrottleMetadata(k,H){this.throttleMetadata[k]=H}deleteThrottleMetadata(k){delete this.throttleMetadata[k]}};function kr(V){return new Headers({Accept:"application/json","x-goog-api-key":V})}function W(){return(W=(0,O.Z)(function*(V){var k;const{appId:H,apiKey:de}=V,we={method:"GET",headers:kr(de)},$e=xt.replace("{app-id}",H),We=yield fetch($e,we);if(200!==We.status&&304!==We.status){let kt="";try{const Vt=yield We.json();null!==(k=Vt.error)&&void 0!==k&&k.message&&(kt=Vt.error.message)}catch{}throw Dn.create("config-fetch-failed",{httpStatus:We.status,responseMessage:kt})}return We.json()})).apply(this,arguments)}function R(){return(R=(0,O.Z)(function*(V,k=On,H){const{appId:de,apiKey:we,measurementId:$e}=V.options;if(!de)throw Dn.create("no-app-id");if(!we){if($e)return{measurementId:$e,appId:de};throw Dn.create("no-api-key")}const We=k.getThrottleMetadata(de)||{backoffCount:0,throttleEndTimeMillis:Date.now()},kt=new Je;return setTimeout((0,O.Z)(function*(){kt.abort()}),void 0!==H?H:ht),P({appId:de,apiKey:we,measurementId:$e},We,kt,k)})).apply(this,arguments)}function P(V,k,H){return A.apply(this,arguments)}function A(){return A=(0,O.Z)(function*(V,{throttleEndTimeMillis:k,backoffCount:H},de,we=On){var $e;const{appId:We,measurementId:kt}=V;try{yield function X(V,k){return new Promise((H,de)=>{const we=Math.max(k-Date.now(),0),$e=setTimeout(H,we);V.addEventListener(()=>{clearTimeout($e),de(Dn.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(de,k)}catch(Vt){if(kt)return Rt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${kt} provided in the "measurementId" field in the local Firebase config. [${Vt?.message}]`),{appId:We,measurementId:kt};throw Vt}try{const Vt=yield function Yt(V){return W.apply(this,arguments)}(V);return we.deleteThrottleMetadata(We),Vt}catch(Vt){const Gt=Vt;if(!function ve(V){if(!(V instanceof se.ZR&&V.customData))return!1;const k=Number(V.customData.httpStatus);return 429===k||500===k||503===k||504===k}(Gt)){if(we.deleteThrottleMetadata(We),kt)return Rt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${kt} provided in the "measurementId" field in the local Firebase config. [${Gt?.message}]`),{appId:We,measurementId:kt};throw Vt}const En=503===Number(null===($e=Gt?.customData)||void 0===$e?void 0:$e.httpStatus)?(0,se.$s)(H,we.intervalMillis,zn):(0,se.$s)(H,we.intervalMillis),jr={throttleEndTimeMillis:Date.now()+En,backoffCount:H+1};return we.setThrottleMetadata(We,jr),Rt.debug(`Calling attemptFetch again in ${En} millis`),P(V,jr,de,we)}}),A.apply(this,arguments)}class Je{constructor(){this.listeners=[]}addEventListener(k){this.listeners.push(k)}abort(){this.listeners.forEach(k=>k())}}let vt,ft;function lt(){return(lt=(0,O.Z)(function*(V,k,H,de,we){if(we&&we.global)V("event",H,de);else{const $e=yield k;V("event",H,Object.assign(Object.assign({},de),{send_to:$e}))}})).apply(this,arguments)}function Fr(){return(Fr=(0,O.Z)(function*(){if(!(0,se.hl)())return Rt.warn(Dn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(V){return Rt.warn(Dn.create("indexeddb-unavailable",{errorInfo:V?.toString()}).message),!1}return!0})).apply(this,arguments)}function qs(){return qs=(0,O.Z)(function*(V,k,H,de,we,$e,We){var kt;const Vt=function j(V){return R.apply(this,arguments)}(V);Vt.then(zr=>{H[zr.measurementId]=zr.appId,V.options.measurementId&&zr.measurementId!==V.options.measurementId&&Rt.warn(`The measurement ID in the local Firebase config (${V.options.measurementId}) does not match the measurement ID fetched from the server (${zr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(zr=>Rt.error(zr)),k.push(Vt);const Gt=function kn(){return Fr.apply(this,arguments)}().then(zr=>{if(zr)return de.getId()}),[En,jr]=yield Promise.all([Vt,Gt]);(function Sn(V){const k=window.document.getElementsByTagName("script");for(const H of Object.values(k))if(H.src&&H.src.includes(Mt)&&H.src.includes(V))return H;return null})($e)||function pn(V,k){const H=function ai(V,k){let H;return window.trustedTypes&&(H=window.trustedTypes.createPolicy(V,k)),H}("firebase-js-sdk-policy",{createScriptURL:jt}),de=document.createElement("script"),we=`${Mt}?l=${V}&id=${k}`;de.src=H?H?.createScriptURL(we):we,de.async=!0,document.head.appendChild(de)}($e,En.measurementId),ft&&(we("consent","default",ft),function zt(V){ft=V}(void 0)),we("js",new Date);const Mi=null!==(kt=We?.config)&&void 0!==kt?kt:{};return Mi[oi]="firebase",Mi.update=!0,null!=jr&&(Mi[dr]=jr),we("config",En.measurementId,Mi),vt&&(we("set",vt),function Pn(V){vt=V}(void 0)),En.measurementId}),qs.apply(this,arguments)}class Eo{constructor(k){this.app=k}_delete(){return delete er[this.app.options.appId],Promise.resolve()}}let er={},vi=[];const Ns={};let tr,ki,ta="dataLayer",Io=!1;function Co(V,k,H){!function Do(){const V=[];if((0,se.ru)()&&V.push("This is a browser extension environment."),(0,se.zI)()||V.push("Cookies are not available."),V.length>0){const k=V.map((de,we)=>`(${we+1}) ${de}`).join(" "),H=Dn.create("invalid-analytics-context",{errorInfo:k});Rt.warn(H.message)}}();const de=V.options.appId;if(!de)throw Dn.create("no-app-id");if(!V.options.apiKey){if(!V.options.measurementId)throw Dn.create("no-api-key");Rt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${V.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=er[de])throw Dn.create("already-exists",{id:de});if(!Io){!function ui(V){let k=[];Array.isArray(window[V])?k=window[V]:window[V]=k}(ta);const{wrappedGtag:$e,gtagCore:We}=function Un(V,k,H,de,we){let $e=function(...We){window[de].push(arguments)};return window[we]&&"function"==typeof window[we]&&($e=window[we]),window[we]=function Ar(V,k,H,de){function $e(){return $e=(0,O.Z)(function*(We,...kt){try{if("event"===We){const[Vt,Gt]=kt;yield function Pr(V,k,H,de,we){return wr.apply(this,arguments)}(V,k,H,Vt,Gt)}else if("config"===We){const[Vt,Gt]=kt;yield function Pt(V,k,H,de,we,$e){return gn.apply(this,arguments)}(V,k,H,de,Vt,Gt)}else if("consent"===We){const[Vt]=kt;V("consent","update",Vt)}else if("get"===We){const[Vt,Gt,En]=kt;V("get",Vt,Gt,En)}else if("set"===We){const[Vt]=kt;V("set",Vt)}else V(We,...kt)}catch(Vt){Rt.error(Vt)}}),$e.apply(this,arguments)}return function we(We){return $e.apply(this,arguments)}}($e,V,k,H),{gtagCore:$e,wrappedGtag:window[we]}}(er,vi,Ns,ta,"gtag");ki=$e,tr=We,Io=!0}return er[de]=function en(V,k,H,de,we,$e,We){return qs.apply(this,arguments)}(V,vi,Ns,k,tr,ta,H),new Eo(V)}function Fu(){return $.apply(this,arguments)}function $(){return($=(0,O.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const or="@firebase/analytics";!function za(){(0,ee._registerComponent)(new ye.wA(Tn,(k,{options:H})=>Co(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),H),"PUBLIC")),(0,ee._registerComponent)(new ye.wA("analytics-internal",function V(k){try{const H=k.getProvider(Tn).getImmediate();return{logEvent:(de,we,$e)=>function _n(V,k,H,de){V=(0,se.m9)(V),function yt(V,k,H,de,we){return lt.apply(this,arguments)}(ki,er[V.app.options.appId],k,H,de).catch(we=>Rt.error(we))}(H,de,we,$e)}}catch(H){throw Dn.create("interop-component-reg-failed",{reason:H})}},"PRIVATE")),(0,ee.registerVersion)(or,"0.10.0"),(0,ee.registerVersion)(or,"0.10.0","esm2017")}();var bo=M(1954),Vu=M(2631);const ut=new class hr extends Vu.v{}(class Lu extends bo.o{constructor(k,H){super(k,H),this.scheduler=k,this.work=H}schedule(k,H=0){return H>0?super.schedule(k,H):(this.delay=H,this.state=k,this.scheduler.flush(this),this)}execute(k,H){return H>0||this.closed?super.execute(k,H):this._execute(k,H)}requestAsyncId(k,H,de=0){return null!=de&&de>0||null==de&&this.delay>0?super.requestAsyncId(k,H,de):(k.flush(this),0)}});var rr=M(6321),ci=M(5592),ra=M(9397),Er=M(5137),Fi=M(3093);const Fn=new h.GfV("7.6.1"),Ji="__angularfire_symbol__analyticsIsSupportedValue",Xi="__angularfire_symbol__analyticsIsSupported",St="__angularfire_symbol__remoteConfigIsSupportedValue",Ks="__angularfire_symbol__remoteConfigIsSupported",To="__angularfire_symbol__messagingIsSupportedValue",es="__angularfire_symbol__messagingIsSupported";globalThis[Xi]||(globalThis[Xi]=Fu().then(V=>globalThis[Ji]=V).catch(()=>globalThis[Ji]=!1)),globalThis[es]||(globalThis[es]=(0,lr.Gb)().then(V=>globalThis[To]=V).catch(()=>globalThis[To]=!1)),globalThis[Ks]||(globalThis[Ks]=mr().then(V=>globalThis[St]=V).catch(()=>globalThis[St]=!1));const Ha={async:()=>globalThis[es],sync:()=>{const V=globalThis[To];if(void 0===V)throw new Error((V=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${V} in the constructor, first ensure that ${V} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${V})\`.`)("Messaging"));return V}};function Ao(V,k,H){if(k){if(1===k.length)return k[0];const $e=k.filter(We=>We.app===H);if(1===$e.length)return $e[0]}return H.container.getProvider(V).getImmediate({optional:!0})}const Ga=(V,k)=>{const H=k?[k]:(0,U.C6)(),de=[];return H.forEach(we=>{we.container.getProvider(V).instances.forEach(We=>{de.includes(We)||de.push(We)})}),de};function Ir(){}class ts{constructor(k,H=ut){this.zone=k,this.delegate=H}now(){return this.delegate.now()}schedule(k,H,de){const we=this.zone;return this.delegate.schedule(function(We){we.runGuarded(()=>{k.apply(this,[We])})},H,de)}}class ia{constructor(k){this.zone=k,this.task=null}call(k,H){const de=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ir,{},Ir,Ir)),H.pipe((0,ra.b)({next:de,complete:de,error:de})).subscribe(k).add(de)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Li=(()=>{class V{constructor(H){this.ngZone=H,this.outsideAngular=H.runOutsideAngular(()=>new ts(Zone.current)),this.insideAngular=H.run(()=>new ts(Zone.current,rr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return V.\u0275fac=function(H){return new(H||V)(h.LFG(h.R0b))},V.\u0275prov=h.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();function Qt(){const V=globalThis.\u0275AngularFireScheduler;if(!V)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return V}function Br(V){return Qt().ngZone.run(()=>V())}function xo(V){return Qt(),function Ro(V){return function(H){return(H=H.lift(new ia(V.ngZone))).pipe((0,Er.R)(V.outsideAngular),(0,Fi.Q)(V.insideAngular))}}(Qt())(V)}const Wa=(V,k)=>function(){const de=arguments;return k&&setTimeout(()=>{"scheduled"===k.state&&k.invoke()},10),Br(()=>V.apply(void 0,de))},$r=(V,k)=>function(){let H;const de=arguments;for(let $e=0;$e<arguments.length;$e++)"function"==typeof de[$e]&&(k&&(H||(H=Br(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ir,{},Ir,Ir)))),de[$e]=Wa(de[$e],H));const we=function Vd(V){return Qt().ngZone.runOutsideAngular(()=>V())}(()=>V.apply(this,de));if(!k){if(we instanceof ci.y){const $e=Qt();return we.pipe((0,Er.R)($e.outsideAngular),(0,Fi.Q)($e.insideAngular))}return Br(()=>we)}return we instanceof ci.y?we.pipe(xo):we instanceof Promise?Br(()=>new Promise(($e,We)=>we.then(kt=>Br(()=>$e(kt)),kt=>Br(()=>We(kt))))):"function"==typeof we&&H?function(){return setTimeout(()=>{H&&"scheduled"===H.state&&H.invoke()},10),we.apply(this,arguments)}:Br(()=>we)}},6878:(pt,be,M)=>{M.d(be,{$:()=>Ud,A:()=>G,D:()=>Ee,I:()=>Do,J:()=>$,L:()=>St,N:()=>kr,P:()=>Uw,Q:()=>Vd,R:()=>th,U:()=>xo,V:()=>Ro,W:()=>Wa,X:()=>_i,Y:()=>H,Z:()=>de,_:()=>Vt,a:()=>Lr,a0:()=>Bd,a1:()=>Cw,a2:()=>Iy,a3:()=>bw,a4:()=>dp,a5:()=>sl,a6:()=>aa,a7:()=>hp,a8:()=>Bu,a9:()=>Db,aA:()=>z,aB:()=>jy,aC:()=>Hn,aD:()=>Yt,aE:()=>pr,aF:()=>Ei,aG:()=>rh,aH:()=>tr,aL:()=>Vi,aO:()=>V,aa:()=>pp,ab:()=>Tw,ac:()=>Hd,ad:()=>Sw,ae:()=>Aw,af:()=>mp,ai:()=>Ay,aj:()=>Mw,ak:()=>vp,an:()=>zr,ao:()=>_p,aq:()=>Ut,ar:()=>Zd,as:()=>je,at:()=>yt,au:()=>ve,av:()=>J,aw:()=>Ju,ax:()=>Wu,ay:()=>lt,az:()=>Ie,b:()=>Kd,c:()=>Bp,d:()=>$y,e:()=>By,f:()=>Ls,g:()=>da,h:()=>no,i:()=>Op,j:()=>Vs,k:()=>Xu,l:()=>Yn,m:()=>ec,o:()=>Qp,p:()=>Ne,r:()=>is,s:()=>wi,u:()=>Vy});var h=M(5861),U=M(9058),O=M(534),ee=M(7582),se=M(7879),ye=M(4537);const Ne={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ee=function ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Qe=function Le(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Oe=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Re=new se.Yd("@firebase/auth");function ct(v,...p){Re.logLevel<=se.in.ERROR&&Re.error(`Auth (${O.SDK_VERSION}): ${v}`,...p)}function J(v,...p){throw Ve(v,...p)}function Ie(v,...p){return Ve(v,...p)}function ae(v,p,g){const E=Object.assign(Object.assign({},Qe()),{[p]:g});return new U.LL("auth","Firebase",E).create(p,{appName:v.name})}function Me(v,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&J(v,"argument-error"),ae(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(v,...p){if("string"!=typeof v){const g=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(g,...E)}return Oe.create(v,...p)}function z(v,p,...g){if(!v)throw Ve(p,...g)}function De(v){const p="INTERNAL ASSERTION FAILED: "+v;throw ct(p),new Error(p)}function je(v,p){v||De(p)}function wt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ln(){return"http:"===dn()||"https:"===dn()}function dn(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class qn{constructor(p,g){this.shortDelay=p,this.longDelay=g,je(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function bn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ln()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Nr(v,p){je(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class le{static initialize(p,g,E){this.fetchImpl=p,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void De("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void De("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void De("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},he=new qn(3e4,6e4);function ue(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Te(v,p,g,E){return Be.apply(this,arguments)}function Be(){return(Be=(0,h.Z)(function*(v,p,g,E,T={}){return rt(v,T,(0,h.Z)(function*(){let x={},Q={};E&&("GET"===p?Q=E:x={body:JSON.stringify(E)});const me=(0,U.xO)(Object.assign({key:v.config.apiKey},Q)).slice(1),Ye=yield v._getAdditionalHeaders();return Ye["Content-Type"]="application/json",v.languageCode&&(Ye["X-Firebase-Locale"]=v.languageCode),le.fetch()(Xt(v,v.config.apiHost,g,me),Object.assign({method:p,headers:Ye,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function rt(v,p,g){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,h.Z)(function*(v,p,g){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},ge),p);try{const T=new Nt(v),x=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const Q=yield x.json();if("needConfirmation"in Q)throw fn(v,"account-exists-with-different-credential",Q);if(x.ok&&!("errorMessage"in Q))return Q;{const me=x.ok?Q.errorMessage:Q.error.message,[Ye,tt]=me.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ye)throw fn(v,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Ye)throw fn(v,"email-already-in-use",Q);if("USER_DISABLED"===Ye)throw fn(v,"user-disabled",Q);const Dt=E[Ye]||Ye.toLowerCase().replace(/[_\s]+/g,"-");if(tt)throw ae(v,Dt,tt);J(v,Dt)}}catch(T){if(T instanceof U.ZR)throw T;J(v,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function qt(v,p,g,E){return It.apply(this,arguments)}function It(){return(It=(0,h.Z)(function*(v,p,g,E,T={}){const x=yield Te(v,p,g,E,T);return"mfaPendingCredential"in x&&J(v,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Xt(v,p,g,E){const T=`${p}${g}?${E}`;return v.config.emulator?Nr(v.config,T):`${v.config.apiScheme}://${T}`}class Nt{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(Ie(this.auth,"network-request-failed")),he.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fn(v,p,g){const E={appName:v.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const T=Ie(v,p,E);return T.customData._tokenResponse=g,T}function Kn(){return(Kn=(0,h.Z)(function*(v,p){return Te(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Nn(){return(Nn=(0,h.Z)(function*(v,p){return Te(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Or(){return(Or=(0,h.Z)(function*(v,p){return Te(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function lr(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function oi(){return(oi=(0,h.Z)(function*(v,p=!1){const g=(0,U.m9)(v),E=yield g.getIdToken(p),T=xt(E);z(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,Q=x?.sign_in_provider;return{claims:T,token:E,authTime:lr(ht(T.auth_time)),issuedAtTime:lr(ht(T.iat)),expirationTime:lr(ht(T.exp)),signInProvider:Q||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function ht(v){return 1e3*Number(v)}function xt(v){const[p,g,E]=v.split(".");if(void 0===p||void 0===g||void 0===E)return ct("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,U.tV)(g);return T?JSON.parse(T):(ct("Failed to decode base64 JWT payload"),null)}catch(T){return ct("Caught error parsing JWT payload as JSON",T?.toString()),null}}function Rt(v,p){return _r.apply(this,arguments)}function _r(){return(_r=(0,h.Z)(function*(v,p,g=!1){if(g)return p;try{return yield p}catch(E){throw E instanceof U.ZR&&function Dn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}class jt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield g.iteration()}),E)}iteration(){var p=this;return(0,h.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&p.schedule(!0))}p.schedule()})()}}class wn{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=lr(this.lastLoginAt),this.creationTime=lr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ai(v){return pn.apply(this,arguments)}function pn(){return pn=(0,h.Z)(function*(v){var p;const g=v.auth,E=yield v.getIdToken(),T=yield Rt(v,function mr(v,p){return Or.apply(this,arguments)}(g,{idToken:E}));z(T?.users.length,g,"internal-error");const x=T.users[0];v._notifyReloadListener(x);const Q=null!==(p=x.providerUserInfo)&&void 0!==p&&p.length?function Pr(v){return v.map(p=>{var{providerId:g}=p,E=(0,ee._T)(p,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(x.providerUserInfo):[],me=function gn(v,p){return[...v.filter(E=>!p.some(T=>T.providerId===E.providerId)),...p]}(v.providerData,Q),Dt=!!v.isAnonymous&&!(v.email&&x.passwordHash||me?.length),nn={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:me,metadata:new wn(x.createdAt,x.lastLoginAt),isAnonymous:Dt};Object.assign(v,nn)}),pn.apply(this,arguments)}function Pt(){return(Pt=(0,h.Z)(function*(v){const p=(0,U.m9)(v);yield ai(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Ar(){return(Ar=(0,h.Z)(function*(v,p){const g=yield rt(v,{},(0,h.Z)(function*(){const E=(0,U.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:T,apiKey:x}=v.config,Q=Xt(v,T,"/v1/token",`key=${x}`),me=yield v._getAdditionalHeaders();return me["Content-Type"]="application/x-www-form-urlencoded",le.fetch()(Q,{method:"POST",headers:me,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Un{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){z(p.idToken,"internal-error"),z(typeof p.idToken<"u","internal-error"),z(typeof p.refreshToken<"u","internal-error");const g="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Mt(v){const p=xt(v);return z(p,"internal-error"),z(typeof p.exp<"u","internal-error"),z(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var E=this;return(0,h.Z)(function*(){return z(!E.accessToken||E.refreshToken,p,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var E=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:Q}=yield function wr(v,p){return Ar.apply(this,arguments)}(p,g);E.updateTokensAndExpiration(T,x,Number(Q))})()}updateTokensAndExpiration(p,g,E){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,g){const{refreshToken:E,accessToken:T,expirationTime:x}=g,Q=new Un;return E&&(z("string"==typeof E,"internal-error",{appName:p}),Q.refreshToken=E),T&&(z("string"==typeof T,"internal-error",{appName:p}),Q.accessToken=T),x&&(z("number"==typeof x,"internal-error",{appName:p}),Q.expirationTime=x),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Un,this.toJSON())}_performRefresh(){return De("not implemented")}}function Sn(v,p){z("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class zn{constructor(p){var{uid:g,auth:E,stsTokenManager:T}=p,x=(0,ee._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new wn(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,h.Z)(function*(){const E=yield Rt(g,g.stsTokenManager.getToken(g.auth,p));return z(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(p){return function dr(v){return oi.apply(this,arguments)}(this,p)}reload(){return function ui(v){return Pt.apply(this,arguments)}(this)}_assign(p){this!==p&&(z(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const g=new zn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(p){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var E=this;return(0,h.Z)(function*(){let T=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),T=!0),g&&(yield ai(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,h.Z)(function*(){const g=yield p.getIdToken();return yield Rt(p,function Zn(v,p){return Kn.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var E,T,x,Q,me,Ye,tt,Dt;const nn=null!==(E=g.displayName)&&void 0!==E?E:void 0,di=null!==(T=g.email)&&void 0!==T?T:void 0,io=null!==(x=g.phoneNumber)&&void 0!==x?x:void 0,hh=null!==(Q=g.photoURL)&&void 0!==Q?Q:void 0,Jp=null!==(me=g.tenantId)&&void 0!==me?me:void 0,fh=null!==(Ye=g._redirectEventId)&&void 0!==Ye?Ye:void 0,tc=null!==(tt=g.createdAt)&&void 0!==tt?tt:void 0,ws=null!==(Dt=g.lastLoginAt)&&void 0!==Dt?Dt:void 0,{uid:Bo,emailVerified:Es,isAnonymous:du,providerData:$o,stsTokenManager:nc}=g;z(Bo&&nc,p,"internal-error");const hu=Un.fromJSON(this.name,nc);z("string"==typeof Bo,p,"internal-error"),Sn(nn,p.name),Sn(di,p.name),z("boolean"==typeof Es,p,"internal-error"),z("boolean"==typeof du,p,"internal-error"),Sn(io,p.name),Sn(hh,p.name),Sn(Jp,p.name),Sn(fh,p.name),Sn(tc,p.name),Sn(ws,p.name);const Rl=new zn({uid:Bo,auth:p,email:di,emailVerified:Es,displayName:nn,isAnonymous:du,photoURL:hh,phoneNumber:io,tenantId:Jp,stsTokenManager:hu,createdAt:tc,lastLoginAt:ws});return $o&&Array.isArray($o)&&(Rl.providerData=$o.map(Xp=>Object.assign({},Xp))),fh&&(Rl._redirectEventId=fh),Rl}static _fromIdTokenResponse(p,g,E=!1){return(0,h.Z)(function*(){const T=new Un;T.updateFromServerResponse(g);const x=new zn({uid:g.localId,auth:p,stsTokenManager:T,isAnonymous:E});return yield ai(x),x})()}}const Mn=new Map;function Hn(v){je(v instanceof Function,"Expected a class definition");let p=Mn.get(v);return p?(je(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Mn.set(v,p),p)}const kr=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(g,E){var T=this;return(0,h.Z)(function*(){T.storage[g]=E})()}_get(g){var E=this;return(0,h.Z)(function*(){const T=E.storage[g];return void 0===T?null:T})()}_remove(g){var E=this;return(0,h.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return v.type="NONE",v})();function Yt(v,p,g){return`firebase:${v}:${p}:${g}`}class W{constructor(p,g,E){this.persistence=p,this.auth=g,this.userKey=E;const{config:T,name:x}=this.auth;this.fullUserKey=Yt(this.userKey,T.apiKey,x),this.fullPersistenceKey=Yt("persistence",T.apiKey,x),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?zn._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,h.Z)(function*(){if(g.persistence===p)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,E="authUser"){return(0,h.Z)(function*(){if(!g.length)return new W(Hn(kr),p,E);const T=(yield Promise.all(g.map(function(){var tt=(0,h.Z)(function*(Dt){if(yield Dt._isAvailable())return Dt});return function(Dt){return tt.apply(this,arguments)}}()))).filter(tt=>tt);let x=T[0]||Hn(kr);const Q=Yt(E,p.config.apiKey,p.name);let me=null;for(const tt of g)try{const Dt=yield tt._get(Q);if(Dt){const nn=zn._fromJSON(p,Dt);tt!==x&&(me=nn),x=tt;break}}catch{}const Ye=T.filter(tt=>tt._shouldAllowMigration);return x._shouldAllowMigration&&Ye.length?(x=Ye[0],me&&(yield x._set(Q,me.toJSON())),yield Promise.all(g.map(function(){var tt=(0,h.Z)(function*(Dt){if(Dt!==x)try{yield Dt._remove(Q)}catch{}});return function(Dt){return tt.apply(this,arguments)}}())),new W(x,p,E)):new W(x,p,E)})()}}function j(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(X(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(R(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Je(p))return"Blackberry";if(vt(p))return"Webos";if(P(p))return"Safari";if((p.includes("chrome/")||A(p))&&!p.includes("edge/"))return"Chrome";if(ve(p))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function R(v=(0,U.z$)()){return/firefox\//i.test(v)}function P(v=(0,U.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function A(v=(0,U.z$)()){return/crios\//i.test(v)}function X(v=(0,U.z$)()){return/iemobile/i.test(v)}function ve(v=(0,U.z$)()){return/android/i.test(v)}function Je(v=(0,U.z$)()){return/blackberry/i.test(v)}function vt(v=(0,U.z$)()){return/webos/i.test(v)}function yt(v=(0,U.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function lt(v=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Ft(v=(0,U.z$)()){return yt(v)||ve(v)||vt(v)||Je(v)||/windows phone/i.test(v)||X(v)}function Z(v,p=[]){let g;switch(v){case"Browser":g=j((0,U.z$)());break;case"Worker":g=`${j((0,U.z$)())}-${v}`;break;default:g=v}const E=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${O.SDK_VERSION}/${E}`}function q(){return(q=(0,h.Z)(function*(v){return(yield Te(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function oe(v,p){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,h.Z)(function*(v,p){return Te(v,"GET","/v2/recaptchaConfig",ue(v,p))})).apply(this,arguments)}function Ke(v){return void 0!==v&&void 0!==v.getResponse}function ft(v){return void 0!==v&&void 0!==v.enterprise}class zt{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function kn(v){return new Promise((p,g)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=p,E.onerror=T=>{const x=Ie("internal-error");x.customData=T,g(x)},E.type="text/javascript",E.charset="UTF-8",function Pn(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(E)})}function Fr(v){return`__${v}${Math.floor(1e6*Math.random())}`}class er{constructor(p){this.type="recaptcha-enterprise",this.auth=tr(p)}verify(p="verify",g=!1){var E=this;return(0,h.Z)(function*(){function x(){return x=(0,h.Z)(function*(me){if(!g){if(null==me.tenantId&&null!=me._agentRecaptchaConfig)return me._agentRecaptchaConfig.siteKey;if(null!=me.tenantId&&void 0!==me._tenantRecaptchaConfigs[me.tenantId])return me._tenantRecaptchaConfigs[me.tenantId].siteKey}return new Promise(function(){var Ye=(0,h.Z)(function*(tt,Dt){oe(me,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(nn=>{if(void 0!==nn.recaptchaKey){const di=new zt(nn);return null==me.tenantId?me._agentRecaptchaConfig=di:me._tenantRecaptchaConfigs[me.tenantId]=di,tt(di.siteKey)}Dt(new Error("recaptcha Enterprise site key undefined"))}).catch(nn=>{Dt(nn)})});return function(tt,Dt){return Ye.apply(this,arguments)}}())}),x.apply(this,arguments)}function Q(me,Ye,tt){const Dt=window.grecaptcha;ft(Dt)?Dt.enterprise.ready(()=>{Dt.enterprise.execute(me,{action:p}).then(nn=>{Ye(nn)}).catch(()=>{Ye("NO_RECAPTCHA")})}):tt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((me,Ye)=>{(function T(me){return x.apply(this,arguments)})(E.auth).then(tt=>{if(!g&&ft(window.grecaptcha))Q(tt,me,Ye);else{if(typeof window>"u")return void Ye(new Error("RecaptchaVerifier is only supported in browser"));kn("https://www.google.com/recaptcha/enterprise.js?render="+tt).then(()=>{Q(tt,me,Ye)}).catch(Dt=>{Ye(Dt)})}}).catch(tt=>{Ye(tt)})})})()}}function vi(v,p,g){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,h.Z)(function*(v,p,g,E=!1){const T=new er(v);let x;try{x=yield T.verify(g)}catch{x=yield T.verify(g,!0)}const Q=Object.assign({},p);return Object.assign(Q,E?{captchaResp:x}:{captchaResponse:x}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}class ta{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,g){const E=x=>new Promise((Q,me)=>{try{Q(p(x))}catch(Ye){me(Ye)}});E.onAbort=g,this.queue.push(E);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(p){var g=this;return(0,h.Z)(function*(){if(g.auth.currentUser===p)return;const E=[];try{for(const T of g.queue)yield T(p),T.onAbort&&E.push(T.onAbort)}catch(T){E.reverse();for(const x of E)try{x()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class Zs{constructor(p,g,E,T){this.app=p,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=E,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ki(this),this.idTokenSubscription=new ki(this),this.beforeStateQueue=new ta(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Oe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(p,g){var E=this;return g&&(this._popupRedirectResolver=Hn(g)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,x;if(!E._deleted&&(E.persistenceManager=yield W.create(E,p),!E._deleted)){if(null!==(T=E._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(x=E.currentUser)||void 0===x?void 0:x.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g,!0)}})()}initializeCurrentUser(p){var g=this;return(0,h.Z)(function*(){var E;const T=yield g.assertedPersistence.getCurrentUser();let x=T,Q=!1;if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const me=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,Ye=x?._redirectEventId,tt=yield g.tryRedirectSignIn(p);(!me||me===Ye)&&tt?.user&&(x=tt.user,Q=!0)}if(!x)return g.directlySetCurrentUser(null);if(!x._redirectEventId){if(Q)try{yield g.beforeStateQueue.runMiddleware(x)}catch(me){x=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(me))}return x?g.reloadAndSetCurrentUserOrClear(x):g.directlySetCurrentUser(null)}return z(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===x._redirectEventId?g.directlySetCurrentUser(x):g.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(p){var g=this;return(0,h.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch{yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,h.Z)(function*(){try{yield ai(p)}catch(E){if("auth/network-request-failed"!==E?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function hn(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,h.Z)(function*(){const E=p?(0,U.m9)(p):null;return E&&z(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(p,g=!1){var E=this;return(0,h.Z)(function*(){if(!E._deleted)return p&&z(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,h.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var g=this;return this.queue((0,h.Z)(function*(){yield g.assertedPersistence.setPersistence(Hn(p))}))}initializeRecaptchaConfig(){var p=this;return(0,h.Z)(function*(){const g=yield oe(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new zt(g);null==p.tenantId?p._agentRecaptchaConfig=E:p._tenantRecaptchaConfigs[p.tenantId]=E,E.emailPasswordEnabled&&new er(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new U.LL("auth","Firebase",p())}onAuthStateChanged(p,g,E){return this.registerStateListener(this.authStateSubscription,p,g,E)}beforeAuthStateChanged(p,g){return this.beforeStateQueue.pushCallback(p,g)}onIdTokenChanged(p,g,E){return this.registerStateListener(this.idTokenSubscription,p,g,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var E=this;return(0,h.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(g);return null===p?T.removeCurrentUser():T.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,h.Z)(function*(){if(!g.redirectPersistenceManager){const E=p&&Hn(p)||g._popupRedirectResolver;z(E,g,"argument-error"),g.redirectPersistenceManager=yield W.create(g,[Hn(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,h.Z)(function*(){var E,T;return g._isInitialized&&(yield g.queue((0,h.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===p?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,h.Z)(function*(){if(p===g.currentUser)return g.queue((0,h.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,E,T){if(this._deleted)return()=>{};const x="function"==typeof g?g:g.next.bind(g),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return z(Q,this,"internal-error"),Q.then(()=>x(this.currentUser)),"function"==typeof g?p.addObserver(g,E,T):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,h.Z)(function*(){g.currentUser&&g.currentUser!==p&&g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh(),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Z(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var g;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const T=yield null===(g=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();T&&(E["X-Firebase-Client"]=T);const x=yield p._getAppCheckToken();return x&&(E["X-Firebase-AppCheck"]=x),E})()}_getAppCheckToken(){var p=this;return(0,h.Z)(function*(){var g;const E=yield null===(g=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return E?.error&&function dt(v,...p){Re.logLevel<=se.in.WARN&&Re.warn(`Auth (${O.SDK_VERSION}): ${v}`,...p)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function tr(v){return(0,U.m9)(v)}class ki{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,U.ne)(g=>this.observer=g)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Do(v,p,g){const E=tr(v);z(E._canInitEmulator,E,"emulator-config-failed"),z(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const T=!!g?.disableWarnings,x=Co(p),{host:Q,port:me}=function na(v){const p=Co(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const x=T[1];return{host:x,port:$a(E.substr(x.length+1))}}{const[x,Q]=E.split(":");return{host:x,port:$a(Q)}}}(p);E.config.emulator={url:`${x}//${Q}${null===me?"":`:${me}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Q,port:me,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Fu(){function v(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Co(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function $a(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class ${constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return De("not implemented")}_getIdTokenResponse(p){return De("not implemented")}_linkToIdToken(p,g){return De("not implemented")}_getReauthenticationResolver(p){return De("not implemented")}}function te(v,p){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,h.Z)(function*(v,p){return Te(v,"POST","/v1/accounts:resetPassword",ue(v,p))})).apply(this,arguments)}function at(v,p){return sn.apply(this,arguments)}function sn(){return(sn=(0,h.Z)(function*(v,p){return Te(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ot(){return(ot=(0,h.Z)(function*(v,p){return Te(v,"POST","/v1/accounts:update",ue(v,p))})).apply(this,arguments)}function an(v,p){return _n.apply(this,arguments)}function _n(){return(_n=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:signInWithPassword",ue(v,p))})).apply(this,arguments)}function nr(v,p){return or.apply(this,arguments)}function or(){return(or=(0,h.Z)(function*(v,p){return Te(v,"POST","/v1/accounts:sendOobCode",ue(v,p))})).apply(this,arguments)}function za(){return(za=(0,h.Z)(function*(v,p){return nr(v,p)})).apply(this,arguments)}function bo(v,p){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,h.Z)(function*(v,p){return nr(v,p)})).apply(this,arguments)}function Vu(v,p){return hr.apply(this,arguments)}function hr(){return(hr=(0,h.Z)(function*(v,p){return nr(v,p)})).apply(this,arguments)}function Bt(){return(Bt=(0,h.Z)(function*(v,p){return nr(v,p)})).apply(this,arguments)}function ci(){return(ci=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:signInWithEmailLink",ue(v,p))})).apply(this,arguments)}function Er(){return(Er=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:signInWithEmailLink",ue(v,p))})).apply(this,arguments)}class Fi extends ${constructor(p,g,E,T=null){super("password",E),this._email=p,this._password=g,this._tenantId=T}static _fromEmailAndPassword(p,g){return new Fi(p,g,"password")}static _fromEmailAndCode(p,g,E=null){return new Fi(p,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,h.Z)(function*(){var E;switch(g.signInMethod){case"password":const T={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=p._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const x=yield vi(p,T,"signInWithPassword");return an(p,x)}return an(p,T).catch(function(){var x=(0,h.Z)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const me=yield vi(p,T,"signInWithPassword");return an(p,me)}return Promise.reject(Q)});return function(Q){return x.apply(this,arguments)}}());case"emailLink":return function rr(v,p){return ci.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:J(p,"internal-error")}})()}_linkToIdToken(p,g){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return at(p,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function ra(v,p){return Er.apply(this,arguments)}(p,{idToken:g,email:E._email,oobCode:E._password});default:J(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Fn(v,p){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:signInWithIdp",ue(v,p))})).apply(this,arguments)}class St extends ${constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new St(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):J("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:T}=g,x=(0,ee._T)(g,["providerId","signInMethod"]);if(!E||!T)return null;const Q=new St(E,T);return Q.idToken=x.idToken||void 0,Q.accessToken=x.accessToken||void 0,Q.secret=x.secret,Q.nonce=x.nonce,Q.pendingToken=x.pendingToken||null,Q}_getIdTokenResponse(p){return Fn(p,this.buildRequest())}_linkToIdToken(p,g){const E=this.buildRequest();return E.idToken=g,Fn(p,E)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Fn(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,U.xO)(g)}return p}}function To(){return(To=(0,h.Z)(function*(v,p){return Te(v,"POST","/v1/accounts:sendVerificationCode",ue(v,p))})).apply(this,arguments)}function jn(){return(jn=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:signInWithPhoneNumber",ue(v,p))})).apply(this,arguments)}function So(){return(So=(0,h.Z)(function*(v,p){const g=yield qt(v,"POST","/v1/accounts:signInWithPhoneNumber",ue(v,p));if(g.temporaryProof)throw fn(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const ys={USER_NOT_FOUND:"user-not-found"};function Ga(){return(Ga=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:signInWithPhoneNumber",ue(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),ys)})).apply(this,arguments)}class Ir extends ${constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new Ir({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new Ir({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function es(v,p){return jn.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function Ha(v,p){return So.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Ao(v,p){return Ga.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:E,verificationCode:T}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:E,code:T}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:E,phoneNumber:T,temporaryProof:x}=p;return E||g||T||x?new Ir({verificationId:g,verificationCode:E,phoneNumber:T,temporaryProof:x}):null}}class Li{constructor(p){var g,E,T,x,Q,me;const Ye=(0,U.zd)((0,U.pd)(p)),tt=null!==(g=Ye.apiKey)&&void 0!==g?g:null,Dt=null!==(E=Ye.oobCode)&&void 0!==E?E:null,nn=function ts(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ye.mode)&&void 0!==T?T:null);z(tt&&Dt&&nn,"argument-error"),this.apiKey=tt,this.operation=nn,this.code=Dt,this.continueUrl=null!==(x=Ye.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(Q=Ye.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(me=Ye.tenantId)&&void 0!==me?me:null}static parseLink(p){const g=function ia(v){const p=(0,U.zd)((0,U.pd)(v)).link,g=p?(0,U.zd)((0,U.pd)(p)).deep_link_id:null,E=(0,U.zd)((0,U.pd)(v)).deep_link_id;return(E?(0,U.zd)((0,U.pd)(E)).link:null)||E||g||p||v}(p);try{return new Li(g)}catch{return null}}}let Vd=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,E){return Fi._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const T=Li.parseLink(E);return z(T,"argument-error"),Fi._fromEmailAndCode(g,T.code,T.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Br{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Mo extends Br{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class _i extends Mo{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return z("providerId"in g&&"signInMethod"in g,"argument-error"),St._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return z(p.idToken||p.accessToken,"argument-error"),St._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return _i.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return _i.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:x,nonce:Q,providerId:me}=p;if(!E&&!T&&!g&&!x||!me)return null;try{return new _i(me)._credential({idToken:g,accessToken:E,nonce:Q,pendingToken:x})}catch{return null}}}let xo=(()=>{class v extends Mo{constructor(){super("facebook.com")}static credential(g){return St._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Ro=(()=>{class v extends Mo{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return St._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:T}=g;if(!E&&!T)return null;try{return v.credential(E,T)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Wa=(()=>{class v extends Mo{constructor(){super("github.com")}static credential(g){return St._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class V extends ${constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return Fn(p,this.buildRequest())}_linkToIdToken(p,g){const E=this.buildRequest();return E.idToken=g,Fn(p,E)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Fn(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:T,pendingToken:x}=g;return E&&T&&x&&E===T?new V(E,x):null}static _create(p,g){return new V(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class H extends Br{constructor(p){z(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return H.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return H.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=V.fromJSON(p);return z(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:E}=p;if(!g||!E)return null;try{return V._create(E,g)}catch{return null}}}let de=(()=>{class v extends Mo{constructor(){super("twitter.com")}static credential(g,E){return St._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=g;if(!E||!T)return null;try{return v.credential(E,T)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function we(v,p){return $e.apply(this,arguments)}function $e(){return($e=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:signUp",ue(v,p))})).apply(this,arguments)}class We{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,E,T=!1){return(0,h.Z)(function*(){const x=yield zn._fromIdTokenResponse(p,E,T),Q=kt(E);return new We({user:x,providerId:Q,_tokenResponse:E,operationType:g})})()}static _forOperation(p,g,E){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const T=kt(E);return new We({user:p,providerId:T,_tokenResponse:E,operationType:g})})()}}function kt(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Vt(v){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,h.Z)(function*(v){var p;const g=tr(v);if(yield g._initializationPromise,null!==(p=g.currentUser)&&void 0!==p&&p.isAnonymous)return new We({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield we(g,{returnSecureToken:!0}),T=yield We._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class En extends U.ZR{constructor(p,g,E,T){var x;super(g.code,g.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,En.prototype),this.customData={appName:p.name,tenantId:null!==(x=p.tenantId)&&void 0!==x?x:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,g,E,T){return new En(p,g,E,T)}}function jr(v,p,g,E){return("reauthenticate"===p?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?En._fromErrorAndOperation(v,x,p,E):x})}function Mi(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function zr(v,p){return sa.apply(this,arguments)}function sa(){return sa=(0,h.Z)(function*(v,p){const g=(0,U.m9)(v);yield xi(!0,g,p);const{providerUserInfo:E}=yield function vn(v,p){return Nn.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),T=Mi(E||[]);return g.providerData=g.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),sa.apply(this,arguments)}function qa(v,p){return oa.apply(this,arguments)}function oa(){return(oa=(0,h.Z)(function*(v,p,g=!1){const E=yield Rt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),g);return We._forOperation(v,"link",E)})).apply(this,arguments)}function xi(v,p,g){return vs.apply(this,arguments)}function vs(){return(vs=(0,h.Z)(function*(v,p,g){yield ai(p);const T=!1===v?"provider-already-linked":"no-such-provider";z(Mi(p.providerData).has(g)===v,p.auth,T)})).apply(this,arguments)}function il(v,p){return cp.apply(this,arguments)}function cp(){return(cp=(0,h.Z)(function*(v,p,g=!1){const{auth:E}=v,T="reauthenticate";try{const x=yield Rt(v,jr(E,T,p,v),g);z(x.idToken,E,"internal-error");const Q=xt(x.idToken);z(Q,E,"internal-error");const{sub:me}=Q;return z(v.uid===me,E,"user-mismatch"),We._forOperation(v,T,x)}catch(x){throw"auth/user-not-found"===x?.code&&J(E,"user-mismatch"),x}})).apply(this,arguments)}function Dw(v,p){return Ey.apply(this,arguments)}function Ey(){return(Ey=(0,h.Z)(function*(v,p,g=!1){const E="signIn",T=yield jr(v,E,p),x=yield We._fromIdTokenResponse(v,E,T);return g||(yield v._updateCurrentUser(x.user)),x})).apply(this,arguments)}function Ud(v,p){return lp.apply(this,arguments)}function lp(){return(lp=(0,h.Z)(function*(v,p){return Dw(tr(v),p)})).apply(this,arguments)}function Bd(v,p){return $d.apply(this,arguments)}function $d(){return($d=(0,h.Z)(function*(v,p){const g=(0,U.m9)(v);return yield xi(!1,g,p.providerId),qa(g,p)})).apply(this,arguments)}function Cw(v,p){return yr.apply(this,arguments)}function yr(){return(yr=(0,h.Z)(function*(v,p){return il((0,U.m9)(v),p)})).apply(this,arguments)}function No(){return(No=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:signInWithCustomToken",ue(v,p))})).apply(this,arguments)}function Iy(v,p){return Dy.apply(this,arguments)}function Dy(){return Dy=(0,h.Z)(function*(v,p){const g=tr(v),E=yield function Ib(v,p){return No.apply(this,arguments)}(g,{token:p,returnSecureToken:!0}),T=yield We._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(T.user),T}),Dy.apply(this,arguments)}class Za{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?jd._fromServerResponse(p,g):"totpInfo"in g?zd._fromServerResponse(p,g):J(p,"internal-error")}}class jd extends Za{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new jd(g)}}class zd extends Za{constructor(p){super("totp",p)}static _fromServerResponse(p,g){return new zd(g)}}function Uu(v,p,g){var E;z((null===(E=g.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),z(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(z(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(z(g.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function bw(v,p,g){return Cy.apply(this,arguments)}function Cy(){return Cy=(0,h.Z)(function*(v,p,g){var E;const T=tr(v),x={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=T._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Q=yield vi(T,x,"getOobCode",!0);g&&Uu(T,Q,g),yield bo(T,Q)}else g&&Uu(T,x,g),yield bo(T,x).catch(function(){var Q=(0,h.Z)(function*(me){if("auth/missing-recaptcha-token"!==me.code)return Promise.reject(me);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ye=yield vi(T,x,"getOobCode",!0);g&&Uu(T,Ye,g),yield bo(T,Ye)}});return function(me){return Q.apply(this,arguments)}}())}),Cy.apply(this,arguments)}function dp(v,p,g){return ns.apply(this,arguments)}function ns(){return(ns=(0,h.Z)(function*(v,p,g){yield te((0,U.m9)(v),{oobCode:p,newPassword:g})})).apply(this,arguments)}function sl(v,p){return vr.apply(this,arguments)}function vr(){return vr=(0,h.Z)(function*(v,p){yield function on(v,p){return ot.apply(this,arguments)}((0,U.m9)(v),{oobCode:p})}),vr.apply(this,arguments)}function aa(v,p){return by.apply(this,arguments)}function by(){return(by=(0,h.Z)(function*(v,p){const g=(0,U.m9)(v),E=yield te(g,{oobCode:p}),T=E.requestType;switch(z(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(E.mfaInfo,g,"internal-error");default:z(E.email,g,"internal-error")}let x=null;return E.mfaInfo&&(x=Za._fromServerResponse(tr(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function hp(v,p){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,h.Z)(function*(v,p){const{data:g}=yield aa((0,U.m9)(v),p);return g.email})).apply(this,arguments)}function Bu(v,p,g){return fp.apply(this,arguments)}function fp(){return fp=(0,h.Z)(function*(v,p,g){var E;const T=tr(v),x={returnSecureToken:!0,email:p,password:g,clientType:"CLIENT_TYPE_WEB"};let Q;if(null!==(E=T._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const tt=yield vi(T,x,"signUpPassword");Q=we(T,tt)}else Q=we(T,x).catch(function(){var tt=(0,h.Z)(function*(Dt){if("auth/missing-recaptcha-token"===Dt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const nn=yield vi(T,x,"signUpPassword");return we(T,nn)}return Promise.reject(Dt)});return function(Dt){return tt.apply(this,arguments)}}());const me=yield Q.catch(tt=>Promise.reject(tt)),Ye=yield We._fromIdTokenResponse(T,"signIn",me);return yield T._updateCurrentUser(Ye.user),Ye}),fp.apply(this,arguments)}function Db(v,p,g){return Ud((0,U.m9)(v),Vd.credential(p,g))}function pp(v,p,g){return Ya.apply(this,arguments)}function Ya(){return Ya=(0,h.Z)(function*(v,p,g){var E;const T=tr(v),x={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Q(me,Ye){z(Ye.handleCodeInApp,T,"argument-error"),Ye&&Uu(T,me,Ye)}if(null!==(E=T._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const me=yield vi(T,x,"getOobCode",!0);Q(me,g),yield Vu(T,me)}else Q(x,g),yield Vu(T,x).catch(function(){var me=(0,h.Z)(function*(Ye){if("auth/missing-recaptcha-token"!==Ye.code)return Promise.reject(Ye);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const tt=yield vi(T,x,"getOobCode",!0);Q(tt,g),yield Vu(T,tt)}});return function(Ye){return me.apply(this,arguments)}}())}),Ya.apply(this,arguments)}function Tw(v,p){const g=Li.parseLink(p);return"EMAIL_SIGNIN"===g?.operation}function Hd(v,p,g){return gp.apply(this,arguments)}function gp(){return(gp=(0,h.Z)(function*(v,p,g){const E=(0,U.m9)(v),T=Vd.credentialWithLink(p,g||wt());return z(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Ud(E,T)})).apply(this,arguments)}function Ty(){return(Ty=(0,h.Z)(function*(v,p){return Te(v,"POST","/v1/accounts:createAuthUri",ue(v,p))})).apply(this,arguments)}function Sw(v,p){return Gd.apply(this,arguments)}function Gd(){return Gd=(0,h.Z)(function*(v,p){const E={identifier:p,continueUri:ln()?wt():"http://localhost"},{signinMethods:T}=yield function Cb(v,p){return Ty.apply(this,arguments)}((0,U.m9)(v),E);return T||[]}),Gd.apply(this,arguments)}function Aw(v,p){return Wd.apply(this,arguments)}function Wd(){return Wd=(0,h.Z)(function*(v,p){const g=(0,U.m9)(v),T={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Uu(g.auth,T,p);const{email:x}=yield function ja(v,p){return za.apply(this,arguments)}(g.auth,T);x!==v.email&&(yield v.reload())}),Wd.apply(this,arguments)}function mp(v,p,g){return ol.apply(this,arguments)}function ol(){return ol=(0,h.Z)(function*(v,p,g){const E=(0,U.m9)(v),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};g&&Uu(E.auth,x,g);const{email:Q}=yield function ut(v,p){return Bt.apply(this,arguments)}(E.auth,x);Q!==v.email&&(yield v.reload())}),ol.apply(this,arguments)}function yp(){return(yp=(0,h.Z)(function*(v,p){return Te(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ay(v,p){return qd.apply(this,arguments)}function qd(){return qd=(0,h.Z)(function*(v,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const E=(0,U.m9)(v),x={idToken:yield E.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},Q=yield Rt(E,function Sy(v,p){return yp.apply(this,arguments)}(E.auth,x));E.displayName=Q.displayName||null,E.photoURL=Q.photoUrl||null;const me=E.providerData.find(({providerId:Ye})=>"password"===Ye);me&&(me.displayName=E.displayName,me.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Q)}),qd.apply(this,arguments)}function Mw(v,p){return My((0,U.m9)(v),p,null)}function vp(v,p){return My((0,U.m9)(v),null,p)}function My(v,p,g){return _s.apply(this,arguments)}function _s(){return(_s=(0,h.Z)(function*(v,p,g){const{auth:E}=v,x={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(x.email=p),g&&(x.password=g);const Q=yield Rt(v,at(E,x));yield v._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class Qa{constructor(p,g,E={}){this.isNewUser=p,this.providerId=g,this.profile=E}}class ir extends Qa{constructor(p,g,E,T){super(p,g,E),this.username=T}}class al extends Qa{constructor(p,g){super(p,"facebook.com",g)}}class ul extends ir{constructor(p,g){super(p,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class li extends Qa{constructor(p,g){super(p,"google.com",g)}}class $u extends ir{constructor(p,g,E){super(p,"twitter.com",g,E)}}function _p(v){const{user:p,_tokenResponse:g}=v;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function xy(v){var p,g;if(!v)return null;const{providerId:E}=v,T=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},x=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const Q=null===(g=null===(p=xt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(Q)return new Qa(x,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!E)return null;switch(E){case"facebook.com":return new al(x,T);case"github.com":return new ul(x,T);case"google.com":return new li(x,T);case"twitter.com":return new $u(x,T,v.screenName||null);case"custom":case"anonymous":return new Qa(x,null);default:return new Qa(x,E,T)}}(g)}class Os{constructor(p,g,E){this.type=p,this.credential=g,this.auth=E}static _fromIdtoken(p,g){return new Os("enroll",p,g)}static _fromMfaPendingCredential(p){return new Os("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,E;if(p?.multiFactorSession){if(null!==(g=p.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Os._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return Os._fromIdtoken(p.multiFactorSession.idToken)}return null}}class cl{constructor(p,g,E){this.session=p,this.hints=g,this.signInResolver=E}static _fromError(p,g){const E=tr(p),T=g.customData._serverResponse,x=(T.mfaInfo||[]).map(me=>Za._fromServerResponse(E,me));z(T.mfaPendingCredential,E,"internal-error");const Q=Os._fromMfaPendingCredential(T.mfaPendingCredential);return new cl(Q,x,function(){var me=(0,h.Z)(function*(Ye){const tt=yield Ye._process(E,Q);delete T.mfaInfo,delete T.mfaPendingCredential;const Dt=Object.assign(Object.assign({},T),{idToken:tt.idToken,refreshToken:tt.refreshToken});switch(g.operationType){case"signIn":const nn=yield We._fromIdTokenResponse(E,g.operationType,Dt);return yield E._updateCurrentUser(nn.user),nn;case"reauthenticate":return z(g.user,E,"internal-error"),We._forOperation(g.user,g.operationType,Dt);default:J(E,"internal-error")}});return function(Ye){return me.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,h.Z)(function*(){return g.signInResolver(p)})()}}function Ut(v,p){var g;const E=(0,U.m9)(v),T=p;return z(p.customData.operationType,E,"argument-error"),z(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),cl._fromError(E,T)}class ju{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>Za._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new ju(p)}getSession(){var p=this;return(0,h.Z)(function*(){return Os._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,g){var E=this;return(0,h.Z)(function*(){const T=p,x=yield E.getSession(),Q=yield Rt(E.user,T._process(E.user.auth,x,g));return yield E.user._updateTokensIfNecessary(Q),E.user.reload()})()}unenroll(p){var g=this;return(0,h.Z)(function*(){const E="string"==typeof p?p:p.uid,T=yield g.user.getIdToken();try{const x=yield Rt(g.user,function Py(v,p){return Te(v,"POST","/v2/accounts/mfaEnrollment:withdraw",ue(v,p))}(g.user.auth,{idToken:T,mfaEnrollmentId:E}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Q})=>Q!==E),yield g.user._updateTokensIfNecessary(x),yield g.user.reload()}catch(x){throw x}})()}}const Ys=new WeakMap;function Zd(v){const p=(0,U.m9)(v);return Ys.has(p)||Ys.set(p,ju._fromUser(p)),Ys.get(p)}const ll="__sak";class ky{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(ll,"1"),this.storage.removeItem(ll),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Kd=(()=>{class v extends ky{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bp(){const v=(0,U.z$)();return P(v)||yt(v)}()&&function Jn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ft(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),x=this.localCache[E];T!==x&&g(E,x,T)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((me,Ye,tt)=>{this.notifyListeners(me,tt)});const T=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const me=this.storage.getItem(T);if(g.newValue!==me)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!E)return}const x=()=>{const me=this.storage.getItem(T);!E&&this.localCache[T]===me||this.notifyListeners(T,me)},Q=this.storage.getItem(T);!function mn(){return(0,U.w1)()&&10===document.documentMode}()||Q===g.newValue||g.newValue===g.oldValue?x():setTimeout(x,10)}notifyListeners(g,E){this.localCache[g]=E;const T=this.listeners[g];if(T)for(const x of Array.from(T))x(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var T=()=>super._set,x=this;return(0,h.Z)(function*(){yield T().call(x,g,E),x.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,T=this;return(0,h.Z)(function*(){const x=yield E().call(T,g);return T.localCache[g]=JSON.stringify(x),x})()}_remove(g){var E=()=>super._remove,T=this;return(0,h.Z)(function*(){yield E().call(T,g),delete T.localCache[g]})()}}return v.type="LOCAL",v})(),Lr=(()=>{class v extends ky{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return v.type="SESSION",v})();let zu=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(x=>x.isListeningto(g));if(E)return E;const T=new v(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,h.Z)(function*(){const T=g,{eventId:x,eventType:Q,data:me}=T.data,Ye=E.handlersMap[Q];if(!Ye?.size)return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:Q});const tt=Array.from(Ye).map(function(){var nn=(0,h.Z)(function*(di){return di(T.origin,me)});return function(di){return nn.apply(this,arguments)}}()),Dt=yield function Sp(v){return Promise.all(v.map(function(){var p=(0,h.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return p.apply(this,arguments)}}()))}(tt);T.ports[0].postMessage({status:"done",eventId:x,eventType:Q,response:Dt})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Vi(v="",p=10){let g="";for(let E=0;E<p;E++)g+=Math.floor(10*Math.random());return v+g}class Ap{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,E=50){var T=this;return(0,h.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let Q,me;return new Promise((Ye,tt)=>{const Dt=Vi("",20);x.port1.start();const nn=setTimeout(()=>{tt(new Error("unsupported_event"))},E);me={messageChannel:x,onMessage(di){const io=di;if(io.data.eventId===Dt)switch(io.data.status){case"ack":clearTimeout(nn),Q=setTimeout(()=>{tt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Ye(io.data.response);break;default:clearTimeout(nn),clearTimeout(Q),tt(new Error("invalid_response"))}}},T.handlers.add(me),x.port1.addEventListener("message",me.onMessage),T.target.postMessage({eventType:p,eventId:Dt,data:g},[x.port2])}).finally(()=>{me&&T.removeMessageHandler(me)})})()}}function fr(){return window}function Mp(){return typeof fr().WorkerGlobalScope<"u"&&"function"==typeof fr().importScripts}function Kr(){return(Kr=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ua="firebaseLocalStorageDb",Hu="firebaseLocalStorage",Yd="fbase_key";class dl{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function hl(v,p){return v.transaction([Hu],p?"readwrite":"readonly").objectStore(Hu)}function Gu(){const v=indexedDB.open(ua,1);return new Promise((p,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(Hu,{keyPath:Yd})}catch(T){g(T)}}),v.addEventListener("success",(0,h.Z)(function*(){const E=v.result;E.objectStoreNames.contains(Hu)?p(E):(E.close(),yield function Np(){const v=indexedDB.deleteDatabase(ua);return new dl(v).toPromise()}(),p(yield Gu()))}))})}function fl(v,p,g){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,h.Z)(function*(v,p,g){const E=hl(v,!0).put({[Yd]:p,value:g});return new dl(E).toPromise()})).apply(this,arguments)}function pl(){return(pl=(0,h.Z)(function*(v,p){const g=hl(v,!1).get(p),E=yield new dl(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function gl(v,p){const g=hl(v,!0).delete(p);return new dl(g).toPromise()}const Op=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.Z)(function*(){return g.db||(g.db=yield Gu()),g.db})()}_withRetries(g){var E=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const x=yield E._openDb();return yield g(x)}catch(x){if(T++>3)throw x;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.Z)(function*(){return Mp()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.Z)(function*(){g.receiver=zu._getInstance(function Rp(){return Mp()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(T,x){return{keyProcessed:(yield g._poll()).includes(x.key)}});return function(T,x){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.Z)(function*(){var E,T;if(g.activeServiceWorker=yield function xp(){return Kr.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Ap(g.activeServiceWorker);const x=yield g.sender._send("ping",{},800);x&&null!==(E=x[0])&&void 0!==E&&E.fulfilled&&null!==(T=x[0])&&void 0!==T&&T.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Ps(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Gu();return yield fl(g,ll,"1"),yield gl(g,ll),!0}catch{}return!1})()}_withPendingWrite(g){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(x=>fl(x,g,E)),T.localCache[g]=E,T.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,h.Z)(function*(){const T=yield E._withRetries(x=>function ko(v,p){return pl.apply(this,arguments)}(x,g));return E.localCache[g]=T,T})()}_remove(g){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(T=>gl(T,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.Z)(function*(){const E=yield g._withRetries(Q=>{const me=hl(Q,!1).getAll();return new dl(me).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:Q,value:me}of E)x.add(Q),JSON.stringify(g.localCache[Q])!==JSON.stringify(me)&&(g.notifyListeners(Q,me),T.push(Q));for(const Q of Object.keys(g.localCache))g.localCache[Q]&&!x.has(Q)&&(g.notifyListeners(Q,null),T.push(Q));return T})()}notifyListeners(g,E){this.localCache[g]=E;const T=this.listeners[g];if(T)for(const x of Array.from(T))x(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),sr=1e12;class kw{constructor(p){this.auth=p,this.counter=sr,this._widgets=new Map}render(p,g){const E=this.counter;return this._widgets.set(E,new Fw(p,this.auth.name,g||{})),this.counter++,E}reset(p){var g;const E=p||sr;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(p){var g;return(null===(g=this._widgets.get(p||sr))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,h.Z)(function*(){var E;return null===(E=g._widgets.get(p||sr))||void 0===E||E.execute(),""})()}}class Fw{constructor(p,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof p?document.getElementById(p):p;z(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Lw(v){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)p.push(g.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const kp=Fr("rcb"),Fp=new qn(3e4,6e4);class Xd{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=fr().grecaptcha)||void 0===p||!p.render)}load(p,g=""){return z(function ca(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),p,"argument-error"),this.shouldResolveImmediately(g)&&Ke(fr().grecaptcha)?Promise.resolve(fr().grecaptcha):new Promise((E,T)=>{const x=fr().setTimeout(()=>{T(Ie(p,"network-request-failed"))},Fp.get());fr()[kp]=()=>{fr().clearTimeout(x),delete fr()[kp];const me=fr().grecaptcha;if(!me||!Ke(me))return void T(Ie(p,"internal-error"));const Ye=me.render;me.render=(tt,Dt)=>{const nn=Ye(tt,Dt);return this.counter++,nn},this.hostLanguage=g,E(me)},kn(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:kp,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(x),T(Ie(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var g;return!(null===(g=fr().grecaptcha)||void 0===g||!g.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Vw{load(p){return(0,h.Z)(function*(){return new kw(p)})()}clearedOneInstance(){}}const yl="recaptcha",eh={theme:"light",type:"image"};class th{constructor(p,g=Object.assign({},eh),E){this.parameters=g,this.type=yl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tr(E),this.isInvisible="invisible"===this.parameters.size,z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof p?document.getElementById(p):p;z(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vw:new Xd,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(g)||new Promise(x=>{const Q=me=>{me&&(p.tokenChangeListeners.delete(Q),x(me))};p.tokenChangeListeners.add(Q),p.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof p)p(g);else if("string"==typeof p){const E=fr()[p];"function"==typeof E&&E(g)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){z(ln()&&!Mp(),p.auth,"internal-error"),yield function Lp(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function L(v){return q.apply(this,arguments)}(p.auth);z(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Hr{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=Ir._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function wi(v,p,g){return nh.apply(this,arguments)}function nh(){return(nh=(0,h.Z)(function*(v,p,g){const E=tr(v),T=yield tu(E,p,(0,U.m9)(g));return new Hr(T,x=>Ud(E,x))})).apply(this,arguments)}function Yn(v,p,g){return _t.apply(this,arguments)}function _t(){return(_t=(0,h.Z)(function*(v,p,g){const E=(0,U.m9)(v);yield xi(!1,E,"phone");const T=yield tu(E.auth,p,(0,U.m9)(g));return new Hr(T,x=>Bd(E,x))})).apply(this,arguments)}function is(v,p,g){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,h.Z)(function*(v,p,g){const E=(0,U.m9)(v),T=yield tu(E.auth,p,(0,U.m9)(g));return new Hr(T,x=>Cw(E,x))})).apply(this,arguments)}function tu(v,p,g){return Up.apply(this,arguments)}function Up(){return Up=(0,h.Z)(function*(v,p,g){var E;const T=yield g.verify();try{let x;if(z("string"==typeof T,v,"argument-error"),z(g.type===yl,v,"argument-error"),x="string"==typeof p?{phoneNumber:p}:p,"session"in x){const Q=x.session;if("phoneNumber"in x)return z("enroll"===Q.type,v,"internal-error"),(yield function Cp(v,p){return Te(v,"POST","/v2/accounts/mfaEnrollment:start",ue(v,p))}(v,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{z("signin"===Q.type,v,"internal-error");const me=(null===(E=x.multiFactorHint)||void 0===E?void 0:E.uid)||x.multiFactorUid;return z(me,v,"missing-multi-factor-info"),(yield function Pp(v,p){return Te(v,"POST","/v2/accounts/mfaSignIn:start",ue(v,p))}(v,{mfaPendingCredential:Q.credential,mfaEnrollmentId:me,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield function Ks(v,p){return To.apply(this,arguments)}(v,{phoneNumber:x.phoneNumber,recaptchaToken:T});return Q}}finally{g._reset()}}),Up.apply(this,arguments)}function Vy(v,p){return vl.apply(this,arguments)}function vl(){return(vl=(0,h.Z)(function*(v,p){yield qa((0,U.m9)(v),p)})).apply(this,arguments)}let Uw=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=tr(g)}verifyPhoneNumber(g,E){return tu(this.auth,g,(0,U.m9)(E))}static credential(g,E){return Ir._fromVerification(g,E)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:T}=g;return E&&T?Ir._fromTokenResponse(E,T):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Qs(v,p){return p?Hn(p):(z(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Lt extends ${constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Fn(p,this._buildIdpRequest())}_linkToIdToken(p,g){return Fn(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return Fn(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function _l(v){return Dw(v.auth,new Lt(v),v.bypassAuthState)}function Uy(v){const{auth:p,user:g}=v;return z(g,p,"internal-error"),il(g,new Lt(v),v.bypassAuthState)}function nu(v){return Js.apply(this,arguments)}function Js(){return(Js=(0,h.Z)(function*(v){const{auth:p,user:g}=v;return z(g,p,"internal-error"),qa(g,new Lt(v),v.bypassAuthState)})).apply(this,arguments)}class ru{constructor(p,g,E,T,x=!1){this.auth=p,this.resolver=E,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,h.Z)(function*(E,T){p.pendingPromise={resolve:E,reject:T};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(x){p.reject(x)}});return function(E,T){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:x,tenantId:Q,error:me,type:Ye}=p;if(me)return void g.reject(me);const tt={auth:g.auth,requestUri:E,sessionId:T,tenantId:Q||void 0,postBody:x||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ye)(tt))}catch(Dt){g.reject(Dt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return _l;case"linkViaPopup":case"linkViaRedirect":return nu;case"reauthViaPopup":case"reauthViaRedirect":return Uy;default:J(this.auth,"internal-error")}}resolve(p){je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ss=new qn(2e3,1e4);function Bp(v,p,g){return iu.apply(this,arguments)}function iu(){return(iu=(0,h.Z)(function*(v,p,g){const E=tr(v);Me(v,p,Br);const T=Qs(E,g);return new eo(E,"signInViaPopup",p,T).executeNotNull()})).apply(this,arguments)}function By(v,p,g){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,h.Z)(function*(v,p,g){const E=(0,U.m9)(v);Me(E.auth,p,Br);const T=Qs(E.auth,g);return new eo(E.auth,"reauthViaPopup",p,T,E).executeNotNull()})).apply(this,arguments)}function $y(v,p,g){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,h.Z)(function*(v,p,g){const E=(0,U.m9)(v);Me(E.auth,p,Br);const T=Qs(E.auth,g);return new eo(E.auth,"linkViaPopup",p,T,E).executeNotNull()})).apply(this,arguments)}let eo=(()=>{class v extends ru{constructor(g,E,T,x,Q){super(g,E,x,Q),this.provider=T,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.Z)(function*(){const E=yield g.execute();return z(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,h.Z)(function*(){je(1===g.filter.length,"Popup operations only handle one event");const E=Vi();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(Ie(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,T;this.pollId=null!==(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,ss.get())};g()}}return v.currentPopupAction=null,v})();const $p="pendingRedirect",os=new Map;class Fo extends ru{constructor(p,g,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,h.Z)(function*(){let E=os.get(g.auth._key());if(!E){try{const x=(yield function wl(v,p){return El.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;E=()=>Promise.resolve(x)}catch(T){E=()=>Promise.reject(T)}os.set(g.auth._key(),E)}return g.bypassAuthState||os.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(E,p);if("unknown"!==p.type){if(p.eventId){const T=yield E.auth._redirectUserForId(p.eventId);if(T)return E.user=T,g().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function El(){return(El=(0,h.Z)(function*(v,p){const g=Fs(p),E=la(v);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(g));return yield E._remove(g),T})).apply(this,arguments)}function to(v,p){return as.apply(this,arguments)}function as(){return(as=(0,h.Z)(function*(v,p){return la(v)._set(Fs(p),"true")})).apply(this,arguments)}function rh(){os.clear()}function Ei(v,p){os.set(v._key(),p)}function la(v){return Hn(v._redirectPersistence)}function Fs(v){return Yt($p,v.config.apiKey,v.name)}function Ls(v,p,g){return function Ln(v,p,g){return Yr.apply(this,arguments)}(v,p,g)}function Yr(){return(Yr=(0,h.Z)(function*(v,p,g){const E=tr(v);Me(v,p,Br),yield E._initializationPromise;const T=Qs(E,g);return yield to(T,E),T._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function no(v,p,g){return function Qr(v,p,g){return Dr.apply(this,arguments)}(v,p,g)}function Dr(){return(Dr=(0,h.Z)(function*(v,p,g){const E=(0,U.m9)(v);Me(E.auth,p,Br),yield E.auth._initializationPromise;const T=Qs(E.auth,g);yield to(T,E.auth);const x=yield ih(E);return T._openRedirect(E.auth,p,"reauthViaRedirect",x)})).apply(this,arguments)}function da(v,p,g){return function jp(v,p,g){return Il.apply(this,arguments)}(v,p,g)}function Il(){return(Il=(0,h.Z)(function*(v,p,g){const E=(0,U.m9)(v);Me(E.auth,p,Br),yield E.auth._initializationPromise;const T=Qs(E.auth,g);yield xi(!1,E,p.providerId),yield to(T,E.auth);const x=yield ih(E);return T._openRedirect(E.auth,p,"linkViaRedirect",x)})).apply(this,arguments)}function Vs(v,p){return us.apply(this,arguments)}function us(){return(us=(0,h.Z)(function*(v,p){return yield tr(v)._initializationPromise,pr(v,p,!1)})).apply(this,arguments)}function pr(v,p){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,h.Z)(function*(v,p,g=!1){const E=tr(v),T=Qs(E,p),Q=yield new Fo(E,T,g).execute();return Q&&!g&&(delete Q.user._redirectEventId,yield E._persistUserIfCurrent(Q.user),yield E._setRedirectUser(null,p)),Q})).apply(this,arguments)}function ih(v){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,h.Z)(function*(v){const p=Vi(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class jy{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(g=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function tn(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oh(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var E;if(p.error&&!oh(p)){const T=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(Ie(this.auth,T))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const E=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sh(p))}saveEventToCache(p){this.cachedEventUids.add(sh(p)),this.lastProcessedEventTime=Date.now()}}function sh(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function oh({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function Wu(v){return zp.apply(this,arguments)}function zp(){return(zp=(0,h.Z)(function*(v,p={}){return Te(v,"GET","/v1/projects",p)})).apply(this,arguments)}const qu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bw=/^https?/;function cs(){return(cs=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Wu(v);for(const g of p)try{if(Hp(g))return}catch{}J(v,"unauthorized-domain")})).apply(this,arguments)}function Hp(v){const p=wt(),{protocol:g,hostname:E}=new URL(p);if(v.startsWith("chrome-extension://")){const Q=new URL(v);return""===Q.hostname&&""===E?"chrome-extension:"===g&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&Q.hostname===E}if(!Bw.test(g))return!1;if(qu.test(v))return E===v;const T=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const Mr=new qn(3e4,6e4);function ro(){const v=fr().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let Ku=null;const Yu=new qn(5e3,15e3),ah="__/auth/iframe",Dl="emulator/auth/iframe",ou={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uh(v){const p=v.config;z(p.authDomain,v,"auth-domain-config-required");const g=p.emulator?Nr(p,Dl):`https://${v.config.authDomain}/${ah}`,E={apiKey:p.apiKey,appName:v.name,v:O.SDK_VERSION},T=Gp.get(v.config.apiHost);T&&(E.eid=T);const x=v._getFrameworks();return x.length&&(E.fw=x.join(",")),`${g}?${(0,U.xO)(E).slice(1)}`}function Bn(){return Bn=(0,h.Z)(function*(v){const p=yield function Bi(v){return Ku=Ku||function Zu(v){return new Promise((p,g)=>{var E,T,x;function Q(){ro(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{ro(),g(Ie(v,"network-request-failed"))},timeout:Mr.get()})}if(null!==(T=null===(E=fr().gapi)||void 0===E?void 0:E.iframes)&&void 0!==T&&T.Iframe)p(gapi.iframes.getContext());else{if(null===(x=fr().gapi)||void 0===x||!x.load){const me=Fr("iframefcb");return fr()[me]=()=>{gapi.load?Q():g(Ie(v,"network-request-failed"))},kn(`https://apis.google.com/js/api.js?onload=${me}`).catch(Ye=>g(Ye))}Q()}}).catch(p=>{throw Ku=null,p})}(v),Ku}(v),g=fr().gapi;return z(g,v,"internal-error"),p.open({where:document.body,url:uh(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ou,dontclear:!0},E=>new Promise(function(){var T=(0,h.Z)(function*(x,Q){yield E.restyle({setHideOnLeave:!1});const me=Ie(v,"network-request-failed"),Ye=fr().setTimeout(()=>{Q(me)},Yu.get());function tt(){fr().clearTimeout(Ye),x(E)}E.ping(tt).then(tt,()=>{Q(me)})});return function(x,Q){return T.apply(this,arguments)}}()))}),Bn.apply(this,arguments)}const Jr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Cl{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Qu="__/auth/handler",Wp="emulator/auth/handler",Tl=encodeURIComponent("fac");function Ju(v,p,g,E,T,x){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,h.Z)(function*(v,p,g,E,T,x){z(v.config.authDomain,v,"auth-domain-config-required"),z(v.config.apiKey,v,"invalid-api-key");const Q={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:E,v:O.SDK_VERSION,eventId:T};if(p instanceof Br){p.setDefaultLanguage(v.languageCode),Q.providerId=p.providerId||"",(0,U.xb)(p.getCustomParameters())||(Q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Dt,nn]of Object.entries(x||{}))Q[Dt]=nn}if(p instanceof Mo){const Dt=p.getScopes().filter(nn=>""!==nn);Dt.length>0&&(Q.scopes=Dt.join(","))}v.tenantId&&(Q.tid=v.tenantId);const me=Q;for(const Dt of Object.keys(me))void 0===me[Dt]&&delete me[Dt];const Ye=yield v._getAppCheckToken(),tt=Ye?`#${Tl}=${encodeURIComponent(Ye)}`:"";return`${function Sl({config:v}){return v.emulator?Nr(v,Wp):`https://${v.authDomain}/${Qu}`}(v)}?${(0,U.xO)(me).slice(1)}${tt}`})).apply(this,arguments)}const ha="webStorageSupport",Xu=class qp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lr,this._completeRedirectFn=pr,this._overrideRedirectResult=Ei}_openPopup(p,g,E,T){var x=this;return(0,h.Z)(function*(){var Q;je(null===(Q=x.eventManagers[p._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const me=yield Ju(p,g,E,wt(),T);return function zy(v,p,g,E=500,T=600){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),Q=Math.max((window.screen.availWidth-E)/2,0).toString();let me="";const Ye=Object.assign(Object.assign({},Jr),{width:E.toString(),height:T.toString(),top:x,left:Q}),tt=(0,U.z$)().toLowerCase();g&&(me=A(tt)?"_blank":g),R(tt)&&(p=p||"http://localhost",Ye.scrollbars="yes");const Dt=Object.entries(Ye).reduce((di,[io,hh])=>`${di}${io}=${hh},`,"");if(function Tt(v=(0,U.z$)()){var p;return yt(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(tt)&&"_self"!==me)return function bl(v,p){const g=document.createElement("a");g.href=v,g.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(p||"",me),new Cl(null);const nn=window.open(p||"",me,Dt);z(nn,v,"popup-blocked");try{nn.focus()}catch{}return new Cl(nn)}(p,me,Vi())})()}_openRedirect(p,g,E,T){var x=this;return(0,h.Z)(function*(){return yield x._originValidation(p),function Nw(v){fr().location.href=v}(yield Ju(p,g,E,wt(),T)),new Promise(()=>{})})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:T,promise:x}=this.eventManagers[g];return T?Promise.resolve(T):(je(x,"If manager is not set, promise should be"),x)}const E=this.initAndGetManager(p);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(p){var g=this;return(0,h.Z)(function*(){const E=yield function au(v){return Bn.apply(this,arguments)}(p),T=new jy(p);return E.register("authEvent",x=>(z(x?.authEvent,p,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:T},g.iframes[p._key()]=E,T})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(ha,{type:ha},T=>{var x;const Q=null===(x=T?.[0])||void 0===x?void 0:x[ha];void 0!==Q&&g(!!Q),J(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function su(v){return cs.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ft()||P()||yt()}};class Hy{constructor(p){this.factorId=p}_process(p,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,E);case"signin":return this._finalizeSignIn(p,g.credential);default:return De("unexpected MultiFactorSessionType")}}}class Al extends Hy{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Al(p)}_finalizeEnroll(p,g,E){return function xw(v,p){return Te(v,"POST","/v2/accounts/mfaEnrollment:finalize",ue(v,p))}(p,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function Ly(v,p){return Te(v,"POST","/v2/accounts/mfaSignIn:finalize",ue(v,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ec=(()=>{class v{constructor(){}static assertion(g){return Al._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var fa="@firebase/auth";class Gy{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,h.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);g&&(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const lu=(0,U.Pz)("authIdTokenMaxAge")||300;let Kp=null;const Yp=v=>function(){var p=(0,h.Z)(function*(g){const E=g&&(yield g.getIdTokenResult()),T=E&&((new Date).getTime()-Date.parse(E.issuedAtTime))/1e3;if(T&&T>lu)return;const x=E?.token;Kp!==x&&(Kp=x,yield fetch(v,{method:x?"POST":"DELETE",headers:x?{Authorization:`Bearer ${x}`}:{}}))});return function(g){return p.apply(this,arguments)}}();function Qp(v=(0,O.getApp)()){const p=(0,O._getProvider)(v,"auth");if(p.isInitialized())return p.getImmediate();const g=function Io(v,p){const g=(0,O._getProvider)(v,"auth");if(g.isInitialized()){const T=g.getImmediate(),x=g.getOptions();if((0,U.vZ)(x,p??{}))return T;J(T,"already-initialized")}return g.initialize({options:p})}(v,{popupRedirectResolver:Xu,persistence:[Op,Kd,Lr]}),E=(0,U.Pz)("authTokenSyncURL");if(E){const x=Yp(E);(function Ny(v,p,g){(0,U.m9)(v).beforeAuthStateChanged(p,g)})(g,x,()=>x(g.currentUser)),function Ry(v,p,g,E){(0,U.m9)(v).onIdTokenChanged(p,g,E)}(g,Q=>x(Q))}const T=(0,U.q4)("auth");return T&&Do(g,`http://${T}`),g}!function dh(v){(0,O._registerComponent)(new ye.wA("auth",(p,{options:g})=>{const E=p.getProvider("app").getImmediate(),T=p.getProvider("heartbeat"),x=p.getProvider("app-check-internal"),{apiKey:Q,authDomain:me}=E.options;z(Q&&!Q.includes(":"),"invalid-api-key",{appName:E.name});const Ye={apiKey:Q,authDomain:me,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Z(v)},tt=new Zs(E,T,x,Ye);return function Ba(v,p){const g=p?.persistence||[],E=(Array.isArray(g)?g:[g]).map(Hn);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(E,p?.popupRedirectResolver)}(tt,g),tt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,E)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new ye.wA("auth-internal",p=>{const g=tr(p.getProvider("auth").getImmediate());return new Gy(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(fa,"0.23.2",function Wy(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,O.registerVersion)(fa,"0.23.2","esm2017")}("Browser")},9058:(pt,be,M)=>{M.d(be,{$s:()=>Hn,BH:()=>ae,G6:()=>Nr,L:()=>pe,LL:()=>Be,P0:()=>ct,Pz:()=>Ie,Sg:()=>Me,UG:()=>De,US:()=>ye,ZB:()=>ne,ZR:()=>Te,aH:()=>J,b$:()=>ln,eu:()=>ge,hl:()=>le,jU:()=>je,m9:()=>Yt,ne:()=>Rt,pd:()=>xt,q4:()=>dt,r3:()=>vn,ru:()=>wt,tV:()=>B,uI:()=>z,vZ:()=>lr,w1:()=>bn,xO:()=>oi,xb:()=>mr,z$:()=>Ve,zI:()=>he,zd:()=>ht});const ee=function(W){const j=[];let R=0;for(let P=0;P<W.length;P++){let A=W.charCodeAt(P);A<128?j[R++]=A:A<2048?(j[R++]=A>>6|192,j[R++]=63&A|128):55296==(64512&A)&&P+1<W.length&&56320==(64512&W.charCodeAt(P+1))?(A=65536+((1023&A)<<10)+(1023&W.charCodeAt(++P)),j[R++]=A>>18|240,j[R++]=A>>12&63|128,j[R++]=A>>6&63|128,j[R++]=63&A|128):(j[R++]=A>>12|224,j[R++]=A>>6&63|128,j[R++]=63&A|128)}return j},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,j){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const R=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,P=[];for(let A=0;A<W.length;A+=3){const X=W[A],ve=A+1<W.length,Je=ve?W[A+1]:0,vt=A+2<W.length,yt=vt?W[A+2]:0;let mn=(15&Je)<<2|yt>>6,Ft=63&yt;vt||(Ft=64,ve||(mn=64)),P.push(R[X>>2],R[(3&X)<<4|Je>>4],R[mn],R[Ft])}return P.join("")},encodeString(W,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(W):this.encodeByteArray(ee(W),j)},decodeString(W,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(W):function(W){const j=[];let R=0,P=0;for(;R<W.length;){const A=W[R++];if(A<128)j[P++]=String.fromCharCode(A);else if(A>191&&A<224){const X=W[R++];j[P++]=String.fromCharCode((31&A)<<6|63&X)}else if(A>239&&A<365){const vt=((7&A)<<18|(63&W[R++])<<12|(63&W[R++])<<6|63&W[R++])-65536;j[P++]=String.fromCharCode(55296+(vt>>10)),j[P++]=String.fromCharCode(56320+(1023&vt))}else{const X=W[R++],ve=W[R++];j[P++]=String.fromCharCode((15&A)<<12|(63&X)<<6|63&ve)}}return j.join("")}(this.decodeStringToByteArray(W,j))},decodeStringToByteArray(W,j){this.init_();const R=j?this.charToByteMapWebSafe_:this.charToByteMap_,P=[];for(let A=0;A<W.length;){const X=R[W.charAt(A++)],Je=A<W.length?R[W.charAt(A)]:0;++A;const yt=A<W.length?R[W.charAt(A)]:64;++A;const Tt=A<W.length?R[W.charAt(A)]:64;if(++A,null==X||null==Je||null==yt||null==Tt)throw new _e;P.push(X<<2|Je>>4),64!==yt&&(P.push(Je<<4&240|yt>>2),64!==Tt&&P.push(yt<<6&192|Tt))}return P},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}};class _e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pe=function(W){return function(W){const j=ee(W);return ye.encodeByteArray(j,!0)}(W).replace(/\./g,"")},B=function(W){try{return ye.decodeString(W,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function ne(W,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return j}for(const R in j)!j.hasOwnProperty(R)||!Le(R)||(W[R]=ne(W[R],j[R]));return W}function Le(W){return"__proto__"!==W}const Re=()=>{try{return function Ee(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if(typeof document>"u")return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=W&&B(W[1]);return j&&JSON.parse(j)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},dt=W=>{var j,R;return null===(R=null===(j=Re())||void 0===j?void 0:j.emulatorHosts)||void 0===R?void 0:R[W]},ct=W=>{const j=dt(W);if(!j)return;const R=j.lastIndexOf(":");if(R<=0||R+1===j.length)throw new Error(`Invalid host ${j} with no separate hostname and port!`);const P=parseInt(j.substring(R+1),10);return"["===j[0]?[j.substring(1,R-1),P]:[j.substring(0,R),P]},J=()=>{var W;return null===(W=Re())||void 0===W?void 0:W.config},Ie=W=>{var j;return null===(j=Re())||void 0===j?void 0:j[`_${W}`]};class ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,R)=>{this.resolve=j,this.reject=R})}wrapCallback(j){return(R,P)=>{R?this.reject(R):this.resolve(P),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(R):j(R,P))}}}function Me(W,j){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const P=j||"demo-project",A=W.iat||0,X=W.sub||W.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ve=Object.assign({iss:`https://securetoken.google.com/${P}`,aud:P,iat:A,exp:A+3600,auth_time:A,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},W);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(ve)),""].join(".")}function Ve(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function z(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function De(){var W;const j=null===(W=Re())||void 0===W?void 0:W.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function je(){return"object"==typeof self&&self.self===self}function wt(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function ln(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function bn(){const W=Ve();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Nr(){return!De()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function le(){try{return"object"==typeof indexedDB}catch{return!1}}function ge(){return new Promise((W,j)=>{try{let R=!0;const P="validate-browser-context-for-indexeddb-analytics-module",A=self.indexedDB.open(P);A.onsuccess=()=>{A.result.close(),R||self.indexedDB.deleteDatabase(P),W(!0)},A.onupgradeneeded=()=>{R=!1},A.onerror=()=>{var X;j((null===(X=A.error)||void 0===X?void 0:X.message)||"")}}catch(R){j(R)}})}function he(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Te extends Error{constructor(j,R,P){super(R),this.code=j,this.customData=P,this.name="FirebaseError",Object.setPrototypeOf(this,Te.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Be.prototype.create)}}class Be{constructor(j,R,P){this.service=j,this.serviceName=R,this.errors=P}create(j,...R){const P=R[0]||{},A=`${this.service}/${j}`,X=this.errors[j],ve=X?function rt(W,j){return W.replace(Xe,(R,P)=>{const A=j[P];return null!=A?String(A):`<${P}?>`})}(X,P):"Error";return new Te(A,`${this.serviceName}: ${ve} (${A}).`,P)}}const Xe=/\{\$([^}]+)}/g;function vn(W,j){return Object.prototype.hasOwnProperty.call(W,j)}function mr(W){for(const j in W)if(Object.prototype.hasOwnProperty.call(W,j))return!1;return!0}function lr(W,j){if(W===j)return!0;const R=Object.keys(W),P=Object.keys(j);for(const A of R){if(!P.includes(A))return!1;const X=W[A],ve=j[A];if(Tn(X)&&Tn(ve)){if(!lr(X,ve))return!1}else if(X!==ve)return!1}for(const A of P)if(!R.includes(A))return!1;return!0}function Tn(W){return null!==W&&"object"==typeof W}function oi(W){const j=[];for(const[R,P]of Object.entries(W))Array.isArray(P)?P.forEach(A=>{j.push(encodeURIComponent(R)+"="+encodeURIComponent(A))}):j.push(encodeURIComponent(R)+"="+encodeURIComponent(P));return j.length?"&"+j.join("&"):""}function ht(W){const j={};return W.replace(/^\?/,"").split("&").forEach(P=>{if(P){const[A,X]=P.split("=");j[decodeURIComponent(A)]=decodeURIComponent(X)}}),j}function xt(W){const j=W.indexOf("?");if(!j)return"";const R=W.indexOf("#",j);return W.substring(j,R>0?R:void 0)}function Rt(W,j){const R=new _r(W,j);return R.subscribe.bind(R)}class _r{constructor(j,R){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=R,this.task.then(()=>{j(this)}).catch(P=>{this.error(P)})}next(j){this.forEachObserver(R=>{R.next(j)})}error(j){this.forEachObserver(R=>{R.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,R,P){let A;if(void 0===j&&void 0===R&&void 0===P)throw new Error("Missing Observer.");A=function jt(W,j){if("object"!=typeof W||null===W)return!1;for(const R of j)if(R in W&&"function"==typeof W[R])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:R,complete:P},void 0===A.next&&(A.next=wn),void 0===A.error&&(A.error=wn),void 0===A.complete&&(A.complete=wn);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?A.error(this.finalError):A.complete()}catch{}}),this.observers.push(A),X}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let R=0;R<this.observers.length;R++)this.sendOne(R,j)}sendOne(j,R){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{R(this.observers[j])}catch(P){typeof console<"u"&&console.error&&console.error(P)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wn(){}const Un=1e3,Sn=2,zn=144e5,Mn=.5;function Hn(W,j=Un,R=Sn){const P=j*Math.pow(R,W),A=Math.round(Mn*P*(Math.random()-.5)*2);return Math.min(zn,P+A)}function Yt(W){return W&&W._delegate?W._delegate:W}},3652:(pt,be,M)=>{var h=M(5879);let U=null;function O(){return U}class se{}const ye=new h.OlP("DocumentToken");let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(pe)},providedIn:"platform"}),n})();const Ne=new h.OlP("Location Initialized");let pe=(()=>{class n extends _e{constructor(){super(),this._doc=(0,h.f3M)(ye),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function B(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function G(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ne(n){return n&&"?"!==n[0]?"?"+n:n}let Le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Qe)},providedIn:"root"}),n})();const Ee=new h.OlP("appBaseHref");let Qe=(()=>{class n extends Le{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(ye).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return B(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ne(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+ne(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+ne(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_e),h.LFG(Ee,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oe=(()=>{class n extends Le{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=B(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+ne(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+ne(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_e),h.LFG(Ee,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ge=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function J(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(G(ct(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ne(r))}normalize(t){return n.stripTrailingSlash(function dt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ct(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ne(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ne(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=ne,n.joinWithSlash=B,n.stripTrailingSlash=G,n.\u0275fac=function(t){return new(t||n)(h.LFG(Le))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Re(){return new Ge((0,h.LFG)(Le))}()},providedIn:"root"}),n})();function ct(n){return n.replace(/\/index.html$/,"")}class ta{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Zs=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,l)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new ta(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),tr(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{tr(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function tr(n,e){n.context.$implicit=e.item}class an{createSubscription(e,t){return(0,h.rg0)(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){(0,h.rg0)(()=>e.unsubscribe())}}class _n{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const nr=new _n,or=new an;let ja=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return nr;if((0,h.F4k)(t))return or;throw function ot(n,e){return new h.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),ys=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Ao="browser";function ia(n){return n===Ao}function Li(n){return"server"===n}let Mo=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new _i((0,h.LFG)(ye),window)}),n})();class _i{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ro(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=xo(this.window.history)||xo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function xo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ul extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class li extends ul{static makeCurrent(){!function ee(n){U||(U=n)}(new li)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function _p(){return $u=$u||document.querySelector("base"),$u?$u.getAttribute("href"):null}();return null==t?null:function rs(n){Oo=Oo||document.createElement("a"),Oo.setAttribute("href",n);const e=Oo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){$u=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function en(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Oo,$u=null,Ny=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const wp=new h.OlP("EventManagerPlugins");let Po=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new h.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(wp),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Ep{constructor(e){this._doc=e}}const Ip="ng-app-id";let Dp=(()=>{class n{constructor(t,r,o,u={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Li(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Ip}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){const o=this.styleRef;if(o.has(t)){const u=o.get(t);return u.usage+=r,u.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const o=this.styleNodesInDOM,u=o?.get(r);if(u?.parentNode===t)return o.delete(r),u.removeAttribute(Ip),u;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(Ip,this.appId),l}}addStyleToHost(t,r){const o=this.getStyleElement(t,r);t.appendChild(o);const u=this.styleRef,l=u.get(r)?.elements;l?l.push(o):u.set(r,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ye),h.LFG(h.AFp),h.LFG(h.Ojb,8),h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ja={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Os=/%COMP%/g,Rw=new h.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function ju(n,e){return e.map(t=>t.replace(Os,n))}let Ys=(()=>{class n{constructor(t,r,o,u,l,m,w,D=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=u,this.doc=l,this.platformId=m,this.ngZone=w,this.nonce=D,this.rendererByCompId=new Map,this.platformIsServer=Li(m),this.defaultRenderer=new Zd(t,l,w,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===h.ifc.ShadowDom&&(r={...r,encapsulation:h.ifc.Emulated});const o=this.getOrCreateRenderer(t,r);return o instanceof Cn?o.applyToHost(t):o instanceof ke&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let u=o.get(r.id);if(!u){const l=this.doc,m=this.ngZone,w=this.eventManager,D=this.sharedStylesHost,b=this.removeStylesOnCompDestroy,N=this.platformIsServer;switch(r.encapsulation){case h.ifc.Emulated:u=new Cn(w,D,r,this.appId,b,l,m,N);break;case h.ifc.ShadowDom:return new Fy(w,D,t,r,l,m,this.nonce,N);default:u=new ke(w,D,r,b,l,m,N)}o.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Po),h.LFG(Dp),h.LFG(h.AFp),h.LFG(Rw),h.LFG(ye),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(h.Ojb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Zd{constructor(e,t,r,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ja[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(bp(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(bp(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new h.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Ja[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Ja[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,o&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=O().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function bp(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Fy extends Zd{constructor(e,t,r,o,u,l,m,w){super(e,u,l,w),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const D=ju(o.id,o.styles);for(const b of D){const N=document.createElement("style");m&&N.setAttribute("nonce",m),N.textContent=b,this.shadowRoot.appendChild(N)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ke extends Zd{constructor(e,t,r,o,u,l,m,w){super(e,u,l,m),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=w?ju(w,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Cn extends ke{constructor(e,t,r,o,u,l,m,w){const D=o+"-"+r.id;super(e,t,r,u,l,m,w,D),this.contentAttr=function Oy(n){return"_ngcontent-%COMP%".replace(Os,n)}(D),this.hostAttr=function Py(n){return"_nghost-%COMP%".replace(Os,n)}(D)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Kd=(()=>{class n extends Ep{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ye))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Tp=["alt","control","meta","shift"],Lr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sp={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let zu=(()=>{class n extends Ep{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),Tp.forEach(D=>{const b=r.indexOf(D);b>-1&&(r.splice(b,1),l+=D+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let o=Lr[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Tp.forEach(l=>{l!==o&&(0,Sp[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ye))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Rp=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:Ao},{provide:h.g9A,useValue:function Mp(){li.makeCurrent()},multi:!0},{provide:ye,useFactory:function Kr(){return(0,h.RDi)(document),document},deps:[]}]),ua=new h.OlP(""),ks=[{provide:h.rWj,useClass:class Ry{addToWindow(e){h.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new h.vHH(5103,!1);return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const o=h.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};o.forEach(w=>{w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Hu=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function xp(){return new h.qLn},deps:[]},{provide:wp,useClass:Kd,multi:!0,deps:[ye,h.R0b,h.Lbi]},{provide:wp,useClass:zu,multi:!0,deps:[ye]},Ys,Dp,Po,{provide:h.FYo,useExisting:Ys},{provide:class $r{},useClass:Ny,deps:[]},[]];let Yd=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ua,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Hu,...ks],imports:[ys,h.hGG]}),n})(),fl=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ye))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Gu(){return new fl((0,h.LFG)(ye))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Hr=M(5592),wi=M(4674),Yn=M(2459),_t=M(2096),is=M(5619);const{isArray:Vp}=Array,{getPrototypeOf:tu,prototype:Up,keys:Vy}=Object;function vl(n){if(1===n.length){const e=n[0];if(Vp(e))return{args:e,keys:null};if(function Uw(n){return n&&"object"==typeof n&&tu(n)===Up}(e)){const t=Vy(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Qs=M(2737),Lt=M(7398);const{isArray:_l}=Array;function nu(n){return(0,Lt.U)(e=>function Uy(n,e){return _l(e)?n(...e):n(e)}(n,e))}var Js=M(9940);function ru(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var ss=M(8251),Bp=M(7103);function iu(...n){const e=(0,Js.yG)(n),t=(0,Js.jO)(n),{args:r,keys:o}=vl(n);if(0===r.length)return(0,Yn.D)([],e);const u=new Hr.y(function By(n,e,t=Qs.y){return r=>{Ui(e,()=>{const{length:o}=n,u=new Array(o);let l=o,m=o;for(let w=0;w<o;w++)Ui(e,()=>{const D=(0,Yn.D)(n[w],e);let b=!1;D.subscribe((0,ss.x)(r,N=>{u[w]=N,b||(b=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>ru(o,l):Qs.y));return t?u.pipe(nu(t)):u}function Ui(n,e,t){n?(0,Bp.f)(t,n,e):e()}const Xs=(0,M(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var eo=M(7537);function os(...n){return function $p(){return(0,eo.J)(1)}()((0,Yn.D)(n,(0,Js.yG)(n)))}var Fo=M(4829);function wl(n){return new Hr.y(e=>{(0,Fo.Xf)(n()).subscribe(e)})}var El=M(8407);function to(n,e){const t=(0,wi.m)(n)?n:()=>n,r=o=>o.error(t());return new Hr.y(e?o=>e.schedule(r,0,o):r)}var as=M(6232),rh=M(7394),Ei=M(9360);function la(){return(0,Ei.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ss.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Fs extends Hr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ei.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new rh.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ss.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=rh.w0.EMPTY)}return e}refCount(){return la()(this)}}var Ls=M(8645),Ln=M(4664);function Yr(n){return n<=0?()=>as.E:(0,Ei.e)((e,t)=>{let r=0;e.subscribe((0,ss.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function no(...n){const e=(0,Js.yG)(n);return(0,Ei.e)((t,r)=>{(e?os(n,t,e):os(n,t)).subscribe(r)})}function Qr(n,e){return(0,Ei.e)((t,r)=>{let o=0;t.subscribe((0,ss.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Dr=M(1631);function da(n){return(0,Ei.e)((e,t)=>{let r=!1;e.subscribe((0,ss.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function jp(n=Il){return(0,Ei.e)((e,t)=>{let r=!1;e.subscribe((0,ss.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Il(){return new Xs}function Vs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qr((o,u)=>n(o,u,r)):Qs.y,Yr(1),t?da(e):jp(()=>new Xs))}function us(n,e){return(0,wi.m)(e)?(0,Dr.z)(n,e,1):(0,Dr.z)(n,1)}var pr=M(9397);function Ii(n){return(0,Ei.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,ss.x)(t,void 0,void 0,l=>{u=(0,Fo.Xf)(n(l,Ii(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Lo(n,e){return(0,Ei.e)(function ih(n,e,t,r,o){return(u,l)=>{let m=t,w=e,D=0;u.subscribe((0,ss.x)(l,b=>{const N=D++;w=m?n(w,b,N):(m=!0,b),r&&l.next(w)},o&&(()=>{m&&l.next(w),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Vo(n){return n<=0?()=>as.E:(0,Ei.e)((e,t)=>{let r=[];e.subscribe((0,ss.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function sh(n){return(0,Lt.U)(()=>n)}function oh(n){return(0,Ei.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const tn="primary",Wu=Symbol("RouteTitle");class zp{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qu(n){return new zp(n)}function Bw(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))o[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function cs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Hp(n[o],e[o]))return!1;return!0}function Hp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Mr(n){return n.length>0?n[n.length-1]:null}function ro(n){return function nh(n){return!!n&&(n instanceof Hr.y||(0,wi.m)(n.lift)&&(0,wi.m)(n.subscribe))}(n)?n:(0,h.QGY)(n)?(0,Yn.D)(Promise.resolve(n)):(0,_t.of)(n)}const Zu={exact:function ah(n,e,t){if(!ls(n.segments,e.segments)||!uh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ah(n.children[r],e.children[r],t))return!1;return!0},subset:ou},Ku={exact:function Yu(n,e){return cs(n,e)},subset:function Dl(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Hp(n[t],e[t]))},ignored:()=>!0};function Bi(n,e,t){return Zu[t.paths](n.root,e.root,t.matrixParams)&&Ku[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ou(n,e,t){return Gp(n,e,e.segments,t)}function Gp(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ls(o,t)||e.hasChildren()||!uh(o,t,r))}if(n.segments.length===t.length){if(!ls(n.segments,t)||!uh(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!ou(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ls(n.segments,o)&&uh(n.segments,o,r)&&n.children[tn])&&Gp(n.children[tn],e,u,r)}}function uh(n,e,t){return e.every((r,o)=>Ku[t](n[o].parameters,r.parameters))}class au{constructor(e=new Bn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qu(this.queryParams)),this._queryParamMap}toString(){return zy.serialize(this)}}class Bn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bl(this)}}class Jr{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qu(this.parameters)),this._parameterMap}toString(){return qp(this)}}function ls(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let uu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new Cl},providedIn:"root"}),n})();class Cl{parse(e){const t=new Gy(e);return new au(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Qu(e.root,!0)}`,r=function Hy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Tl(t)}=${Tl(o)}`).join("&"):`${Tl(t)}=${Tl(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ju(n){return encodeURI(n)}(e.fragment)}`:""}`}}const zy=new Cl;function bl(n){return n.segments.map(e=>qp(e)).join("/")}function Qu(n,e){if(!n.hasChildren())return bl(n);if(e){const t=n.children[tn]?Qu(n.children[tn],!1):"",r=[];return Object.entries(n.children).forEach(([o,u])=>{o!==tn&&r.push(`${o}:${Qu(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function $w(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===tn&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==tn&&(t=t.concat(e(o,r)))}),t}(n,(r,o)=>o===tn?[Qu(n.children[tn],!1)]:[`${o}:${Qu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[tn]?`${bl(n)}/${t[0]}`:`${bl(n)}/(${t.join("//")})`}}function Wp(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Tl(n){return Wp(n).replace(/%3B/gi,";")}function Uo(n){return Wp(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sl(n){return decodeURIComponent(n)}function ha(n){return Sl(n.replace(/\+/g,"%20"))}function qp(n){return`${Uo(n.path)}${function Xu(n){return Object.keys(n).map(e=>`;${Uo(e)}=${Uo(n[e])}`).join("")}(n.parameters)}`}const Al=/^[^\/()?;#]+/;function ec(n){const e=n.match(Al);return e?e[0]:""}const lh=/^[^\/()?;=#]+/,Zp=/^[^=?&#]+/,fa=/^[^&#]+/;class Gy{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bn([],{}):new Bn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[tn]=new Bn(e,t)),r}parseSegment(){const e=ec(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new Jr(Sl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Ml(n){const e=n.match(lh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=ec(this.remaining);o&&(r=o,this.capture(r))}e[Sl(t)]=Sl(r)}parseQueryParam(e){const t=function xl(n){const e=n.match(Zp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function cu(n){const e=n.match(fa);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=ha(t),u=ha(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ec(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new h.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=tn);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[tn]:new Bn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function Wy(n){return n.segments.length>0?new Bn([],{[tn]:n}):n}function dh(n){const e={};for(const r of Object.keys(n.children)){const u=dh(n.children[r]);if(r===tn&&0===u.segments.length&&u.hasChildren())for(const[l,m]of Object.entries(u.children))e[l]=m;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function qy(n){if(1===n.numberOfChildren&&n.children[tn]){const e=n.children[tn];return new Bn(n.segments.concat(e.segments),e.children)}return n}(new Bn(n.segments,e))}function lu(n){return n instanceof au}function Yp(n){let e;const o=Wy(function t(u){const l={};for(const w of u.children){const D=t(w);l[w.outlet]=D}const m=new Bn(u.url,l);return u===n&&(e=m),m}(n.root));return e??o}function Qp(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(0===e.length)return g(o,o,o,t,r);const u=function x(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new T(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Object.entries(u.outlets).forEach(([w,D])=>{m[w]="string"==typeof D?D.split("/"):D}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new T(t,e,r)}(e);if(u.toRoot())return g(o,o,new Bn([],{}),t,r);const l=function me(n,e,t){if(n.isAbsolute)return new Q(e,!0,0);if(!t)return new Q(e,!1,NaN);if(null===t.parent)return new Q(t,!0,0);const r=v(n.commands[0])?0:1;return function Ye(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new h.vHH(4005,!1);o=r.segments.length}return new Q(r,!1,o-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,o,n),m=l.processChildren?nn(l.segmentGroup,l.index,u.commands):Dt(l.segmentGroup,l.index,u.commands);return g(o,l.segmentGroup,m,t,r)}function v(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function p(n){return"object"==typeof n&&null!=n&&n.outlets}function g(n,e,t,r,o){let l,u={};r&&Object.entries(r).forEach(([w,D])=>{u[w]=Array.isArray(D)?D.map(b=>`${b}`):`${D}`}),l=n===e?t:E(n,e,t);const m=Wy(dh(l));return new au(m,u,o)}function E(n,e,t){const r={};return Object.entries(n.children).forEach(([o,u])=>{r[o]=u===e?t:E(u,e,t)}),new Bn(n.segments,r)}class T{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&v(r[0]))throw new h.vHH(4003,!1);const o=r.find(p);if(o&&o!==Mr(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Q{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Dt(n,e,t){if(n||(n=new Bn([],{})),0===n.segments.length&&n.hasChildren())return nn(n,e,t);const r=function di(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],m=t[r];if(p(m))break;const w=`${m}`,D=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&D&&"object"==typeof D&&void 0===D.outlets){if(!fh(w,D,l))return u;r+=2}else{if(!fh(w,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Bn(n.segments.slice(0,r.pathIndex),{});return u.children[tn]=new Bn(n.segments.slice(r.pathIndex),n.children),nn(u,0,o)}return r.match&&0===o.length?new Bn(n.segments,{}):r.match&&!n.hasChildren()?io(n,e,t):r.match?nn(n,0,o):io(n,e,t)}function nn(n,e,t){if(0===t.length)return new Bn(n.segments,{});{const r=function tt(n){return p(n[0])?n[0].outlets:{[tn]:n}}(t),o={};if(!r[tn]&&n.children[tn]&&1===n.numberOfChildren&&0===n.children[tn].segments.length){const u=nn(n.children[tn],e,t);return new Bn(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(o[u]=Dt(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(o[u]=l)}),new Bn(n.segments,o)}}function io(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(p(u)){const w=hh(u.outlets);return new Bn(r,w)}if(0===o&&v(t[0])){r.push(new Jr(n.segments[e].path,Jp(t[0]))),o++;continue}const l=p(u)?u.outlets[tn]:`${u}`,m=o<t.length-1?t[o+1]:null;l&&m&&v(m)?(r.push(new Jr(l,Jp(m))),o+=2):(r.push(new Jr(l,{})),o++)}return new Bn(r,{})}function hh(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=io(new Bn([],{}),0,r))}),e}function Jp(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function fh(n,e,t){return n==t.path&&cs(e,t.parameters)}const tc="imperative";class ws{constructor(e,t){this.id=e,this.url=t}}class Bo extends ws{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Es extends ws{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class du extends ws{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $o extends ws{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class nc extends ws{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class hu extends ws{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rl extends ws{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xp extends ws{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class eg extends ws{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tg extends ws{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ng{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bb{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Tb{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sb{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jw{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zy{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zw{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ab{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Nl,this.attachRef=null}}let Nl=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ab,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Hw{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ky(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ky(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ni(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Ni(e,this._root).map(t=>t.value)}}function Ky(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ky(n,t);if(r)return r}return null}function Ni(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ni(n,t);if(r.length)return r.unshift(e),r}return[]}class so{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function rc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class rg extends Hw{constructor(e,t){super(e),this.snapshot=t,ig(this,e)}toString(){return this.snapshot.toString()}}function Di(n,e){const t=function ph(n,e){const l=new gh([],{},{},"",{},tn,e,null,{});return new Gw("",new so(l,[]))}(0,e),r=new is.X([new Jr("",{})]),o=new is.X({}),u=new is.X({}),l=new is.X({}),m=new is.X(""),w=new ic(r,o,l,m,u,tn,e,t.root);return w.snapshot=t.root,new rg(new so(w,[]),t)}class ic{constructor(e,t,r,o,u,l,m,w){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=u,this.outlet=l,this.component=m,this._futureSnapshot=w,this.title=this.dataSubject?.pipe((0,Lt.U)(D=>D[Wu]))??(0,_t.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Lt.U)(e=>qu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Lt.U)(e=>qu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Mb(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class gh{get title(){return this.data?.[Wu]}constructor(e,t,r,o,u,l,m,w,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.routeConfig=w,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gw extends Hw{constructor(e,t){super(t),this.url=e,ig(this,t)}toString(){return Ww(this._root)}}function ig(n,e){e.value._routerState=n,e.children.forEach(t=>ig(n,t))}function Ww(n){const e=n.children.length>0?` { ${n.children.map(Ww).join(", ")} } `:"";return`${n.value}${e}`}function sg(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,cs(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),cs(e.params,t.params)||n.paramsSubject.next(t.params),function su(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!cs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),cs(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Qy(n,e){const t=cs(n.params,e.params)&&function ch(n,e){return ls(n,e)&&n.every((t,r)=>cs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Qy(n.parent,e.parent))}let Jy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=tn,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(Nl),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb),this.inputBinder=(0,h.f3M)(Ol,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,!1);this._activatedRoute=t;const o=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new Xy(t,m,o.injector);this.activated=o.createComponent(l,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class Xy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ic?this.route:e===Nl?this.childContexts:this.parent.get(e,t)}}const Ol=new h.OlP("");let qw=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,o=iu([r.queryParams,r.params,r.data]).pipe((0,Ln.w)(([u,l,m],w)=>(m={...u,...l,...m},0===w?(0,_t.of)(m):Promise.resolve(m)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,h.qFp)(r.component);if(l)for(const{templateName:m}of l.inputs)t.activatedComponentRef.setInput(m,u[m]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function yh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function xb(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return yh(n,r,o);return yh(n,r)})}(n,e,t);return new so(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>yh(n,m)),l}}const r=function Zw(n){return new ic(new is.X(n.url),new is.X(n.params),new is.X(n.queryParams),new is.X(n.fragment),new is.X(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>yh(n,u));return new so(r,o)}}const og="ngNavigationCancelingError";function ev(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=lu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=sc(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function sc(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[og]=!0,r.cancellationCode=e,t&&(r.url=t),r}function vh(n){return tv(n)&&lu(n.url)}function tv(n){return n&&n[og]}let ag=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[Jy],encapsulation:2}),n})();function cg(n){const e=n.children&&n.children.map(cg),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==tn&&(t.component=ag),t}function Is(n){return n.outlet||tn}function _h(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class oc{constructor(e,t,r,o,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),sg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=rc(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),Object.values(o).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=rc(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=rc(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const o=rc(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Zy(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Sb(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(sg(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),sg(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=_h(o.snapshot);l.attachRef=null,l.route=o,l.injector=m,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class rv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wh{constructor(e,t){this.component=e,this.route=t}}function Ob(n,e,t){const r=n._root;return Eh(r,e?e._root:null,t,[r.value])}function pa(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function Eh(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=rc(e);return n.children.forEach(l=>{(function Jw(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function Xw(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ls(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ls(n.url,e.url)||!cs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qy(n,e)||!cs(n.queryParams,e.queryParams);default:return!Qy(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new rv(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Eh(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new wh(m.outlet.component,l))}else l&&Pl(e,m,o),o.canActivateChecks.push(new rv(r)),Eh(n,null,u.component?m?m.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,m])=>Pl(m,t.getContext(l),o)),o}function Pl(n,e,t){const r=rc(n),o=n.value;Object.entries(r).forEach(([u,l])=>{Pl(l,o.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new wh(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function ac(n){return"function"==typeof n}function kl(n){return n instanceof Xs||"EmptyError"===n?.name}const hg=Symbol("INITIAL_VALUE");function uc(){return(0,Ln.w)(n=>iu(n.map(e=>e.pipe(Yr(1),no(hg)))).pipe((0,Lt.U)(e=>{for(const t of e)if(!0!==t){if(t===hg)return hg;if(!1===t||t instanceof au)return t}return!0}),Qr(e=>e!==hg),Yr(1)))}function iE(n){return(0,El.z)((0,pr.b)(e=>{if(lu(e))throw ev(0,e)}),(0,Lt.U)(e=>!0===e))}class pg{constructor(e){this.segmentGroup=e||null}}class gg{constructor(e){this.urlTree=e}}function Ll(n){return to(new pg(n))}function Vl(n){return to(new gg(n))}class sE{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new h.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,_t.of)(r);if(o.numberOfChildren>1||!o.children[tn])return to(new h.vHH(4e3,!1));o=o.children[tn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new au(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([o,u])=>{if("string"==typeof u&&u.startsWith(":")){const m=u.substring(1);r[o]=t[m]}else r[o]=u}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return Object.entries(t.children).forEach(([m,w])=>{l[m]=this.createSegmentGroup(e,w,r,o)}),new Bn(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new h.vHH(4001,!1);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}const yg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function oE(n,e,t,r,o){const u=vg(n,e,t);return u.matched?(r=function ug(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function LM(n,e,t,r){const o=e.canMatch;if(!o||0===o.length)return(0,_t.of)(!0);const u=o.map(l=>{const m=pa(l,n);return ro(function dg(n){return n&&ac(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))});return(0,_t.of)(u).pipe(uc(),iE())}(r,e,t).pipe((0,Lt.U)(l=>!0===l?u:{...yg}))):(0,_t.of)(u)}function vg(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...yg}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Bw)(t,n,e);if(!o)return{...yg};const u={};Object.entries(o.posParams??{}).forEach(([m,w])=>{u[m]=w.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function aE(n,e,t,r){return t.length>0&&function $b(n,e,t){return t.some(r=>oo(n,e,r)&&Is(r)!==tn)}(n,t,r)?{segmentGroup:new Bn(e,Bb(r,new Bn(t,n.children))),slicedSegments:[]}:0===t.length&&function jb(n,e,t){return t.some(r=>oo(n,e,r))}(n,t,r)?{segmentGroup:new Bn(n.segments,Ub(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Bn(n.segments,n.children),slicedSegments:t}}function Ub(n,e,t,r,o){const u={};for(const l of r)if(oo(n,t,l)&&!o[Is(l)]){const m=new Bn([],{});u[Is(l)]=m}return{...o,...u}}function Bb(n,e){const t={};t[tn]=e;for(const r of n)if(""===r.path&&Is(r)!==tn){const o=new Bn([],{});t[Is(r)]=o}return t}function oo(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class UM{constructor(e,t,r,o,u,l,m){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m,this.allowRedirects=!0,this.applyRedirects=new sE(this.urlSerializer,this.urlTree)}noMatchError(e){return new h.vHH(4002,!1)}recognize(){const e=aE(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,tn).pipe(Ii(t=>{if(t instanceof gg)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof pg?this.noMatchError(t):t}),(0,Lt.U)(t=>{const r=new gh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},tn,this.rootComponentType,null,{}),o=new so(r,t),u=new Gw("",o),l=function Kp(n,e,t=null,r=null){return Qp(Yp(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,tn).pipe(Ii(r=>{throw r instanceof pg?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Yy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o,!0)}processChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Yn.D)(o).pipe(us(u=>{const l=r.children[u],m=function Nb(n,e){const t=n.filter(r=>Is(r)===e);return t.push(...n.filter(r=>Is(r)!==e)),t}(t,u);return this.processSegmentGroup(e,m,l,u)}),Lo((u,l)=>(u.push(...l),u)),da(null),function jy(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qr((o,u)=>n(o,u,r)):Qs.y,Vo(1),t?da(e):jp(()=>new Xs))}(),(0,Dr.z)(u=>{if(null===u)return Ll(r);const l=Hb(u);return function BM(n){n.sort((e,t)=>e.value.outlet===tn?-1:t.value.outlet===tn?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,_t.of)(l)}))}processSegment(e,t,r,o,u,l){return(0,Yn.D)(t).pipe(us(m=>this.processSegmentAgainstRoute(m._injector??e,t,m,r,o,u,l).pipe(Ii(w=>{if(w instanceof pg)return(0,_t.of)(null);throw w}))),Vs(m=>!!m),Ii(m=>{if(kl(m))return function zb(n,e,t){return 0===e.length&&!n.children[t]}(r,o,u)?(0,_t.of)([]):Ll(r);throw m}))}processSegmentAgainstRoute(e,t,r,o,u,l,m){return function Dh(n,e,t,r){return!!(Is(n)===r||r!==tn&&oo(e,t,n))&&("**"===n.path||vg(e,n,t).matched)}(r,o,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,o,r,u,l,m):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,u,l):Ll(o):Ll(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Vl(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,Dr.z)(l=>{const m=new Bn(l,{});return this.processSegment(e,t,m,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:m,consumedSegments:w,remainingSegments:D,positionalParamSegments:b}=vg(t,o,u);if(!m)return Ll(t);const N=this.applyRedirects.applyRedirectCommands(w,o.redirectTo,b);return o.redirectTo.startsWith("/")?Vl(N):this.applyRedirects.lineralizeSegments(o,N).pipe((0,Dr.z)(K=>this.processSegment(e,r,t,K.concat(D),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u,l){let m;if("**"===r.path){const w=o.length>0?Mr(o).parameters:{},D=new gh(o,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,uE(r),Is(r),r.component??r._loadedComponent??null,r,cE(r));m=(0,_t.of)({snapshot:D,consumedSegments:[],remainingSegments:[]}),t.children={}}else m=oE(t,r,o,e).pipe((0,Lt.U)(({matched:w,consumedSegments:D,remainingSegments:b,parameters:N})=>w?{snapshot:new gh(D,N,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,uE(r),Is(r),r.component??r._loadedComponent??null,r,cE(r)),consumedSegments:D,remainingSegments:b}:null));return m.pipe((0,Ln.w)(w=>null===w?Ll(t):this.getChildConfig(e=r._injector??e,r,o).pipe((0,Ln.w)(({routes:D})=>{const b=r._loadedInjector??e,{snapshot:N,consumedSegments:K,remainingSegments:re}=w,{segmentGroup:Se,slicedSegments:qe}=aE(t,K,re,D);if(0===qe.length&&Se.hasChildren())return this.processChildren(b,D,Se).pipe((0,Lt.U)(At=>null===At?null:[new so(N,At)]));if(0===D.length&&0===qe.length)return(0,_t.of)([new so(N,[])]);const Ze=Is(r)===u;return this.processSegment(b,D,Se,qe,Ze?tn:u,!0).pipe((0,Lt.U)(At=>[new so(N,At)]))}))))}getChildConfig(e,t,r){return t.children?(0,_t.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,_t.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function Vb(n,e,t,r){const o=e.canLoad;if(void 0===o||0===o.length)return(0,_t.of)(!0);const u=o.map(l=>{const m=pa(l,n);return ro(function lg(n){return n&&ac(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))});return(0,_t.of)(u).pipe(uc(),iE())}(e,t,r).pipe((0,Dr.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,pr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function av(n){return to(sc(!1,3))}())):(0,_t.of)({routes:[],injector:e})}}function $M(n){const e=n.value.routeConfig;return e&&""===e.path}function Hb(n){const e=[],t=new Set;for(const r of n){if(!$M(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Hb(r.children);e.push(new so(r.value,o))}return e.filter(r=>!t.has(r))}function uE(n){return n.data||{}}function cE(n){return n.resolve||{}}function cv(n){return"string"==typeof n.title||null===n.title}function _g(n){return(0,Ln.w)(e=>{const t=n(e);return t?(0,Yn.D)(t).pipe((0,Lt.U)(()=>e)):(0,_t.of)(e)})}const bh=new h.OlP("ROUTES");let dE=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,_t.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ro(t.loadComponent()).pipe((0,Lt.U)(wg),(0,pr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),oh(()=>{this.componentLoaders.delete(t)})),o=new Fs(r,()=>new Ls.x).pipe(la());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,_t.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Lt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,D;return Array.isArray(m)?D=m:(w=m.create(t).injector,D=w.get(bh,[],h.XFs.Self|h.XFs.Optional).flat()),{routes:D.map(cg),injector:w}}),oh(()=>{this.childrenLoaders.delete(r)})),l=new Fs(u,()=>new Ls.x).pipe(la());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return ro(t()).pipe((0,Lt.U)(wg),(0,Dr.z)(r=>r instanceof h.YKP||Array.isArray(r)?(0,_t.of)(r):(0,Yn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function wg(n){return function jM(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Ul=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ls.x,this.configLoader=(0,h.f3M)(dE),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(uu),this.rootContexts=(0,h.f3M)(Nl),this.inputBindingEnabled=null!==(0,h.f3M)(Ol,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,_t.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new bb(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new ng(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new is.X({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:tc,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Qr(r=>0!==r.id),(0,Lt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),(0,Ln.w)(r=>{let o=!1,u=!1;return(0,_t.of)(r).pipe((0,pr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ln.w)(l=>{const m=t.browserUrlTree.toString(),w=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!w&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const b="";return this.events.next(new $o(l.id,t.serializeUrl(r.rawUrl),b,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),as.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Zb(l.source)&&(t.browserUrlTree=l.extractedUrl),(0,_t.of)(l).pipe((0,Ln.w)(b=>{const N=this.transitions?.getValue();return this.events.next(new Bo(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),N!==this.transitions?.getValue()?as.E:Promise.resolve(b)}),function Wb(n,e,t,r,o,u){return(0,Dr.z)(l=>function VM(n,e,t,r,o,u,l="emptyOnly"){return new UM(n,e,t,r,o,l,u).recognize()}(n,e,t,r,l.extractedUrl,o,u).pipe((0,Lt.U)(({state:m,tree:w})=>({...l,targetSnapshot:m,urlAfterRedirects:w}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,pr.b)(b=>{if(r.targetSnapshot=b.targetSnapshot,r.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!b.extras.skipLocationChange){const K=t.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);t.setBrowserUrl(K,b)}t.browserUrlTree=b.urlAfterRedirects}const N=new hu(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(N)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:b,extractedUrl:N,source:K,restoredState:re,extras:Se}=l,qe=new Bo(b,this.urlSerializer.serialize(N),K,re);this.events.next(qe);const Ze=Di(0,this.rootComponentType).snapshot;return r={...l,targetSnapshot:Ze,urlAfterRedirects:N,extras:{...Se,skipLocationChange:!1,replaceUrl:!1}},(0,_t.of)(r)}{const b="";return this.events.next(new $o(l.id,t.serializeUrl(r.extractedUrl),b,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),as.E}}),(0,pr.b)(l=>{const m=new Rl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,Lt.U)(l=>r={...l,guards:Ob(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function kb(n,e){return(0,Dr.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?(0,_t.of)({...t,guardsResult:!0}):function Fb(n,e,t,r){return(0,Yn.D)(n).pipe((0,Dr.z)(o=>function Fl(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,_t.of)(!0);const l=u.map(m=>{const w=_h(e)??o,D=pa(m,w);return ro(function iv(n){return n&&ac(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):w.runInContext(()=>D(n,e,t,r))).pipe(Vs())});return(0,_t.of)(l).pipe(uc())}(o.component,o.route,t,e,r)),Vs(o=>!0!==o,!0))}(l,r,o,n).pipe((0,Dr.z)(m=>m&&function eE(n){return"boolean"==typeof n}(m)?function Lb(n,e,t,r){return(0,Yn.D)(e).pipe(us(o=>os(function rE(n,e){return null!==n&&e&&e(new Tb(n)),(0,_t.of)(!0)}(o.route.parent,r),function nE(n,e){return null!==n&&e&&e(new jw(n)),(0,_t.of)(!0)}(o.route,r),function ov(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function FM(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>wl(()=>{const m=l.guards.map(w=>{const D=_h(l.node)??t,b=pa(w,D);return ro(function tE(n){return n&&ac(n.canActivateChild)}(b)?b.canActivateChild(r,n):D.runInContext(()=>b(r,n))).pipe(Vs())});return(0,_t.of)(m).pipe(uc())}));return(0,_t.of)(u).pipe(uc())}(n,o.path,t),function fg(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,_t.of)(!0);const o=r.map(u=>wl(()=>{const l=_h(e)??t,m=pa(u,l);return ro(function Ih(n){return n&&ac(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Vs())}));return(0,_t.of)(o).pipe(uc())}(n,o.route,t))),Vs(o=>!0!==o,!0))}(r,u,n,e):(0,_t.of)(m)),(0,Lt.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,pr.b)(l=>{if(r.guardsResult=l.guardsResult,lu(l.guardsResult))throw ev(0,l.guardsResult);const m=new Xp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),Qr(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),_g(l=>{if(l.guards.canActivateChecks.length)return(0,_t.of)(l).pipe((0,pr.b)(m=>{const w=new eg(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}),(0,Ln.w)(m=>{let w=!1;return(0,_t.of)(m).pipe(function qb(n,e){return(0,Dr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,_t.of)(t);let u=0;return(0,Yn.D)(o).pipe(us(l=>function uv(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!cv(o)&&(u[Wu]=o.title),function ga(n,e,t,r){const o=function Ch(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return(0,_t.of)({});const u={};return(0,Yn.D)(o).pipe((0,Dr.z)(l=>function lE(n,e,t,r){const o=_h(e)??r,u=pa(n,o);return ro(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Vs(),(0,pr.b)(m=>{u[l]=m}))),Vo(1),sh(u),Ii(l=>kl(l)?as.E:to(l)))}(u,n,e,r).pipe((0,Lt.U)(l=>(n._resolvedData=l,n.data=Yy(n,t).resolve,o&&cv(o)&&(n.data[Wu]=o.title),null)))}(l.route,r,n,e)),(0,pr.b)(()=>u++),Vo(1),(0,Dr.z)(l=>u===o.length?(0,_t.of)(t):as.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,pr.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,pr.b)(m=>{const w=new tg(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}))}),_g(l=>{const m=w=>{const D=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,pr.b)(b=>{w.component=b}),(0,Lt.U)(()=>{})));for(const b of w.children)D.push(...m(b));return D};return iu(m(l.targetSnapshot.root)).pipe(da(),Yr(1))}),_g(()=>this.afterPreactivation()),(0,Lt.U)(l=>{const m=function mh(n,e,t){const r=yh(n,e._root,t?t._root:void 0);return new rg(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,pr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t,r)=>(0,Lt.U)(o=>(new oc(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Yr(1),(0,pr.b)({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Es(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),oh(()=>{o||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ii(l=>{if(u=!0,tv(l)){vh(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new du(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),vh(l)){const w=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Zb(r.source)};t.scheduleNavigation(w,tc,null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new nc(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(w){r.reject(w)}}return as.E}))}))}cancelNavigationTransition(t,r,o){const u=new du(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Zb(n){return n!==tc}let Kb=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===tn);return r}getResolvedTitleForRoute(t){return t.data[Wu]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(hE)},providedIn:"root"}),n})(),hE=(()=>{class n extends Kb{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fl))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Yb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Jb)},providedIn:"root"}),n})();class Qb{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Jb=(()=>{class n extends Qb{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Eg=new h.OlP("",{providedIn:"root",factory:()=>({})});let fE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Ig)},providedIn:"root"}),n})(),Ig=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Th=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Th||{});function Dg(n,e){n.events.pipe(Qr(t=>t instanceof Es||t instanceof du||t instanceof nc||t instanceof $o),(0,Lt.U)(t=>t instanceof Es||t instanceof $o?Th.COMPLETE:t instanceof du&&(0===t.code||1===t.code)?Th.REDIRECTING:Th.FAILED),Qr(t=>t!==Th.REDIRECTING),Yr(1)).subscribe(()=>{e()})}function Xb(n){throw n}function Bl(n,e,t){return e.parse("/")}const eT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ds=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(Eg,{optional:!0})||{},this.pendingTasks=(0,h.f3M)(h.HDt),this.errorHandler=this.options.errorHandler||Xb,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Bl,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(fE),this.routeReuseStrategy=(0,h.f3M)(Yb),this.titleStrategy=(0,h.f3M)(Kb),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,h.f3M)(bh,{optional:!0})?.flat()??[],this.navigationTransitions=(0,h.f3M)(Ul),this.urlSerializer=(0,h.f3M)(uu),this.location=(0,h.f3M)(Ge),this.componentInputBindingEnabled=!!(0,h.f3M)(Ol,{optional:!0}),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new au,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Di(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),tc,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const u={replaceUrl:!0},l=o?.navigationId?o:null;if(o){const w={...o};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(cg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,D=w?this.currentUrlTree.fragment:l;let N,b=null;switch(m){case"merge":b={...this.currentUrlTree.queryParams,...u};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=u||null}null!==b&&(b=this.removeEmptyProps(b));try{N=Yp(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),N=this.currentUrlTree.root}return Qp(N,t,b,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=lu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,tc,null,r)}navigate(t,r={skipLocationChange:!1}){return function pE(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new h.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...eT}:!1===r?{...tT}:r,lu(t))return Bi(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Bi(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,D;l?(m=l.resolve,w=l.reject,D=l.promise):D=new Promise((N,K)=>{m=N,w=K});const b=this.pendingTasks.add();return Dg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(o,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class gE{}let zM=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Qr(t=>t instanceof Es),us(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&o.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,Yn.D)(o).pipe((0,eo.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,_t.of)(null);const u=o.pipe((0,Dr.z)(l=>null===l?(0,_t.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Yn.D)([u,l]).pipe((0,eo.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ds),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(gE),h.LFG(dE))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cc=new h.OlP("");let $n=(()=>{class n{constructor(t,r,o,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Bo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Es?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof $o&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof zw&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new zw(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function jo(n,e){return{\u0275kind:n,\u0275providers:e}}function hv(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(ds),o=n.get(bg);1===n.get(vE)&&r.initialNavigation(),n.get(pv,null,h.XFs.Optional)?.setUpPreloading(),n.get(cc,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const bg=new h.OlP("",{factory:()=>new Ls.x}),vE=new h.OlP("",{providedIn:"root",factory:()=>1}),pv=new h.OlP("");function wE(n){return jo(0,[{provide:pv,useExisting:zM},{provide:gE,useExisting:n}])}const Sg=new h.OlP("ROUTER_FORROOT_GUARD"),Ag=[Ge,{provide:uu,useClass:Cl},ds,Nl,{provide:ic,useFactory:function dv(n){return n.routerState.root},deps:[ds]},dE,[]];function lc(){return new h.PXZ("Router",ds)}let Mg=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Ag,[],{provide:bh,multi:!0,useValue:t},{provide:Sg,useFactory:IE,deps:[[ds,new h.FiY,new h.tp0]]},{provide:Eg,useValue:r||{}},r?.useHash?{provide:Le,useClass:Oe}:{provide:Le,useClass:Qe},{provide:cc,useFactory:()=>{const n=(0,h.f3M)(Mo),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(Eg),r=(0,h.f3M)(Ul),o=(0,h.f3M)(uu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new $n(o,r,n,e,t)}},r?.preloadingStrategy?wE(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:lc},r?.initialNavigation?jl(r):[],r?.bindToComponentInputs?jo(8,[qw,{provide:Ol,useExisting:qw}]).\u0275providers:[],[{provide:DE,useFactory:hv},{provide:h.tb,multi:!0,useExisting:DE}]]}}static forChild(t){return{ngModule:n,providers:[{provide:bh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Sg,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function IE(n){return"guarded"}function jl(n){return["disabled"===n.initialNavigation?jo(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(ds);return()=>{e.setUpLocationChangeListener()}}},{provide:vE,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?jo(2,[{provide:vE,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(Ne,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(ds),u=e.get(bg);Dg(o,()=>{r(!0)}),e.get(Ul).afterPreactivation=()=>(r(!0),u.closed?(0,_t.of)(void 0):u),o.initialNavigation()}))}}]).\u0275providers:[]]}const DE=new h.OlP("");var TE=M(6321),un=M(3698);function mv(){return(0,Ei.e)((n,e)=>{let t,r=!1;n.subscribe((0,ss.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}var it,hT=M(3997),Ci=M(6304),xg=(M(6365),M(3106)),Ae=M(5861),ao=M(534),zl=M(4537),Ds=M(7879),An=M(9058),yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$i={},dc=dc||{},Zt=yv||self;function Hl(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function fu(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Sh="closure_uid_"+(1e9*Math.random()>>>0),vv=0;function SE(n,e,t){return n.call.apply(n.bind,arguments)}function fT(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Oi(n,e,t){return(Oi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?SE:fT).apply(null,arguments)}function Ah(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Xr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,o,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[o].apply(r,l)}}function pu(){this.s=this.s,this.o=this.o}pu.prototype.s=!1,pu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function KM(n){Object.prototype.hasOwnProperty.call(n,Sh)&&n[Sh]||(n[Sh]=++vv)}(this)},pu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gT=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function _v(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Rg(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Hl(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function hi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}hi.prototype.h=function(){this.defaultPrevented=!0};var mT=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Zt.addEventListener("test",()=>{},e),Zt.removeEventListener("test",()=>{},e)}catch{}return n}();function Gl(n){return/^[\s\xa0]*$/.test(n)}function Wl(){var n=Zt.navigator;return n&&(n=n.userAgent)?n:""}function Cs(n){return-1!=Wl().indexOf(n)}function wv(n){return wv[" "](n),n}wv[" "]=function(){};var pc,n,yT=Cs("Opera"),hc=Cs("Trident")||Cs("MSIE"),vT=Cs("Edge"),Ev=vT||hc,Mh=Cs("Gecko")&&!(-1!=Wl().toLowerCase().indexOf("webkit")&&!Cs("Edge"))&&!(Cs("Trident")||Cs("MSIE"))&&!Cs("Edge"),_T=-1!=Wl().toLowerCase().indexOf("webkit")&&!Cs("Edge");function fc(){var n=Zt.document;return n?n.documentMode:void 0}e:{var Iv="",Ng=(n=Wl(),Mh?/rv:([^\);]+)(\)|;)/.exec(n):vT?/Edge\/([\d\.]+)/.exec(n):hc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):_T?/WebKit\/(\S+)/.exec(n):yT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ng&&(Iv=Ng?Ng[1]:""),hc){var Dv=fc();if(null!=Dv&&Dv>parseFloat(Iv)){pc=String(Dv);break e}}pc=Iv}var xE=Zt.document&&hc&&(fc()||parseInt(pc,10))||void 0;function ql(n,e){if(hi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Mh){e:{try{wv(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:bv[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ql.$.h.call(this)}}Xr(ql,hi);var bv={2:"touch",3:"pen",4:"mouse"};ql.prototype.h=function(){ql.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ma="closure_listenable_"+(1e6*Math.random()|0),RE=0;function YM(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=o,this.key=++RE,this.fa=this.ia=!1}function Zl(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function gu(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Tv(n){const e={};for(const t in n)e[t]=n[t];return e}const Sv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function NE(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Sv.length;u++)t=Sv[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Pg(n){this.src=n,this.g={},this.h=0}function Av(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=gT(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Zl(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Mv(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return o}return-1}Pg.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Mv(n,e,r,o);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new YM(e,this.src,u,!!r,o)).ia=t,n.push(e)),e};var xv="closure_lm_"+(1e6*Math.random()|0),Rv={};function Nv(n,e,t,r,o){if(r&&r.once)return Ov(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Nv(n,e[u],t,r,o);return null}return t=OE(t),n&&n[ma]?n.O(e,t,fu(r)?!!r.capture:!!r,o):gc(n,e,t,!1,r,o)}function gc(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=fu(o)?!!o.capture:!!o,m=kg(n);if(m||(n[xv]=m=new Pg(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function ya(){const e=QM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)mT||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(ET(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ov(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ov(n,e[u],t,r,o);return null}return t=OE(t),n&&n[ma]?n.P(e,t,fu(r)?!!r.capture:!!r,o):gc(n,e,t,!0,r,o)}function wT(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)wT(n,e[u],t,r,o);else r=fu(r)?!!r.capture:!!r,t=OE(t),n&&n[ma]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Mv(u=n.g[e],t,r,o))&&(Zl(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=kg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Mv(e,t,r,o)),(t=-1<n?e[n]:null)&&Pv(t))}function Pv(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[ma])Av(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ET(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=kg(e))?(Av(t,n),0==t.h&&(t.src=null,e[xv]=null)):Zl(n)}}}function ET(n){return n in Rv?Rv[n]:Rv[n]="on"+n}function QM(n,e){if(n.fa)n=!0;else{e=new ql(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Pv(n),n=t.call(r,e)}return n}function kg(n){return(n=n[xv])instanceof Pg?n:null}var Fg="__closure_events_fn_"+(1e9*Math.random()>>>0);function OE(n){return"function"==typeof n?n:(n[Fg]||(n[Fg]=function(e){return n.handleEvent(e)}),n[Fg])}function ei(){pu.call(this),this.i=new Pg(this),this.S=this,this.J=null}function Gr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new hi(e,n);else if(e instanceof hi)e.target=e.target||n;else{var o=e;NE(e=new hi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=xh(l,r,!0,e)&&o}if(o=xh(l=e.g=n,r,!0,e)&&o,o=xh(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=xh(l=e.g=t[u],r,!1,e)&&o}function xh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var m=l.listener,w=l.la||l.src;l.ia&&Av(n.i,l),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Xr(ei,pu),ei.prototype[ma]=!0,ei.prototype.removeEventListener=function(n,e,t,r){wT(this,n,e,t,r)},ei.prototype.N=function(){if(ei.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Zl(t[r]);delete n.g[e],n.h--}}this.J=null},ei.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ei.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Lg=Zt.JSON.stringify;function Jt(){var n=Vg;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var kv=new class PE{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new JM,n=>n.reset());class JM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function IT(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function FE(n){Zt.setTimeout(()=>{throw n},0)}let Rh,Nh=!1,Vg=new class kE{constructor(){this.h=this.g=null}add(e,t){const r=kv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},LE=()=>{const n=Zt.Promise.resolve(void 0);Rh=()=>{n.then(VE)}};var VE=()=>{for(var n;n=Jt();){try{n.h.call(n.g)}catch(t){FE(t)}var e=kv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Nh=!1};function Ug(n,e){ei.call(this),this.h=n||1,this.g=e||Zt,this.j=Oi(this.qb,this),this.l=Date.now()}function Fv(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function UE(n,e,t){if("function"==typeof n)t&&(n=Oi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Oi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Zt.setTimeout(n,e||0)}function Lv(n){n.g=UE(()=>{n.g=null,n.i&&(n.i=!1,Lv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Xr(Ug,ei),(it=Ug.prototype).ga=!1,it.T=null,it.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Gr(this,"tick"),this.ga&&(Fv(this),this.start()))}},it.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.N=function(){Ug.$.N.call(this),Fv(this),delete this.g};class BE extends pu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Lv(this)}N(){super.N(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(n){pu.call(this),this.h=n,this.g={}}Xr(Us,pu);var mc=[];function Vv(n,e,t,r){Array.isArray(t)||(t&&(mc[0]=t.toString()),t=mc);for(var o=0;o<t.length;o++){var u=Nv(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function $E(n){gu(n.g,function(e,t){this.g.hasOwnProperty(t)&&Pv(e)},n),n.g={}}function yc(){this.g=!0}function zo(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Bv(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return Lg(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Us.prototype.N=function(){Us.$.N.call(this),$E(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yc.prototype.Ea=function(){this.g=!1},yc.prototype.info=function(){};var va={},Bg=null;function Oh(){return Bg=Bg||new ei}function $g(n){hi.call(this,va.Ta,n)}function Ph(n){const e=Oh();Gr(e,new $g(e))}function zE(n,e){hi.call(this,va.STAT_EVENT,n),this.stat=e}function ji(n){const e=Oh();Gr(e,new zE(e,n))}function $v(n,e){hi.call(this,va.Ua,n),this.size=e}function kh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){n()},e)}va.Ta="serverreachability",Xr($g,hi),va.STAT_EVENT="statevent",Xr(zE,hi),va.Ua="timingevent",Xr($v,hi);var jg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},HE={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function jv(){}function Hv(){}jv.prototype.h=null;var Wv,Fh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Gv(){hi.call(this,"d")}function zi(){hi.call(this,"c")}function zg(){}function Hg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Us(this),this.P=GE,this.V=new Ug(n=Ev?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Gg}function Gg(){this.i=null,this.g="",this.h=!1}Xr(Gv,hi),Xr(zi,hi),Xr(zg,jv),zg.prototype.g=function(){return new XMLHttpRequest},zg.prototype.i=function(){return{}},Wv=new zg;var GE=45e3,qv={},Wg={};function Zv(n,e,t){n.L=1,n.v=Uh($s(e)),n.s=t,n.S=!0,Kv(n,null)}function Kv(n,e){n.G=Date.now(),Lh(n),n.A=$s(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),$h(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Gg,n.g=Cc(n.l,t?e:null,!n.s),0<n.O&&(n.M=new BE(Oi(n.Pa,n,n.g),n.O)),Vv(n.U,n.g,"readystatechange",n.nb),e=n.I?Tv(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Ph(),function Kl(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var D=m[w].split("=");if(1<D.length){var b=D[0];D=D[1];var N=b.split("_");l=2<=N.length&&"type"==N[1]?l+(b+"=")+D+"&":l+(b+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function WE(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function qE(n,e,t){let o,r=!0;for(;!n.J&&n.C<t.length;){if(o=Yv(n,t),o==Wg){4==e&&(n.o=4,ji(14),r=!1),zo(n.j,n.m,null,"[Incomplete Response]");break}if(o==qv){n.o=4,ji(15),zo(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}zo(n.j,n.m,o,null),Bs(n,o)}WE(n)&&o!=Wg&&o!=qv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ji(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ec(e),e.M=!0,ji(11))):(zo(n.j,n.m,t,"[Invalid Chunked Response]"),vc(n),Vh(n))}function Yv(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Wg:(t=Number(e.substring(t,r)),isNaN(t)?qv:(r+=1)+t>e.length?Wg:(e=e.slice(r,r+t),n.C=r+t,e))}function Lh(n){n.Y=Date.now()+n.P,ZE(n,n.P)}function ZE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=kh(Oi(n.lb,n),e)}function qg(n){n.B&&(Zt.clearTimeout(n.B),n.B=null)}function Vh(n){0==n.l.H||n.J||qh(n.l,n)}function vc(n){qg(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Fv(n.V),$E(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Bs(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||i_(t.i,n)))if(!n.K&&i_(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Wo(t),Gh(t)}js(t),ji(18)}}else t.Fa=o[1],0<t.Fa-t.V&&37500>o[2]&&t.G&&0==t.A&&!t.v&&(t.v=kh(Oi(t.ib,t),6e3));if(1>=tI(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Ea(t,11)}else if((n.K||t.g==n)&&Wo(t),!Gl(e))for(o=t.Ja.g.parse(e),e=0;e<o.length;e++){let D=o[e];if(t.V=D[0],D=D[1],2==t.H)if("c"==D[0]){t.K=D[1],t.pa=D[2];const b=D[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const N=D[4];null!=N&&(t.Ga=N,t.l.info("SVER="+t.Ga));const K=D[5];null!=K&&"number"==typeof K&&0<K&&(t.L=r=1.5*K,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const re=n.g;if(re){const Se=re.g?re.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Se){var u=r.i;u.g||-1==Se.indexOf("spdy")&&-1==Se.indexOf("quic")&&-1==Se.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Kg(u,u.h),u.h=null))}if(r.F){const qe=re.g?re.g.getResponseHeader("X-HTTP-Session-Id"):null;qe&&(r.Da=qe,ar(r.I,r.F,qe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=Dc(r,r.J?r.pa:null,r.Y),l.K){s_(r.i,l);var m=l,w=r.L;w&&m.setTimeout(w),m.B&&(qg(m),Lh(m)),r.g=l}else mI(r);0<t.j.length&&u_(t)}else"stop"!=D[0]&&"close"!=D[0]||Ea(t,7);else 3==t.H&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Ea(t,7):pI(t):"noop"!=D[0]&&t.h&&t.h.Aa(D),t.A=0)}Ph()}catch{}}function Jv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Hl(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function DT(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Hl(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Qv(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Hl(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(it=Hg.prototype).setTimeout=function(n){this.P=n},it.nb=function(n){n=n.target;const e=this.M;e&&3==Go(n)?e.l():this.Pa(n)},it.Pa=function(n){try{if(n==this.g)e:{const b=Go(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||Ev||this.g&&(this.h.h||this.g.ja()||dI(this.g)))){this.J||4!=b||7==e||Ph(),qg(this);var t=this.g.da();this.ca=t;t:if(WE(this)){var r=dI(this.g);n="";var o=r.length,u=4==Go(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){vc(this),Vh(this);var l="";break t}this.h.i=new Zt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function Uv(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gl(m)){var D=m;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,ji(12),vc(this),Vh(this);break e}zo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bs(this,t)}this.S?(qE(this,b,l),Ev&&this.i&&3==b&&(Vv(this.U,this.V,"tick",this.mb),this.V.start())):(zo(this.j,this.m,l,null),Bs(this,l)),4==b&&vc(this),this.i&&!this.J&&(4==b?qh(this.l,this):(this.i=!1,Lh(this)))}else(function RT(n){const e={};n=(n.g&&2<=Go(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Gl(n[r]))continue;var t=IT(n[r]);const o=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[o]||[];e[o]=u,u.push(t)}!function Og(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,ji(12)):(this.o=0,ji(13)),vc(this),Vh(this)}}}catch{}},it.mb=function(){if(this.g){var n=Go(this.g),e=this.g.ja();this.C<e.length&&(qg(this),qE(this,n,e),this.i&&4!=n&&Lh(this))}},it.cancel=function(){this.J=!0,vc(this)},it.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function jE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Ph(),ji(17)),vc(this),this.o=2,Vh(this)):ZE(this,this.Y-n)};var KE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mu(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof mu){this.h=n.h,Yl(this,n.j),this.s=n.s,this.g=n.g,Xv(this,n.m),this.l=n.l;var e=n.i,t=new Bh;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),e_(this,t),this.o=n.o}else n&&(e=String(n).match(KE))?(this.h=!1,Yl(this,e[1]||"",!0),this.s=Ql(e[2]||""),this.g=Ql(e[3]||"",!0),Xv(this,e[4]),this.l=Ql(e[5]||"",!0),e_(this,e[6]||"",!0),this.o=Ql(e[7]||"")):(this.h=!1,this.i=new Bh(null,this.h))}function $s(n){return new mu(n)}function Yl(n,e,t){n.j=t?Ql(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Xv(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function e_(n,e,t){e instanceof Bh?(n.i=e,function Zg(n,e){e&&!n.j&&(wc(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(n_(this,r),$h(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=_c(e,bT)),n.i=new Bh(e,n.h))}function ar(n,e,t){n.i.set(e,t)}function Uh(n){return ar(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ql(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function _c(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,_a),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function _a(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}mu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(_c(e,QE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(_c(e,QE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(_c(t,"/"==t.charAt(0)?t_:CT,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",_c(t,TT)),n.join("")};var QE=/[#\/\?@]/g,CT=/[#\?:]/g,t_=/[#\?]/g,bT=/[#\?@]/g,TT=/#/g;function Bh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function wc(n){n.g||(n.g=new Map,n.h=0,n.i&&function YE(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function n_(n,e){wc(n),e=Ho(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function JE(n,e){return wc(n),e=Ho(n,e),n.g.has(e)}function $h(n,e,t){n_(n,e),0<t.length&&(n.i=null,n.g.set(Ho(n,e),_v(t)),n.h+=t.length)}function Ho(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function XE(n){this.l=n||eI,n=Zt.PerformanceNavigationTiming?0<(n=Zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Zt.g&&Zt.g.Ka&&Zt.g.Ka()&&Zt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=Bh.prototype).add=function(n,e){wc(this),this.i=null,n=Ho(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){wc(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},it.ta=function(){wc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},it.Z=function(n){wc(this);let e=[];if("string"==typeof n)JE(this,n)&&(e=e.concat(this.g.get(Ho(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},it.set=function(n,e){return wc(this),this.i=null,JE(this,n=Ho(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var eI=10;function r_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function tI(n){return n.h?1:n.g?n.g.size:0}function i_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Kg(n,e){n.g?n.g.add(e):n.h=e}function s_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Jl(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return _v(n.i)}XE.prototype.cancel=function(){if(this.i=Jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var ST=class{stringify(n){return Zt.JSON.stringify(n,void 0)}parse(n){return Zt.JSON.parse(n,void 0)}};function nI(){this.g=new ST}function rI(n,e,t){const r=t||"";try{Jv(n,function(o,u){let l=o;fu(o)&&(l=Lg(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Yg(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function wa(n){this.l=n.fc||null,this.j=n.ob||!1}function Qg(n,e){ei.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=iI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xr(wa,jv),wa.prototype.g=function(){return new Qg(this.l,this.j)},wa.prototype.i=function(n){return function(){return n}}({}),Xr(Qg,ei);var iI=0;function sI(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function jh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,zh(n)}function zh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=Qg.prototype).open=function(n,e){if(this.readyState!=iI)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,zh(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Zt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jh(this)),this.readyState=iI},it.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,zh(this)),this.g&&(this.readyState=3,zh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sI(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},it.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?jh(this):zh(this),3==this.readyState&&sI(this)}},it.Za=function(n){this.g&&(this.response=this.responseText=n,jh(this))},it.Ya=function(n){this.g&&(this.response=n,jh(this))},it.ka=function(){this.g&&jh(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Qg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var MT=Zt.JSON.parse;function xr(n){ei.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=oI,this.L=this.M=!1}Xr(xr,ei);var oI="",xT=/^https?$/i,aI=["POST","PUT"];function uI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Hh(n),Jg(n)}function Hh(n){n.F||(n.F=!0,Gr(n,"complete"),Gr(n,"error"))}function cI(n){if(n.h&&typeof dc<"u"&&(!n.C[1]||4!=Go(n)||2!=n.da()))if(n.v&&4==Go(n))UE(n.La,0,n);else if(Gr(n,"readystatechange"),4==Go(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var o=String(n.I).match(KE)[1]||null;!o&&Zt.self&&Zt.self.location&&(o=Zt.self.location.protocol.slice(0,-1)),r=!xT.test(o?o.toLowerCase():"")}t=r}if(t)Gr(n,"complete"),Gr(n,"success");else{n.m=6;try{var u=2<Go(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",Hh(n)}}finally{Jg(n)}}}function Jg(n,e){if(n.g){lI(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Gr(n,"ready");try{t.onreadystatechange=r}catch{}}}function lI(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Zt.clearTimeout(n.A),n.A=null)}function Go(n){return n.g?n.g.readyState:0}function dI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case oI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function hI(n){let e="";return gu(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Xg(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=hI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ar(n,e,t))}function Xl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function fI(n){this.Ga=0,this.j=[],this.l=new yc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Xl("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Xl("baseRetryDelayMs",5e3,n),this.hb=Xl("retryDelaySeedMs",1e4,n),this.eb=Xl("forwardChannelMaxRetries",2,n),this.xa=Xl("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new XE(n&&n.concurrentRequestLimit),this.Ja=new nI,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function pI(n){if(a_(n),3==n.H){var e=n.W++,t=$s(n.I);if(ar(t,"SID",n.K),ar(t,"RID",e),ar(t,"TYPE","terminate"),Wh(n,t),(e=new Hg(n,n.l,e)).L=2,e.v=Uh($s(t)),t=!1,Zt.navigator&&Zt.navigator.sendBeacon)try{t=Zt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Cc(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Lh(e)}Ic(n)}function Gh(n){n.g&&(Ec(n),n.g.cancel(),n.g=null)}function a_(n){Gh(n),n.u&&(Zt.clearTimeout(n.u),n.u=null),Wo(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Zt.clearTimeout(n.m),n.m=null)}function u_(n){if(!r_(n.i)&&!n.m){n.m=!0;var e=n.Na;Rh||LE(),Nh||(Rh(),Nh=!0),Vg.add(e,n),n.C=0}}function gI(n,e){var t;t=e?e.m:n.W++;const r=$s(n.I);ar(r,"SID",n.K),ar(r,"RID",t),ar(r,"AID",n.V),Wh(n,r),n.o&&n.s&&Xg(r,n.o,n.s),t=new Hg(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=tm(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Kg(n.i,t),Zv(t,r,e)}function Wh(n,e){n.na&&gu(n.na,function(t,r){ar(e,r,t)}),n.h&&Jv({},function(t,r){ar(e,r,t)})}function tm(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Oi(n.h.Va,n.h,n):null;e:{var o=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let D=o[w].g;const b=o[w].map;if(D-=u,0>D)u=Math.max(0,o[w].g-100),m=!1;else try{rI(b,l,"req"+D+"_")}catch{r&&r(b)}}if(m){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function mI(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Rh||LE(),Nh||(Rh(),Nh=!0),Vg.add(e,n),n.A=0}}function js(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=kh(Oi(n.Ma,n),bs(n,n.A)),n.A++,0))}function Ec(n){null!=n.B&&(Zt.clearTimeout(n.B),n.B=null)}function bi(n){n.g=new Hg(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=$s(n.wa);ar(e,"RID","rpc"),ar(e,"SID",n.K),ar(e,"AID",n.V),ar(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&ar(e,"TO",n.qa),ar(e,"TYPE","xmlhttp"),Wh(n,e),n.o&&n.s&&Xg(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Uh($s(e)),t.s=null,t.S=!0,Kv(t,n)}function Wo(n){null!=n.v&&(Zt.clearTimeout(n.v),n.v=null)}function qh(n,e){var t=null;if(n.g==e){Wo(n),Ec(n),n.g=null;var r=2}else{if(!i_(n.i,e))return;t=e.F,s_(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var o=n.C;Gr(r=Oh(),new $v(r,t)),u_(n)}else mI(n);else if(3==(o=e.o)||0==o&&0<e.ca||!(1==r&&function em(n,e){return!(tI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=kh(Oi(n.Na,n,e),bs(n,n.C)),n.C++,0)))}(n,e)||2==r&&js(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Ea(n,5);break;case 4:Ea(n,10);break;case 3:Ea(n,6);break;default:Ea(n,2)}}function bs(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Ea(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Oi(n.pb,n);t||(t=new mu("//www.google.com/images/cleardot.gif"),Zt.location&&"http"==Zt.location.protocol||Yl(t,"https"),Uh(t)),function AT(n,e){const t=new yc;if(Zt.Image){const r=new Image;r.onload=Ah(Yg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ah(Yg,t,r,"TestLoadImage: error",!1,e),r.onabort=Ah(Yg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ah(Yg,t,r,"TestLoadImage: timeout",!1,e),Zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ji(2);n.H=0,n.h&&n.h.za(e),Ic(n),a_(n)}function Ic(n){if(n.H=0,n.ma=[],n.h){const e=Jl(n.i);(0!=e.length||0!=n.j.length)&&(Rg(n.ma,e),Rg(n.ma,n.j),n.i.i.length=0,_v(n.j),n.j.length=0),n.h.ya()}}function Dc(n,e,t){var r=t instanceof mu?$s(t):new mu(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Xv(r,r.m);else{var o=Zt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new mu(null);r&&Yl(u,r),e&&(u.g=e),o&&Xv(u,o),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&ar(r,t,e),ar(r,"VER",n.ra),Wh(n,r),r}function Cc(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new xr(t&&n.Ha&&!n.va?new wa({ob:!0}):n.va)).Oa(n.J),e}function bc(){}function Ia(){if(hc&&!(10<=Number(xE)))throw Error("Environmental error: no available transport.")}function fi(n,e){ei.call(this),this.g=new fI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Gl(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gl(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new uo(this)}function Tc(n){Gv.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Sc(){zi.call(this),this.status=1}function uo(n){this.g=n}function zs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function nm(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var o=0;16>o;++o)r[o]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(o=0;16>o;++o)r[o]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((o=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^u&(t^o))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^o^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(o^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(o^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((o=u+((l=o+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(o+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+o&4294967295,n.g[3]=n.g[3]+u&4294967295}function Gn(n,e){this.h=e;for(var t=[],r=!0,o=n.length-1;0<=o;o--){var u=0|n[o];r&&u==e||(t[o]=u,r=!1)}this.g=t}(it=xr.prototype).Oa=function(n){this.M=n},it.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Wv.g(),this.C=function zv(n){return n.h||(n.h=n.i())}(this.u?this.u:Wv),this.g.onreadystatechange=Oi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void uI(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Zt.FormData&&n instanceof Zt.FormData,!(0<=gT(aI,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{lI(this),0<this.B&&((this.L=function o_(n){return hc&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Oi(this.ua,this)):this.A=UE(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){uI(this,u)}},it.ua=function(){typeof dc<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gr(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Gr(this,"complete"),Gr(this,"abort"),Jg(this))},it.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jg(this,!0)),xr.$.N.call(this)},it.La=function(){this.s||(this.G||this.v||this.l?cI(this):this.kb())},it.kb=function(){cI(this)},it.isActive=function(){return!!this.g},it.da=function(){try{return 2<Go(this)?this.g.status:-1}catch{return-1}},it.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},it.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),MT(e)}},it.Ia=function(){return this.m},it.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=fI.prototype).ra=8,it.H=1,it.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const o=new Hg(this,this.l,n);let u=this.s;if(this.U&&(u?(u=Tv(u),NE(u,this.U)):u=this.U),null!==this.o||this.O||(o.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=tm(this,o,e),ar(t=$s(this.I),"RID",n),ar(t,"CVER",22),this.F&&ar(t,"X-HTTP-Session-Id",this.F),Wh(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(hI(u)))+"&"+e:this.o&&Xg(t,this.o,u)),Kg(this.i,o),this.bb&&ar(t,"TYPE","init"),this.P?(ar(t,"$req",e),ar(t,"SID","null"),o.aa=!0,Zv(o,t,null)):Zv(o,t,e),this.H=2}}else 3==this.H&&(n?gI(this,n):0==this.j.length||r_(this.i)||gI(this))},it.Ma=function(){if(this.u=null,bi(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=kh(Oi(this.jb,this),n)}},it.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ji(10),Gh(this),bi(this))},it.ib=function(){null!=this.v&&(this.v=null,Gh(this),js(this),ji(19))},it.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ji(2)):(this.l.info("Failed to ping google.com"),ji(1))},it.isActive=function(){return!!this.h&&this.h.isActive(this)},(it=bc.prototype).Ba=function(){},it.Aa=function(){},it.za=function(){},it.ya=function(){},it.isActive=function(){return!0},it.Va=function(){},Ia.prototype.g=function(n,e){return new fi(n,e)},Xr(fi,ei),fi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ji(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Dc(n,null,n.Y),u_(n)},fi.prototype.close=function(){pI(this.g)},fi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Lg(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&u_(e)},fi.prototype.N=function(){this.g.h=null,delete this.j,pI(this.g),delete this.g,fi.$.N.call(this)},Xr(Tc,Gv),Xr(Sc,zi),Xr(uo,bc),uo.prototype.Ba=function(){Gr(this.g,"a")},uo.prototype.Aa=function(n){Gr(this.g,new Tc(n))},uo.prototype.za=function(n){Gr(this.g,new Sc)},uo.prototype.ya=function(){Gr(this.g,"b")},Xr(zs,function yI(){this.blockSize=-1}),zs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},zs.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,o=this.h,u=0;u<e;){if(0==o)for(;u<=t;)nm(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[o++]=n.charCodeAt(u++),o==this.blockSize){nm(this,r),o=0;break}}else for(;u<e;)if(r[o++]=n[u++],o==this.blockSize){nm(this,r),o=0;break}}this.h=o,this.i+=e},zs.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var vI={};function rm(n){return-128<=n&&128>n?function AE(n,e){var t=vI;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Gn([0|e],0>e?-1:0)}):new Gn([0|n],0>n?-1:0)}function co(n){if(isNaN(n)||!isFinite(n))return yu;if(0>n)return Ti(co(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=im;return new Gn(e,0)}var im=4294967296,yu=rm(0),l_=rm(1),NT=rm(16777216);function vu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Hs(n){return-1==n.h}function Ti(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Gn(t,~n.h).add(l_)}function d_(n,e){return n.add(Ti(e))}function sm(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function om(n,e){this.g=n,this.h=e}function am(n,e){if(vu(e))throw Error("division by zero");if(vu(n))return new om(yu,yu);if(Hs(n))return e=am(Ti(n),e),new om(Ti(e.g),Ti(e.h));if(Hs(e))return e=am(n,Ti(e)),new om(Ti(e.g),e.h);if(30<n.g.length){if(Hs(n)||Hs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=l_,r=e;0>=r.X(n);)t=_I(t),r=_I(r);var o=ed(t,1),u=ed(r,1);for(r=ed(r,2),t=ed(t,2);!vu(r);){var l=u.add(r);0>=l.X(n)&&(o=o.add(t),u=l),r=ed(r,1),t=ed(t,1)}return e=d_(n,o.R(e)),new om(o,e)}for(o=yu;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=co(t)).R(e);Hs(l)||0<l.X(n);)l=(u=co(t-=r)).R(e);vu(u)&&(u=l_),o=o.add(u),n=d_(n,l)}return new om(o,n)}function _I(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Gn(t,n.h)}function ed(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,o=[],u=0;u<r;u++)o[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new Gn(o,n.h)}(it=Gn.prototype).ea=function(){if(Hs(this))return-Ti(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:im+r)*e,e*=im}return n},it.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(vu(this))return"0";if(Hs(this))return"-"+Ti(this).toString(n);for(var e=co(Math.pow(n,6)),t=this,r="";;){var o=am(t,e).g,u=((0<(t=d_(t,o.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(vu(t=o))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},it.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},it.X=function(n){return Hs(n=d_(this,n))?-1:vu(n)?0:1},it.abs=function(){return Hs(this)?Ti(this):this},it.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,o=0;o<=e;o++){var u=r+(65535&this.D(o))+(65535&n.D(o)),l=(u>>>16)+(this.D(o)>>>16)+(n.D(o)>>>16);r=l>>>16,t[o]=(l&=65535)<<16|(u&=65535)}return new Gn(t,-2147483648&t[t.length-1]?-1:0)},it.R=function(n){if(vu(this)||vu(n))return yu;if(Hs(this))return Hs(n)?Ti(this).R(Ti(n)):Ti(Ti(this).R(n));if(Hs(n))return Ti(this.R(Ti(n)));if(0>this.X(NT)&&0>n.X(NT))return co(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<n.g.length;o++){var u=this.D(r)>>>16,l=65535&this.D(r),m=n.D(o)>>>16,w=65535&n.D(o);t[2*r+2*o]+=l*w,sm(t,2*r+2*o),t[2*r+2*o+1]+=u*w,sm(t,2*r+2*o+1),t[2*r+2*o+1]+=l*m,sm(t,2*r+2*o+1),t[2*r+2*o+2]+=u*m,sm(t,2*r+2*o+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Gn(t,0)},it.gb=function(n){return am(this,n).h},it.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Gn(t,this.h&n.h)},it.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Gn(t,this.h|n.h)},it.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Gn(t,this.h^n.h)},Ia.prototype.createWebChannel=Ia.prototype.g,fi.prototype.send=fi.prototype.u,fi.prototype.open=fi.prototype.m,fi.prototype.close=fi.prototype.close,jg.NO_ERROR=0,jg.TIMEOUT=8,jg.HTTP_ERROR=6,HE.COMPLETE="complete",Hv.EventType=Fh,Fh.OPEN="a",Fh.CLOSE="b",Fh.ERROR="c",Fh.MESSAGE="d",ei.prototype.listen=ei.prototype.O,xr.prototype.listenOnce=xr.prototype.P,xr.prototype.getLastError=xr.prototype.Sa,xr.prototype.getLastErrorCode=xr.prototype.Ia,xr.prototype.getStatus=xr.prototype.da,xr.prototype.getResponseJson=xr.prototype.Wa,xr.prototype.getResponseText=xr.prototype.ja,xr.prototype.send=xr.prototype.ha,xr.prototype.setWithCredentials=xr.prototype.Oa,zs.prototype.digest=zs.prototype.l,zs.prototype.reset=zs.prototype.reset,zs.prototype.update=zs.prototype.j,Gn.prototype.add=Gn.prototype.add,Gn.prototype.multiply=Gn.prototype.R,Gn.prototype.modulo=Gn.prototype.gb,Gn.prototype.compare=Gn.prototype.X,Gn.prototype.toNumber=Gn.prototype.ea,Gn.prototype.toString=Gn.prototype.toString,Gn.prototype.getBits=Gn.prototype.D,Gn.fromNumber=co,Gn.fromString=function c_(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ti(c_(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=co(Math.pow(e,8)),r=yu,o=0;o<n.length;o+=8){var u=Math.min(8,n.length-o),l=parseInt(n.substring(o,o+u),e);8>u?(u=co(Math.pow(e,u)),r=r.R(u).add(co(l))):r=(r=r.R(t)).add(co(l))}return r};var h_=$i.createWebChannelTransport=function(){return new Ia},Zh=$i.getStatEventTarget=function(){return Oh()},Kh=$i.ErrorCode=jg,um=$i.EventType=HE,wI=$i.Event=va,td=$i.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},EI=$i.FetchXmlHttpFactory=wa,cm=$i.WebChannel=Hv,Yh=$i.XhrIo=xr,OT=$i.Md5=zs,nd=$i.Integer=Gn;const II="@firebase/firestore";class pi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pi.UNAUTHENTICATED=new pi(null),pi.GOOGLE_CREDENTIALS=new pi("google-credentials-uid"),pi.FIRST_PARTY=new pi("first-party-uid"),pi.MOCK_USER=new pi("mock-user");let _u="9.23.0";const lo=new Ds.Yd("@firebase/firestore");function rd(){return lo.logLevel}function He(n,...e){if(lo.logLevel<=Ds.in.DEBUG){const t=e.map(f_);lo.debug(`Firestore (${_u}): ${n}`,...t)}}function Vr(n,...e){if(lo.logLevel<=Ds.in.ERROR){const t=e.map(f_);lo.error(`Firestore (${_u}): ${n}`,...t)}}function hs(n,...e){if(lo.logLevel<=Ds.in.WARN){const t=e.map(f_);lo.warn(`Firestore (${_u}): ${n}`,...t)}}function f_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function gt(n="Unexpected state"){const e=`FIRESTORE (${_u}) INTERNAL ASSERTION FAILED: `+n;throw Vr(e),new Error(e)}function Ct(n,e){n||gt()}function st(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends An.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class DI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pi.UNAUTHENTICATED))}shutdown(){}}class FT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class p_{constructor(e){this.t=e,this.currentUser=pi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=D=>this.i!==o?(o=this.i,t(D)):Promise.resolve();let l=new ti;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ti,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const D=l;e.enqueueRetryable((0,Ae.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},w=D=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(D=>w(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?w(D):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ti)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new DI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new pi(e)}}class g_{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=pi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class LT{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new g_(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(pi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lm{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,He("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?o(u):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.T=t.token,new Qh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function bI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class TI{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const o=bI(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(o[u]%62))}return r}}function Kt(n,e){return n<e?-1:n>e?1:0}function id(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function dm(n){return n+"\0"}class ur{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ur.fromMillis(Date.now())}static fromDate(e){return ur.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ur(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new ur(0,0))}static max(){return new bt(new ur(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class sd{constructor(e,t,r){void 0===t?t=0:t>e.length&&gt(),void 0===r?r=e.length-t:r>e.length-t&&gt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===sd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class xn extends sd{construct(e,t,r){return new xn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new xn(t)}static emptyPath(){return new xn([])}}const VT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cr extends sd{construct(e,t,r){return new Cr(e,t,r)}static isValidIdentifier(e){return VT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Cr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Fe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Fe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Fe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(l=!l,o++):"."!==m||l?(r+=m,o++):(u(),o++)}if(u(),l)throw new Fe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cr(t)}static emptyPath(){return new Cr([])}}class et{constructor(e){this.path=e}static fromPath(e){return new et(xn.fromString(e))}static fromName(e){return new et(xn.fromString(e).popFirst(5))}static empty(){return new et(xn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return xn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new xn(e.slice()))}}class Jh{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Xh(n){return n.fields.find(e=>2===e.kind)}function wu(n){return n.fields.filter(e=>2!==e.kind)}Jh.UNKNOWN_ID=-1;class ef{constructor(e,t){this.fieldPath=e,this.kind=t}}class od{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new od(0,Ts.min())}}function m_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=bt.fromTimestamp(1e9===r?new ur(t+1,0):new ur(t,r));return new Ts(o,et.empty(),e)}function AI(n){return new Ts(n.readTime,n.key,-1)}class Ts{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ts(bt.min(),et.empty(),-1)}static max(){return new Ts(bt.max(),et.empty(),-1)}}function y_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=et.comparator(n.documentKey,e.documentKey),0!==t?t:Kt(n.largestBatchId,e.largestBatchId))}const hm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Da(n){return pm.apply(this,arguments)}function pm(){return pm=(0,Ae.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==hm)throw n;He("LocalStore","Unexpectedly lost primary lease")}),pm.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let o=0,u=0,l=!1;e.forEach(m=>{++o,m.next(()=>{++u,l&&u===o&&t()},w=>r(w))}),l=!0,u===o&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(o=>o?ce.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,o)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const D=w;t(e[D]).next(b=>{l[D]=b,++m,m===u&&r(l)},b=>o(b))}})}static doWhile(e,t){return new ce((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class tf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ti,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new ad(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const o=v_(r.target.error);this.v.reject(new ad(e,o))}}static open(e,t,r,o){try{return new tf(t,e.transaction(o,r))}catch(u){throw new ad(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(He("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gm(t)}}class Gs{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Gs.S((0,An.z$)())&&Vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return He("SimpleDb","Removing database:",e),fs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,An.hl)())return!1;if(Gs.C())return!0;const e=(0,An.z$)(),t=Gs.S(e),r=0<t&&t<10,o=Gs.N(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ae.Z)(function*(){return t.db||(He("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new ad(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;o("VersionError"===m.name?new Fe(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Fe(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new ad(e,m))},u.onupgradeneeded=l=>{He("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{He("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ae.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const w=tf.open(u.db,e,l?"readonly":"readwrite",r),D=o(w).next(b=>(w.P(),b)).catch(b=>(w.abort(b),ce.reject(b))).toPromise();return D.catch(()=>{}),yield w.R,D}catch(w){const D=w,b="FirebaseError"!==D.name&&m<3;if(He("SimpleDb","Transaction failed with error:",D.message,"Retrying:",b),u.close(),!b)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class MI{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return fs(this.L.delete())}}class ad extends Fe{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ca(n){return"IndexedDbTransactionError"===n.name}class gm{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(He("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(He("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fs(r)}add(e){return He("SimpleDb","ADD",this.store.name,e,e),fs(this.store.add(e))}get(e){return fs(this.store.get(e)).next(t=>(void 0===t&&(t=null),He("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return He("SimpleDb","DELETE",this.store.name,e),fs(this.store.delete(e))}count(){return He("SimpleDb","COUNT",this.store.name),fs(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.W(o,(l,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ce((u,l)=>{o.onerror=m=>{l(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}J(e,t){He("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const o=this.cursor(r);return this.W(o,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.W(o,t)}Z(e){const t=this.cursor({});return new ce((r,o)=>{t.onerror=u=>{const l=v_(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new ce((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void o();const w=new MI(m),D=t(m.primaryKey,m.value,w);if(D instanceof ce){const b=D.catch(N=>(w.done(),ce.reject(N)));r.push(b)}w.isDone?o():null===w.K?m.continue():m.continue(w.K)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fs(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=v_(r.target.error);t(o)}})}let xI=!1;function v_(n){const e=Gs.S((0,An.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return xI||(xI=!0,setTimeout(()=>{throw r},0)),r}}return n}class __{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;He("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ae.Z)(function*(){t.task=null;try{He("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Ca(r)?He("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Da(r)}yield t.et(6e4)}))}}class Ac{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ae.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let o=t,u=!0;return ce.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return He("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,o).next(m=>{o-=m,r.add(l)});u=!1})).next(()=>t-o)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(o,u)).next(m=>(He("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=AI(u);y_(l,r)>0&&(r=l)}),new Ts(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Hi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>r.writeSequenceNumber(o))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function nf(n){return null==n}function Mc(n){return 0===n&&1/n==-1/0}function BT(n){return"number"==typeof n&&Number.isInteger(n)&&!Mc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Gi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=RI(e)),e=$T(n.get(t),e);return RI(e)}function $T(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function RI(n){return n+"\x01\x01"}function ho(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),xn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&gt(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:gt()}u=l+2}return new xn(r)}const NI=["userId","batchId"];function Rr(n,e){return[n,Gi(e)]}function w_(n,e,t){return[n,Gi(e),t]}const jT={},zT=["prefixPath","collectionGroup","readTime","documentId"],OI=["prefixPath","collectionGroup","documentId"],HT=["collectionGroup","readTime","prefixPath","documentId"],PI=["canonicalId","targetId"],kI=["targetId","path"],ud=["path","targetId"],GT=["collectionId","parent"],WT=["indexId","uid"],FI=["uid","sequenceNumber"],qT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],LI=["indexId","uid","orderedDocumentKey"],tx=["userId","collectionPath","documentId"],VI=["userId","collectionPath","largestBatchId"],E_=["userId","collectionGroup","largestBatchId"],fo=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ZT=[...fo,"documentOverlays"],UI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],po=UI,go=[...po,"indexConfiguration","indexState","indexEntries"];class Ss extends fm{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ni(n,e){const t=st(n);return Gs.M(t.ht,e)}function I_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Eu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function BI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class cr{constructor(e,t){this.comparator=e,this.root=t||ri.EMPTY}insert(e,t){return new cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ri.BLACK,null,null))}remove(e){return new cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ri.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mm(this.root,e,this.comparator,!1)}getReverseIterator(){return new mm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mm(this.root,e,this.comparator,!0)}}class mm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ri{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??ri.RED,this.left=o??ri.EMPTY,this.right=u??ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ri(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ri.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ri.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}ri.EMPTY=null,ri.RED=!0,ri.BLACK=!1,ri.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ri(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qn{constructor(e){this.comparator=e,this.data=new cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $I(this.data.getIterator())}getIteratorFrom(e){return new $I(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Qn(this.comparator);return t.data=e,t}}class $I{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xc(n){return n.hasNext()?n.getNext():void 0}class ps{constructor(e){this.fields=e,e.sort(Cr.comparator)}static empty(){return new ps([])}unionWith(e){let t=new Qn(Cr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ps(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return id(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class jI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new jI("Invalid base64 string: "+o):o}}(e);return new Wr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wr.EMPTY_BYTE_STRING=new Wr("");const ym=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Iu(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=ym.exec(n);if(Ct(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:br(n.seconds),nanos:br(n.nanos)}}function br(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function qo(n){return"string"==typeof n?Wr.fromBase64String(n):Wr.fromUint8Array(n)}function rf(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function vm(n){const e=n.mapValue.fields.__previous_value__;return rf(e)?vm(e):e}function sf(n){const e=Iu(n.mapValue.fields.__local_write_time__.timestampValue);return new ur(e.seconds,e.nanos)}class D_{constructor(e,t,r,o,u,l,m,w,D){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.longPollingOptions=w,this.useFetchStreams=D}}class Zo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Zo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Zo&&e.projectId===this.projectId&&e.database===this.database}}const ba={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},af={nullValue:"NULL_VALUE"};function Ta(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?rf(n)?4:WI(n)?9007199254740991:10:gt()}function mo(n,e){if(n===e)return!0;const t=Ta(n);if(t!==Ta(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sf(n).isEqual(sf(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Iu(r.timestampValue),l=Iu(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,qo(n.bytesValue).isEqual(qo(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return br(r.geoPointValue.latitude)===br(o.geoPointValue.latitude)&&br(r.geoPointValue.longitude)===br(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return br(r.integerValue)===br(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=br(r.doubleValue),l=br(o.doubleValue);return u===l?Mc(u)===Mc(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return id(n.arrayValue.values||[],e.arrayValue.values||[],mo);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(I_(u)!==I_(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!mo(u[m],l[m])))return!1;return!0}(n,e);default:return gt()}var o}function cd(n,e){return void 0!==(n.values||[]).find(t=>mo(t,e))}function Sa(n,e){if(n===e)return 0;const t=Ta(n),r=Ta(e);if(t!==r)return Kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=br(o.integerValue||o.doubleValue),m=br(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return C_(n.timestampValue,e.timestampValue);case 4:return C_(sf(n),sf(e));case 5:return Kt(n.stringValue,e.stringValue);case 6:return function(o,u){const l=qo(o),m=qo(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const D=Kt(l[w],m[w]);if(0!==D)return D}return Kt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Kt(br(o.latitude),br(u.latitude));return 0!==l?l:Kt(br(o.longitude),br(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const D=Sa(l[w],m[w]);if(D)return D}return Kt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===ba.mapValue&&u===ba.mapValue)return 0;if(o===ba.mapValue)return 1;if(u===ba.mapValue)return-1;const l=o.fields||{},m=Object.keys(l),w=u.fields||{},D=Object.keys(w);m.sort(),D.sort();for(let b=0;b<m.length&&b<D.length;++b){const N=Kt(m[b],D[b]);if(0!==N)return N;const K=Sa(l[m[b]],w[D[b]]);if(0!==K)return K}return Kt(m.length,D.length)}(n.mapValue,e.mapValue);default:throw gt()}}function C_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Kt(n,e);const t=Iu(n),r=Iu(e),o=Kt(t.seconds,r.seconds);return 0!==o?o:Kt(t.nanos,r.nanos)}function Rc(n){return b_(n)}function b_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Iu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?qo(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=b_(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of o)l?l=!1:u+=",",u+=`${m}:${b_(r.fields[m])}`;return u+"}"}(n.mapValue):gt();var e}function Nc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function T_(n){return!!n&&"integerValue"in n}function uf(n){return!!n&&"arrayValue"in n}function HI(n){return!!n&&"nullValue"in n}function GI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wm(n){return!!n&&"mapValue"in n}function cf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Eu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function WI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function KT(n){return"nullValue"in n?af:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Nc(Zo.empty(),et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:gt()}function YT(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Nc(Zo.empty(),et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ba:gt()}function qI(n,e){const t=Sa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ZI(n,e){const t=Sa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Si{constructor(e){this.value=e}static empty(){return new Si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cf(t)}setAll(e){let t=Cr.emptyPath(),r={},o=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}l?r[m.lastSegment()]=cf(l):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());wm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];wm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Eu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Si(cf(this.value))}}function KI(n){const e=[];return Eu(n.fields,(t,r)=>{const o=new Cr([t]);if(wm(r)){const u=KI(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new ps(e)}class gr{constructor(e,t,r,o,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new gr(e,0,bt.min(),bt.min(),bt.min(),Si.empty(),0)}static newFoundDocument(e,t,r,o){return new gr(e,1,t,bt.min(),r,o,0)}static newNoDocument(e,t){return new gr(e,2,t,bt.min(),bt.min(),Si.empty(),0)}static newUnknownDocument(e,t){return new gr(e,3,t,bt.min(),bt.min(),Si.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(bt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Du{constructor(e,t){this.position=e,this.inclusive=t}}function S_(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?et.comparator(et.fromName(l.referenceValue),t.key):Sa(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function A_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mo(n.position[t],e.position[t]))return!1;return!0}class Oc{constructor(e,t="asc"){this.field=e,this.dir=t}}function YI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class M_{}class In extends M_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new nx(e,t,r):"array-contains"===t?new XI(e,r):"in"===t?new QT(e,r):"not-in"===t?new ld(e,r):"array-contains-any"===t?new JT(e,r):new In(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new R_(e,r):new rx(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Sa(t,this.value)):null!==t&&Ta(this.value)===Ta(t)&&this.matchesComparison(Sa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Wn extends M_{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Wn(e,t)}matches(e){return Pc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Pc(n){return"and"===n.op}function Em(n){return"or"===n.op}function Im(n){return x_(n)&&Pc(n)}function x_(n){for(const e of n.filters)if(e instanceof Wn)return!1;return!0}function Aa(n){if(n instanceof In)return n.field.canonicalString()+n.op.toString()+Rc(n.value);if(Im(n))return n.filters.map(e=>Aa(e)).join(",");{const e=n.filters.map(t=>Aa(t)).join(",");return`${n.op}(${e})`}}function QI(n,e){return n instanceof In?(t=n,(r=e)instanceof In&&t.op===r.op&&t.field.isEqual(r.field)&&mo(t.value,r.value)):n instanceof Wn?function(t,r){return r instanceof Wn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,l)=>o&&QI(u,r.filters[l]),!0)}(n,e):void gt();var t,r}function JI(n,e){const t=n.filters.concat(e);return Wn.create(t,n.op)}function kc(n){return n instanceof In?`${(e=n).field.canonicalString()} ${e.op} ${Rc(e.value)}`:n instanceof Wn?function(e){return e.op.toString()+" {"+e.getFilters().map(kc).join(" ,")+"}"}(n):"Filter";var e}class nx extends In{constructor(e,t,r){super(e,t,r),this.key=et.fromName(r.referenceValue)}matches(e){const t=et.comparator(e.key,this.key);return this.matchesComparison(t)}}class R_ extends In{constructor(e,t){super(e,"in",t),this.keys=N_(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class rx extends In{constructor(e,t){super(e,"not-in",t),this.keys=N_(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function N_(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>et.fromName(r.referenceValue))}class XI extends In{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uf(t)&&cd(t.arrayValue,this.value)}}class QT extends In{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&cd(this.value.arrayValue,t)}}class ld extends In{constructor(e,t){super(e,"not-in",t)}matches(e){if(cd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!cd(this.value.arrayValue,t)}}class JT extends In{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>cd(this.value.arrayValue,r))}}class XT{constructor(e,t=null,r=[],o=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=m,this.dt=null}}function O_(n,e=null,t=[],r=[],o=null,u=null,l=null){return new XT(n,e,t,r,o,u,l)}function Ws(n){const e=st(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Aa(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Rc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Rc(r)).join(",")),e.dt=t}return e.dt}function lf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!QI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!A_(n.startAt,e.startAt)&&A_(n.endAt,e.endAt)}function Fc(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Lc(n,e){return n.filters.filter(t=>t instanceof In&&t.field.isEqual(e))}function Wi(n,e,t){let r=af,o=!0;for(const u of Lc(n,e)){let l=af,m=!0;switch(u.op){case"<":case"<=":l=KT(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=af}qI({value:r,inclusive:o},{value:l,inclusive:m})<0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];qI({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function eS(n,e,t){let r=ba,o=!0;for(const u of Lc(n,e)){let l=ba,m=!0;switch(u.op){case">=":case">":l=YT(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=ba}ZI({value:r,inclusive:o},{value:l,inclusive:m})>0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];ZI({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class Ko{constructor(e,t=null,r=[],o=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.wt=null,this._t=null}}function P_(n,e,t,r,o,u,l,m){return new Ko(n,e,t,r,o,u,l,m)}function dd(n){return new Ko(n)}function k_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Dm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function df(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Cm(n){return null!==n.collectionGroup}function Vc(n){const e=st(n);if(null===e.wt){e.wt=[];const t=df(e),r=Dm(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Oc(t)),e.wt.push(new Oc(Cr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Oc(Cr.keyField(),u))}}}return e.wt}function qi(n){const e=st(n);if(!e._t)if("F"===e.limitType)e._t=O_(e.path,e.collectionGroup,Vc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Vc(e))t.push(new Oc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Du(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Du(e.startAt.position,e.startAt.inclusive):null;e._t=O_(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function F_(n,e){e.getFirstInequalityField(),df(n);const t=n.filters.concat([e]);return new Ko(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Cu(n,e,t){return new Ko(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hf(n,e){return lf(qi(n),qi(e))&&n.limitType===e.limitType}function eD(n){return`${Ws(qi(n))}|lt:${n.limitType}`}function L_(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>kc(r)).join(", ")}]`),nf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Rc(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Rc(r)).join(",")),`Target(${t})`}(qi(n))}; limitType=${n.limitType})`}function bu(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):et.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of Vc(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const m=S_(o,u,l);return o.inclusive?m<=0:m<0}(t.startAt,Vc(t),r)||t.endAt&&!function(o,u,l){const m=S_(o,u,l);return o.inclusive?m>=0:m>0}(t.endAt,Vc(t),r)));var t,r}function V_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function U_(n){return(e,t)=>{let r=!1;for(const o of Vc(n)){const u=tD(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function tD(n,e,t){const r=n.field.isKeyField()?et.comparator(e.key,t.key):function(o,u,l){const m=u.data.field(o),w=l.data.field(o);return null!==m&&null!==w?Sa(m,w):gt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return gt()}}class Ma{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Eu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return BI(this.inner)}size(){return this.innerSize}}const ff=new cr(et.comparator);function gi(){return ff}const nD=new cr(et.comparator);function pf(...n){let e=nD;for(const t of n)e=e.insert(t.key,t);return e}function rD(n){let e=nD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function yo(){return hd()}function B_(){return hd()}function hd(){return new Ma(n=>n.toString(),(n,e)=>n.isEqual(e))}const tS=new cr(et.comparator),iD=new Qn(et.comparator);function rn(...n){let e=iD;for(const t of n)e=e.add(t);return e}const nS=new Qn(Kt);function sD(){return nS}function rS(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mc(e)?"-0":e}}function iS(n){return{integerValue:""+n}}function sS(n,e){return BT(e)?iS(e):rS(n,e)}class gf{constructor(){this._=void 0}}function bm(n,e,t){return n instanceof Uc?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&rf(o)&&(o=vm(o)),o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof vo?aD(n,e):n instanceof Bc?uD(n,e):function(r,o){const u=oD(r,o),l=aS(u)+aS(r.gt);return T_(u)&&T_(r.gt)?iS(l):rS(r.serializer,l)}(n,e)}function oS(n,e,t){return n instanceof vo?aD(n,e):n instanceof Bc?uD(n,e):t}function oD(n,e){return n instanceof fd?T_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Uc extends gf{}class vo extends gf{constructor(e){super(),this.elements=e}}function aD(n,e){const t=cD(e);for(const r of n.elements)t.some(o=>mo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Bc extends gf{constructor(e){super(),this.elements=e}}function uD(n,e){let t=cD(e);for(const r of n.elements)t=t.filter(o=>!mo(o,r));return{arrayValue:{values:t}}}class fd extends gf{constructor(e,t){super(),this.serializer=e,this.gt=t}}function aS(n){return br(n.integerValue||n.doubleValue)}function cD(n){return uf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class pd{constructor(e,t){this.field=e,this.transform=t}}class cS{constructor(e,t){this.version=e,this.transformResults=t}}class Xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class mf{}function lD(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new gd(n.key,Xn.none()):new Tu(n.key,n.data,Xn.none());{const t=n.data,r=Si.empty();let o=new Qn(Cr.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new xa(n.key,r,new ps(o.toArray()),Xn.none())}}function dD(n,e,t){n instanceof Tu?function(r,o,u){const l=r.value.clone(),m=j_(r.fieldTransforms,o,u.transformResults);l.setAll(m),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof xa?function(r,o,u){if(!Tm(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=j_(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll($_(r)),m.setAll(l),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function yf(n,e,t,r){return n instanceof Tu?function(o,u,l,m){if(!Tm(o.precondition,u))return l;const w=o.value.clone(),D=pD(o.fieldTransforms,m,u);return w.setAll(D),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof xa?function(o,u,l,m){if(!Tm(o.precondition,u))return l;const w=pD(o.fieldTransforms,m,u),D=u.data;return D.setAll($_(o)),D.setAll(w),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,Tm(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function hD(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=oD(r.transform,o||null);null!=u&&(null===t&&(t=Si.empty()),t.set(r.field,u))}return t||null}function fD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&id(t,r,(o,u)=>function uS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof vo&&r instanceof vo||t instanceof Bc&&r instanceof Bc?id(t.elements,r.elements,mo):t instanceof fd&&r instanceof fd?mo(t.gt,r.gt):t instanceof Uc&&r instanceof Uc);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Tu extends mf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class xa extends mf{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function $_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function j_(n,e,t){const r=new Map;Ct(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,m=e.data.field(u.field);r.set(u.field,oS(l,m,t[o]))}return r}function pD(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,bm(u,l,e))}return r}class gd extends mf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z_ extends mf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vf{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&dD(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=yf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=yf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=B_();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(o.key)?null:m;const w=lD(l,m);null!==w&&r.set(o.key,w),l.isValidDocument()||l.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rn())}isEqual(e){return this.batchId===e.batchId&&id(this.mutations,e.mutations,(t,r)=>fD(t,r))&&id(this.baseMutations,e.baseMutations,(t,r)=>fD(t,r))}}class H_{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Ct(e.mutations.length===r.length);let o=tS;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new H_(e,t,r,o)}}class Sm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class dS{constructor(e,t){this.count=e,this.unchangedNames=t}}var qr,Rn;function gD(n){switch(n){default:return gt();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function mD(n){if(void 0===n)return Vr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case qr.OK:return fe.OK;case qr.CANCELLED:return fe.CANCELLED;case qr.UNKNOWN:return fe.UNKNOWN;case qr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case qr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case qr.INTERNAL:return fe.INTERNAL;case qr.UNAVAILABLE:return fe.UNAVAILABLE;case qr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case qr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case qr.NOT_FOUND:return fe.NOT_FOUND;case qr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case qr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case qr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case qr.ABORTED:return fe.ABORTED;case qr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case qr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case qr.DATA_LOSS:return fe.DATA_LOSS;default:return gt()}}(Rn=qr||(qr={}))[Rn.OK=0]="OK",Rn[Rn.CANCELLED=1]="CANCELLED",Rn[Rn.UNKNOWN=2]="UNKNOWN",Rn[Rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rn[Rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rn[Rn.NOT_FOUND=5]="NOT_FOUND",Rn[Rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rn[Rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rn[Rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rn[Rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rn[Rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rn[Rn.ABORTED=10]="ABORTED",Rn[Rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rn[Rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rn[Rn.INTERNAL=13]="INTERNAL",Rn[Rn.UNAVAILABLE=14]="UNAVAILABLE",Rn[Rn.DATA_LOSS=15]="DATA_LOSS";class G_{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Am}static getOrCreateInstance(){return null===Am&&(Am=new G_),Am}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Am=null;function W_(){return new TextEncoder}const yD=new nd([4294967295,4294967295],0);function vD(n){const e=W_().encode(n),t=new OT;return t.update(e),new Uint8Array(t.digest())}function _D(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new nd([t,r],0),new nd([o,u],0)]}class Mm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _f(`Invalid padding: ${t}`);if(r<0)throw new _f(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new _f(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new _f(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=nd.fromNumber(this.It)}Et(e,t,r){let o=e.add(t.multiply(nd.fromNumber(r)));return 1===o.compare(yD)&&(o=new nd([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=vD(e),[r,o]=_D(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new Mm(u,o,t);return r.forEach(m=>l.insert(m)),l}insert(e){if(0===this.It)return;const t=vD(e),[r,o]=_D(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class _f extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class wf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Ef.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new wf(bt.min(),o,new cr(Kt),gi(),rn())}}class Ef{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ef(r,t,rn(),rn(),rn())}}class md{constructor(e,t,r,o){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=o}}class xm{constructor(e,t){this.targetId=e,this.Vt=t}}class q_{constructor(e,t,r=Wr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Rm{constructor(){this.St=0,this.Dt=Nm(),this.Ct=Wr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=rn(),t=rn(),r=rn();return this.Dt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:gt()}}),new Ef(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=Nm()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class hS{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=gi(),this.zt=wD(),this.Wt=new cr(Kt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:gt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,o)=>{this.te(o)&&t(o)})}ne(e){var t;const r=e.targetId,o=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(Fc(l))if(0===o){const m=new et(l.path);this.Yt(r,m,gr.newNoDocument(m,bt.min()))}else Ct(1===o);else{const m=this.ie(r);if(m!==o){const w=this.re(e,m);0!==w&&(this.ee(r),this.Wt=this.Wt.insert(r,2===w?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=G_.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(D,b,N){var K,re,Se,qe,Ze,At;const $t={localCacheCount:b,existenceFilterCount:N.count},Ot=N.unchangedNames;return Ot&&($t.bloomFilter={applied:0===D,hashCount:null!==(K=Ot?.hashCount)&&void 0!==K?K:0,bitmapLength:null!==(qe=null===(Se=null===(re=Ot?.bits)||void 0===re?void 0:re.bitmap)||void 0===Se?void 0:Se.length)&&void 0!==qe?qe:0,padding:null!==(At=null===(Ze=Ot?.bits)||void 0===Ze?void 0:Ze.padding)&&void 0!==At?At:0}),$t}(w,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:o}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:m=0}=r;let w,D;try{w=qo(u).toUint8Array()}catch(b){if(b instanceof jI)return hs("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{D=new Mm(w,l,m)}catch(b){return hs(b instanceof _f?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===D.It?1:o!==t-this.oe(e.targetId,D)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let o=0;return r.forEach(u=>{const l=this.Gt.ue(),m=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),o++)}),o}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const m=this.se(l);if(m){if(u.current&&Fc(m.target)){const w=new et(m.target.path);null!==this.jt.get(w)||this.ae(l,w)||this.Yt(l,w,gr.newNoDocument(w,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=rn();this.zt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const D=this.se(w);return!D||"TargetPurposeLimboResolution"===D.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const o=new wf(e,t,this.Wt,this.jt,r);return this.jt=gi(),this.zt=wD(),this.Wt=new cr(Kt),o}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const o=this.Zt(e);this.ae(e,t)?o.Bt(t,1):o.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Rm,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Qn(Kt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||He("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Rm),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function wD(){return new cr(et.comparator)}function Nm(){return new cr(et.comparator)}const fS={asc:"ASCENDING",desc:"DESCENDING"},ED={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yd={and:"AND",or:"OR"};class ID{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Z_(n,e){return n.useProto3Json||nf(e)?e:{value:e}}function If(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Om(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function K_(n,e){return If(n,e.toTimestamp())}function Ur(n){return Ct(!!n),bt.fromTimestamp(function(e){const t=Iu(e);return new ur(t.seconds,t.nanos)}(n))}function Pm(n,e){return(t=n,new xn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Y_(n){const e=xn.fromString(n);return Ct(SD(e)),e}function Df(n,e){return Pm(n.databaseId,e.path)}function _o(n,e){const t=Y_(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new et(J_(t))}function Cf(n,e){return Pm(n.databaseId,e)}function Q_(n){const e=Y_(n);return 4===e.length?xn.emptyPath():J_(e)}function vd(n){return new xn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function J_(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function X_(n,e,t){return{name:Df(n,e),fields:t.value.mapValue.fields}}function DD(n,e,t){const r=_o(n,e.name),o=Ur(e.updateTime),u=e.createTime?Ur(e.createTime):bt.min(),l=new Si({mapValue:{fields:e.fields}}),m=gr.newFoundDocument(r,o,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function bf(n,e){let t;if(e instanceof Tu)t={update:X_(n,e.key,e.value)};else if(e instanceof gd)t={delete:Df(n,e.key)};else if(e instanceof xa)t={update:X_(n,e.key,e.data),updateMask:_S(e.fieldMask)};else{if(!(e instanceof z_))return gt();t={verify:Df(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof Uc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof vo)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Bc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof fd)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw gt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:K_(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:gt()),t;var o}function km(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Xn.updateTime(Ur(o.updateTime)):void 0!==o.exists?Xn.exists(o.exists):Xn.none():Xn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let m=null;"setToServerValue"in l?(Ct("REQUEST_TIME"===l.setToServerValue),m=new Uc):"appendMissingElements"in l?m=new vo(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new Bc(l.removeAllFromArray.values||[]):"increment"in l?m=new fd(u,l.increment):gt();const w=Cr.fromServerFormat(l.fieldPath);return new pd(w,m)}(n,o)):[];var o;if(e.update){const o=_o(n,e.update.name),u=new Si({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new ps((e.updateMask.fieldPaths||[]).map(D=>Cr.fromServerFormat(D)));return new xa(o,u,l,t,r)}return new Tu(o,u,t,r)}if(e.delete){const o=_o(n,e.delete);return new gd(o,t)}if(e.verify){const o=_o(n,e.verify);return new z_(o,t)}return gt()}function e0(n,e){return{documents:[Cf(n,e.path)]}}function t0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Cf(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Cf(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0!==w.length)return TD(Wn.create(w,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(D=>{return{field:Su((b=D).field),direction:mS(b.dir)};var b})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=Z_(n,e.limit);var m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function CD(n){let e=Q_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Ct(1===r);const b=t.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=function(b){const N=bD(b);return N instanceof Wn&&Im(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new Oc(_d((N=b).field),function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(b){let N;return N="object"==typeof b?b.value:b,nf(N)?null:N}(t.limit));let w=null;var b;t.startAt&&(w=new Du((b=t.startAt).values||[],!!b.before));let D=null;return t.endAt&&(D=function(b){return new Du(b.values||[],!b.before)}(t.endAt)),P_(e,o,l,u,m,"F",w,D)}function bD(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=_d(e.unaryFilter.field);return In.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=_d(e.unaryFilter.field);return In.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=_d(e.unaryFilter.field);return In.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=_d(e.unaryFilter.field);return In.create(u,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}(n):void 0!==n.fieldFilter?In.create(_d((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Wn.create(e.compositeFilter.filters.map(t=>bD(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return gt()}}(e.compositeFilter.op))}(n):gt();var e}function mS(n){return fS[n]}function yS(n){return ED[n]}function vS(n){return yd[n]}function Su(n){return{fieldPath:n.canonicalString()}}function _d(n){return Cr.fromServerFormat(n.fieldPath)}function TD(n){return n instanceof In?function(e){if("=="===e.op){if(GI(e.value))return{unaryFilter:{field:Su(e.field),op:"IS_NAN"}};if(HI(e.value))return{unaryFilter:{field:Su(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(GI(e.value))return{unaryFilter:{field:Su(e.field),op:"IS_NOT_NAN"}};if(HI(e.value))return{unaryFilter:{field:Su(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Su(e.field),op:yS(e.op),value:e.value}}}(n):n instanceof Wn?function(e){const t=e.getFilters().map(r=>TD(r));return 1===t.length?t[0]:{compositeFilter:{op:vS(e.op),filters:t}}}(n):gt()}function _S(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function SD(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ra{constructor(e,t,r,o,u=bt.min(),l=bt.min(),m=Wr.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m,this.expectedCount=w}withSequenceNumber(e){return new Ra(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class AD{constructor(e){this.fe=e}}function wd(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Tf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Df(o=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:If(o,u.version.toTimestamp()),createTime:If(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Au(e.version)};else{if(!e.isUnknownDocument())return gt();r.unknownDocument={path:t.path.toArray(),version:Au(e.version)}}var o,u;return r}function Tf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Au(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mu(n){const e=new ur(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function xu(n,e){const t=(e.baseMutations||[]).map(u=>km(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>km(n.fe,u)),o=ur.fromMillis(e.localWriteTimeMs);return new vf(e.batchId,o,t,r)}function Ed(n){const e=Mu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Mu(n.lastLimboFreeSnapshotVersion):bt.min();let r;var o;return void 0!==n.query.documents?(Ct(1===(o=n.query).documents.length),r=qi(dd(Q_(o.documents[0])))):r=qi(CD(n.query)),new Ra(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Wr.fromBase64String(n.resumeToken))}function MD(n,e){const t=Au(e.snapshotVersion),r=Au(e.lastLimboFreeSnapshotVersion);let o;o=Fc(e.target)?e0(n.fe,e.target):t0(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ws(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function n0(n){const e=CD({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Cu(e,e.limit,"L"):e}function xD(n,e){return new Sm(e.largestBatchId,km(n.fe,e.overlayMutation))}function ES(n,e){const t=e.path.lastSegment();return[n,Gi(e.path.popLast()),t]}function RD(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Au(r.readTime),documentKey:Gi(r.documentKey.path),largestBatchId:r.largestBatchId}}class IS{getBundleMetadata(e,t){return ND(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Mu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return ND(e).put({bundleId:(r=t).id,createTime:Au(Ur(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return OD(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:n0(o.bundledQuery),readTime:Mu(o.readTime)};var o})}saveNamedQuery(e,t){return OD(e).put({name:(r=t).name,readTime:Au(Ur(r.readTime)),bundledQuery:r.bundledQuery});var r}}function ND(n){return ni(n,"bundles")}function OD(n){return ni(n,"namedQueries")}class Fm{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Fm(e,t.uid||"")}getOverlay(e,t){return Na(e).get(ES(this.userId,t)).next(r=>r?xD(this.serializer,r):null)}getOverlays(e,t){const r=yo();return ce.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const m=new Sm(t,l);o.push(this.we(e,m))}),ce.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(Gi(l.getCollectionPath())));const u=[];return o.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Na(e).J("collectionPathOverlayIndex",m))}),ce.waitFor(u)}getOverlaysForCollection(e,t,r){const o=yo(),u=Gi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Na(e).j("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const D=xD(this.serializer,w);o.set(D.getKey(),D)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=yo();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Na(e).X({index:"collectionGroupOverlayIndex",range:m},(w,D,b)=>{const N=xD(this.serializer,D);u.size()<o||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):b.done()}).next(()=>u)}we(e,t){return Na(e).put(function(r,o,u){const[l,m,w]=ES(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:bf(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function Na(n){return ni(n,"documentOverlays")}class $c{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(br(e.integerValue));else if("doubleValue"in e){const r=br(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Mc(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(qo(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?WI(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):gt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const o of Object.keys(r))this.Te(o,t),this.me(r[o],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const o of r)this.me(o,t)}ve(e,t){this.ye(t,37),et.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function r0(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function wo(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=r0(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}$c.Ve=new $c;class DS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const o=t.codePointAt(0);this.De(240|o>>>18),this.De(128|63&o>>>12),this.De(128|63&o>>>6),this.De(128|63&o)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const o=t.codePointAt(0);this.Ne(240|o>>>18),this.Ne(128|63&o>>>12),this.Ne(128|63&o>>>6),this.Ne(128|63&o)}}this.ke()}Oe(e){const t=this.Fe(e),r=wo(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Le(e){const t=this.Fe(e),r=wo(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class s0{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Sf{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Af{constructor(){this.je=new DS,this.ze=new s0(this.je),this.We=new Sf(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class jc{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new jc(this.indexId,this.documentKey,this.arrayValue,r)}}function Ru(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Mf(n.arrayValue,e.arrayValue),0!==t?t:(t=Mf(n.directionalValue,e.directionalValue),0!==t?t:et.comparator(n.documentKey,e.documentKey)))}function Mf(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class PD{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Ct(e.collectionGroup===this.collectionId);const t=Xh(e);if(void 0!==t&&!this.en(t))return!1;const r=wu(e);let o=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!o.has(this.Ze.field.canonicalString())){const m=r[u];if(!this.nn(this.Ze,m)||!this.sn(this.Ye[l++],m))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function kD(n){var e,t;if(Ct(n instanceof In||n instanceof Wn),n instanceof In){if(n instanceof QT){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>In.create(n.field,"==",u)))||[];return Wn.create(o,"or")}return n}const r=n.filters.map(o=>kD(o));return Wn.create(r,n.op)}function CS(n){if(0===n.getFilters().length)return[];const e=Lm(kD(n));return Ct(FD(e)),xf(e)||o0(e)?[e]:e.getFilters()}function xf(n){return n instanceof In}function o0(n){return n instanceof Wn&&Im(n)}function FD(n){return xf(n)||o0(n)||function(e){if(e instanceof Wn&&Em(e)){for(const t of e.getFilters())if(!xf(t)&&!o0(t))return!1;return!0}return!1}(n)}function Lm(n){if(Ct(n instanceof In||n instanceof Wn),n instanceof In)return n;if(1===n.filters.length)return Lm(n.filters[0]);const e=n.filters.map(r=>Lm(r));let t=Wn.create(e,n.op);return t=Rf(t),FD(t)?t:(Ct(t instanceof Wn),Ct(Pc(t)),Ct(t.filters.length>1),t.filters.reduce((r,o)=>a0(r,o)))}function a0(n,e){let t;return Ct(n instanceof In||n instanceof Wn),Ct(e instanceof In||e instanceof Wn),t=n instanceof In?e instanceof In?Wn.create([n,e],"and"):LD(n,e):e instanceof In?LD(e,n):function(r,o){if(Ct(r.filters.length>0&&o.filters.length>0),Pc(r)&&Pc(o))return JI(r,o.getFilters());const u=Em(r)?r:o,l=Em(r)?o:r,m=u.filters.map(w=>a0(w,l));return Wn.create(m,"or")}(n,e),Rf(t)}function LD(n,e){if(Pc(e))return JI(e,n.getFilters());{const t=e.filters.map(r=>a0(n,r));return Wn.create(t,"or")}}function Rf(n){if(Ct(n instanceof In||n instanceof Wn),n instanceof In)return n;const e=n.getFilters();if(1===e.length)return Rf(e[0]);if(x_(n))return n;const t=e.map(o=>Rf(o)),r=[];return t.forEach(o=>{o instanceof In?r.push(o):o instanceof Wn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:Wn.create(r,n.op)}class Vm{constructor(){this.rn=new u0}addToCollectionParentIndex(e,t){return this.rn.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Ts.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class u0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Qn(xn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Qn(xn.comparator)).toArray()}}const Um=new Uint8Array(0);class VD{constructor(e,t){this.user=e,this.databaseId=t,this.on=new u0,this.un=new Ma(r=>Ws(r),(r,o)=>lf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:Gi(o)};return c0(e).put(u)}return ce.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[dm(t),""],!1,!0);return c0(e).j(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(ho(l.parent))}return r})}addFieldIndex(e,t){const r=Nf(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=Of(e);return u.next(m=>{l.put(RD(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Nf(e),o=Of(e),u=zc(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=zc(e);let o=!0;const u=new Map;return ce.forEach(this.cn(t),l=>this.an(e,l).next(m=>{o&&(o=!!m),u.set(l,m)})).next(()=>{if(o){let l=rn();const m=[];return ce.forEach(u,(w,D)=>{var b;He("IndexedDbIndexManager",`Using index ${b=w,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Ot=>`${Ot.fieldPath}:${Ot.kind}`).join(",")}`} to execute ${Ws(t)}`);const N=function(Ot,Ht){const cn=Xh(Ht);if(void 0===cn)return null;for(const Vn of Lc(Ot,cn.fieldPath))switch(Vn.op){case"array-contains-any":return Vn.value.arrayValue.values||[];case"array-contains":return[Vn.value]}return null}(D,w),K=function(Ot,Ht){const cn=new Map;for(const Vn of wu(Ht))for(const ms of Lc(Ot,Vn.fieldPath))switch(ms.op){case"==":case"in":cn.set(Vn.fieldPath.canonicalString(),ms.value);break;case"not-in":case"!=":return cn.set(Vn.fieldPath.canonicalString(),ms.value),Array.from(cn.values())}return null}(D,w),re=function(Ot,Ht){const cn=[];let Vn=!0;for(const ms of wu(Ht)){const up=0===ms.kind?Wi(Ot,ms.fieldPath,Ot.startAt):eS(Ot,ms.fieldPath,Ot.startAt);cn.push(up.value),Vn&&(Vn=up.inclusive)}return new Du(cn,Vn)}(D,w),Se=function(Ot,Ht){const cn=[];let Vn=!0;for(const ms of wu(Ht)){const up=0===ms.kind?eS(Ot,ms.fieldPath,Ot.endAt):Wi(Ot,ms.fieldPath,Ot.endAt);cn.push(up.value),Vn&&(Vn=up.inclusive)}return new Du(cn,Vn)}(D,w),qe=this.hn(w,D,re),Ze=this.hn(w,D,Se),At=this.ln(w,D,K),$t=this.fn(w.indexId,N,qe,re.inclusive,Ze,Se.inclusive,At);return ce.forEach($t,Ot=>r.H(Ot,t.limit).next(Ht=>{Ht.forEach(cn=>{const Vn=et.fromSegments(cn.documentKey);l.has(Vn)||(l=l.add(Vn),m.push(Vn))})}))}).next(()=>m)}return ce.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:CS(Wn.create(e.filters,"and")).map(r=>O_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,o,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),D=w/(null!=t?t.length:1),b=[];for(let N=0;N<w;++N){const K=t?this.dn(t[N/D]):Um,re=this.wn(e,K,r[N%D],o),Se=this._n(e,K,u[N%D],l),qe=m.map(Ze=>this.wn(e,K,Ze,!0));b.push(...this.createRange(re,Se,qe))}return b}wn(e,t,r,o){const u=new jc(e,et.empty(),t,r);return o?u:u.Je()}_n(e,t,r,o){const u=new jc(e,et.empty(),t,r);return o?u.Je():u}an(e,t){const r=new PD(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const m of u)r.tn(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const o=this.cn(t);return ce.forEach(o,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new Qn(Cr.comparator),D=!1;for(const b of m.filters)for(const N of b.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?D=!0:w=w.add(N.field));for(const b of m.orderBy)b.field.isKeyField()||(w=w.add(b.field));return w.size+(D?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}mn(e,t){const r=new Af;for(const o of wu(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.He(o.kind);$c.Ve._e(u,l)}return r.Qe()}dn(e){const t=new Af;return $c.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Af;return $c.Ve._e(Nc(this.databaseId,t),r.He(function(o){const u=wu(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let o=[];o.push(new Af);let u=0;for(const l of wu(e)){const m=r[u++];for(const w of o)if(this.yn(t,l.fieldPath)&&uf(m))o=this.pn(o,l,m);else{const D=w.He(l.kind);$c.Ve._e(m,D)}}return this.In(o)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of o){const w=new Af;w.seed(m.Qe()),$c.Ve._e(l,w.He(t.kind)),u.push(w)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof In&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Nf(e),o=Of(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return ce.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{l.push(function(D,b){const N=b?new od(b.sequenceNumber,new Ts(Mu(b.readTime),new et(ho(b.documentKey)),b.largestBatchId)):od.empty(),K=D.fields.map(([re,Se])=>new ef(Cr.fromServerFormat(re),Se));return new Jh(D.indexId,D.collectionGroup,K,N)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Kt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Nf(e),u=Of(e);return this.Tn(e).next(l=>o.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ce.forEach(m,w=>u.put(RD(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?ce.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),ce.forEach(m,w=>this.En(e,o,w).next(D=>{const b=this.An(u,w);return D.isEqual(b)?ce.resolve():this.vn(e,u,w,D,b)}))))})}Rn(e,t,r,o){return zc(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,o){return zc(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const o=zc(e);let u=new Qn(Ru);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,m)=>{u=u.add(new jc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new Qn(Ru);const o=this.mn(t,e);if(null==o)return r;const u=Xh(t);if(null!=u){const l=e.data.field(u.fieldPath);if(uf(l))for(const m of l.arrayValue.values||[])r=r.add(new jc(t.indexId,e.key,this.dn(m),o))}else r=r.add(new jc(t.indexId,e.key,Um,o));return r}vn(e,t,r,o,u){He("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,D,b,N){const K=m.getIterator(),re=w.getIterator();let Se=xc(K),qe=xc(re);for(;Se||qe;){let Ze=!1,At=!1;if(Se&&qe){const $t=D(Se,qe);$t<0?At=!0:$t>0&&(Ze=!0)}else null!=Se?At=!0:Ze=!0;Ze?(b(qe),qe=xc(re)):At?(N(Se),Se=xc(K)):(Se=xc(K),qe=xc(re))}}(o,u,Ru,m=>{l.push(this.Rn(e,t,r,m))},m=>{l.push(this.Pn(e,t,r,m))}),ce.waitFor(l)}Tn(e){let t=1;return Of(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>Ru(l,m)).filter((l,m,w)=>!m||0!==Ru(l,w[m-1]));const o=[];o.push(e);for(const l of r){const m=Ru(l,e),w=Ru(l,t);if(0===m)o[0]=e.Je();else if(m>0&&w<0)o.push(l),o.push(l.Je());else if(w>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2){if(this.bn(o[l],o[l+1]))return[];u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,Um,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,Um,[]]))}return u}bn(e,t){return Ru(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(l0)}getMinOffset(e,t){return ce.mapArray(this.cn(t),r=>this.an(e,r).next(o=>o||gt())).next(l0)}}function c0(n){return ni(n,"collectionParents")}function zc(n){return ni(n,"indexEntries")}function Nf(n){return ni(n,"indexConfiguration")}function Of(n){return ni(n,"indexState")}function l0(n){Ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;y_(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Ts(e.readTime,e.documentKey,t)}const d0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Pi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Pi(e,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function UD(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.X({range:l},(b,N,K)=>(m++,K.delete()));u.push(w.next(()=>{Ct(1===m)}));const D=[];for(const b of t.mutations){const N=w_(e,b.key.path,t.batchId);u.push(o.delete(N)),D.push(b.key)}return ce.waitFor(u).next(()=>D)}function Id(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw gt();e=n.noDocument}return JSON.stringify(e).length}Pi.DEFAULT_COLLECTION_PERCENTILE=10,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pi.DEFAULT=new Pi(41943040,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pi.DISABLED=new Pi(-1,0,0);class Dd{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Vn={}}static de(e,t,r,o){Ct(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Dd(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yo(e).X({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Nu(e),l=Yo(e);return l.add({}).next(m=>{Ct("number"==typeof m);const w=new vf(m,t,r,o),D=function(K,re,Se){const qe=Se.baseMutations.map(At=>bf(K.fe,At)),Ze=Se.mutations.map(At=>bf(K.fe,At));return{userId:re,batchId:Se.batchId,localWriteTimeMs:Se.localWriteTime.toMillis(),baseMutations:qe,mutations:Ze}}(this.serializer,this.userId,w),b=[];let N=new Qn((K,re)=>Kt(K.canonicalString(),re.canonicalString()));for(const K of o){const re=w_(this.userId,K.key.path,m);N=N.add(K.key.path.popLast()),b.push(l.put(D)),b.push(u.put(re,jT))}return N.forEach(K=>{b.push(this.indexManager.addToCollectionParentIndex(e,K))}),e.addOnCommittedListener(()=>{this.Vn[m]=w.keys()}),ce.waitFor(b).next(()=>w)})}lookupMutationBatch(e,t){return Yo(e).get(t).next(r=>r?(Ct(r.userId===this.userId),xu(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ce.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Vn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Yo(e).X({index:"userMutationsIndex",range:o},(l,m,w)=>{m.userId===this.userId&&(Ct(m.batchId>=r),u=xu(this.serializer,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Yo(e).X({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yo(e).j("userMutationsIndex",t).next(r=>r.map(o=>xu(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Rr(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Nu(e).X({range:o},(l,m,w)=>{const[D,b,N]=l,K=ho(b);if(D===this.userId&&t.path.isEqual(K))return Yo(e).get(N).next(re=>{if(!re)throw gt();Ct(re.userId===this.userId),u.push(xu(this.serializer,re))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qn(Kt);const o=[];return t.forEach(u=>{const l=Rr(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=Nu(e).X({range:m},(D,b,N)=>{const[K,re,Se]=D,qe=ho(re);K===this.userId&&u.path.isEqual(qe)?r=r.add(Se):N.done()});o.push(w)}),ce.waitFor(o).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Rr(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new Qn(Kt);return Nu(e).X({range:l},(w,D,b)=>{const[N,K,re]=w,Se=ho(K);N===this.userId&&r.isPrefixOf(Se)?Se.length===o&&(m=m.add(re)):b.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Yo(e).get(u).next(l=>{if(null===l)throw gt();Ct(l.userId===this.userId),r.push(xu(this.serializer,l))}))}),ce.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return UD(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ce.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Nu(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=ho(u[1]);o.push(w)}else m.done()}).next(()=>{Ct(0===o.length)})})}containsKey(e,t){return h0(e,this.userId,t)}xn(e){return BD(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function h0(n,e,t){const r=Rr(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Nu(n).X({range:u,Y:!0},(m,w,D)=>{const[b,N,K]=m;b===e&&N===o&&(l=!0),D.done()}).next(()=>l)}function Yo(n){return ni(n,"mutations")}function Nu(n){return ni(n,"documentMutations")}function BD(n){return ni(n,"mutationQueues")}class Hc{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Hc(0)}static Mn(){return new Hc(-1)}}class bS{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Hc(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>bt.fromTimestamp(new ur(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.On(e,o)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Cd(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Cd(e).X((l,m)=>{const w=Ed(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>ce.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Cd(e).X((r,o)=>{const u=Ed(o);t(u)})}$n(e){return f0(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}On(e,t){return f0(e).put("targetGlobalKey",t)}Fn(e,t){return Cd(e).put(MD(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ws(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Cd(e).X({range:o,index:"queryTargetsIndex"},(l,m,w)=>{const D=Ed(m);lf(t,D.target)&&(u=D,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Qo(e);return t.forEach(l=>{const m=Gi(l.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,l))}),ce.waitFor(o)}removeMatchingKeys(e,t,r){const o=Qo(e);return ce.forEach(t,u=>{const l=Gi(u.path);return ce.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Qo(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Qo(e);let u=rn();return o.X({range:r,Y:!0},(l,m,w)=>{const D=ho(l[1]),b=new et(D);u=u.add(b)}).next(()=>u)}containsKey(e,t){const r=Gi(t.path),o=IDBKeyRange.bound([r],[dm(r)],!1,!0);let u=0;return Qo(e).X({index:"documentTargetsIndex",Y:!0,range:o},([l,m],w,D)=>{0!==l&&(u++,D.done())}).next(()=>u>0)}le(e,t){return Cd(e).get(t).next(r=>r?Ed(r):null)}}function Cd(n){return ni(n,"targets")}function f0(n){return ni(n,"targetGlobal")}function Qo(n){return ni(n,"targetDocuments")}function p0([n,e],[t,r]){const o=Kt(n,t);return 0===o?Kt(e,r):o}class TS{constructor(e){this.Ln=e,this.buffer=new Qn(p0),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();p0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class g0{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;He("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ae.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ca(r)?He("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Da(r)}yield t.Qn(3e5)}))}}class $D{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Hi.ct);const r=new TS(t);return this.jn.forEachTarget(e,o=>r.Kn(o.sequenceNumber)).next(()=>this.jn.Wn(e,o=>r.Kn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(d0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),d0):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,o,u,l,m,w,D;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,l=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(D=Date.now(),rd()<=Ds.in.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${o} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(D-w)+`ms\nTotal Duration: ${D-b}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class zD{constructor(e,t){this.db=e,this.garbageCollector=function jD(n,e){return new $D(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,o)=>t(o))}addReference(e,t,r){return Pf(e,r)}removeReference(e,t,r){return Pf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Pf(e,t)}Xn(e,t){return function(r,o){let u=!1;return BD(r).Z(l=>h0(r,l,o).next(m=>(m&&(u=!0),ce.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Yn(e,(l,m)=>{if(m<=t){const w=this.Xn(e,l).next(D=>{if(!D)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,bt.min()),Qo(e).delete([0,Gi(l.path)])))});o.push(w)}}).next(()=>ce.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Pf(e,t)}Yn(e,t){const r=Qo(e);let o,u=Hi.ct;return r.X({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:D})=>{0===l?(u!==Hi.ct&&t(new et(ho(o)),u),u=D,o=w):u=Hi.ct}).next(()=>{u!==Hi.ct&&t(new et(ho(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Pf(n,e){return Qo(n).put((r=n.currentSequenceNumber,{targetId:0,path:Gi(e.path),sequenceNumber:r}));var r}class HD{constructor(){this.changes=new Ma(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class GD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wc(e).put(r)}removeEntry(e,t,r){return Wc(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Tf(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=gr.newInvalidDocument(t);return Wc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(kf(t))},(o,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:gr.newInvalidDocument(t)};return Wc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(kf(t))},(o,u)=>{r={document:this.ts(t,u),size:Id(u)}}).next(()=>r)}getEntries(e,t){let r=gi();return this.ns(e,t,(o,u)=>{const l=this.ts(o,u);r=r.insert(o,l)}).next(()=>r)}ss(e,t){let r=gi(),o=new cr(et.comparator);return this.ns(e,t,(u,l)=>{const m=this.ts(u,l);r=r.insert(u,m),o=o.insert(u,Id(l))}).next(()=>({documents:r,rs:o}))}ns(e,t,r){if(t.isEmpty())return ce.resolve();let o=new Qn(AS);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(kf(o.first()),kf(o.last())),l=o.getIterator();let m=l.getNext();return Wc(e).X({index:"documentKeyIndex",range:u},(w,D,b)=>{const N=et.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;m&&AS(m,N)<0;)r(m,null),m=l.getNext();m&&m.isEqual(N)&&(r(m,D),m=l.hasNext()?l.getNext():null),m?b.G(kf(m)):b.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),Tf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wc(e).j(IDBKeyRange.bound(l,m,!0)).next(w=>{let D=gi();for(const b of w){const N=this.ts(et.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);N.isFoundDocument()&&(bu(t,N)||o.has(N.key))&&(D=D.insert(N.key,N))}return D})}getAllFromCollectionGroup(e,t,r,o){let u=gi();const l=SS(t,r),m=SS(t,Ts.max());return Wc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,D,b)=>{const N=this.ts(et.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(N.key,N),u.size===o&&b.done()}).next(()=>u)}newChangeBuffer(e){return new Zi(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Gc(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}Zn(e,t){return Gc(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function wS(n,e){let t;if(e.document)t=DD(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=et.fromSegments(e.noDocument.path),o=Mu(e.noDocument.readTime);t=gr.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return gt();{const r=et.fromSegments(e.unknownDocument.path),o=Mu(e.unknownDocument.version);t=gr.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new ur(r[0],r[1]);return bt.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return gr.newInvalidDocument(e)}}function WD(n){return new GD(n)}class Zi extends HD{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ma(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Qn((u,l)=>Kt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=wd(this.os.serializer,l);o=o.add(u.path.popLast());const D=Id(w);r+=D-m.size,t.push(this.os.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=wd(this.os.serializer,l.convertToNoDocument(bt.min()));t.push(this.os.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:o})=>(o.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function Gc(n){return ni(n,"remoteDocumentGlobal")}function Wc(n){return ni(n,"remoteDocumentsV14")}function kf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function SS(n,e){const t=e.documentKey.path.toArray();return[n,Tf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function AS(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Kt(t[u],r[u]),o)return o;return o=Kt(t.length,r.length),o||(o=Kt(t[t.length-2],r[r.length-2]),o||Kt(t[t.length-1],r[r.length-1]))}class qD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Bm{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&yf(r.mutation,o,ps.empty(),ur.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,rn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=rn()){const o=yo();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=pf();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=yo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,rn()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,o){let u=gi();const l=hd(),m=hd();return t.forEach((w,D)=>{const b=r.get(D.key);o.has(D.key)&&(void 0===b||b.mutation instanceof xa)?u=u.insert(D.key,D):void 0!==b?(l.set(D.key,b.mutation.getFieldMask()),yf(b.mutation,D,b.mutation.getFieldMask(),ur.now())):l.set(D.key,ps.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((D,b)=>l.set(D,b)),t.forEach((D,b)=>{var N;return m.set(D,new qD(b,null!==(N=l.get(D))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=hd();let o=new cr((l,m)=>l-m),u=rn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const D=t.get(w);if(null===D)return;let b=r.get(w)||ps.empty();b=m.applyToLocalView(D,b),r.set(w,b);const N=(o.get(m.batchId)||rn()).add(w);o=o.insert(m.batchId,N)})}).next(()=>{const l=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),D=w.key,b=w.value,N=B_();b.forEach(K=>{if(!u.has(K)){const re=lD(t.get(K),r.get(K));null!==re&&N.set(K,re),u=u.add(K)}}),l.push(this.documentOverlayCache.saveOverlays(e,D,N))}return ce.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return et.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Cm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ce.resolve(yo());let m=-1,w=u;return l.next(D=>ce.forEach(D,(b,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(b)?ce.resolve():this.remoteDocumentCache.getEntry(e,b).next(K=>{w=w.insert(b,K)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,w,D,rn())).next(b=>({batchId:m,changes:rD(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new et(t)).next(r=>{let o=pf();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=pf();return this.indexManager.getCollectionParents(e,o).next(l=>ce.forEach(l,m=>{const w=(D=t,b=m.child(o),new Ko(b,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,b;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(D=>{D.forEach((b,N)=>{u=u.insert(b,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((m,w)=>{const D=w.getKey();null===u.get(D)&&(u=u.insert(D,gr.newInvalidDocument(D)))});let l=pf();return u.forEach((m,w)=>{const D=o.get(m);void 0!==D&&yf(D.mutation,w,ps.empty(),ur.now()),bu(t,w)&&(l=l.insert(m,w))}),l})}}class Ff{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ce.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Ur(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:n0(r.bundledQuery),readTime:Ur(r.readTime)}),ce.resolve();var r}}class MS{constructor(){this.overlays=new cr(et.comparator),this.ls=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=yo();return ce.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.we(e,t,u)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ls.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const o=yo(),u=t.length+1,l=new et(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,D=w.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return ce.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new cr((D,b)=>D-b);const l=this.overlays.getIterator();for(;l.hasNext();){const D=l.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let b=u.get(D.largestBatchId);null===b&&(b=yo(),u=u.insert(D.largestBatchId,b)),b.set(D.getKey(),D)}}const m=yo(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((D,b)=>m.set(D,b)),!(m.size()>=o)););return ce.resolve(m)}we(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.ls.get(o.largestBatchId).delete(r.key);this.ls.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Sm(t,r));let u=this.ls.get(t);void 0===u&&(u=rn(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class Lf{constructor(){this.fs=new Qn(mi.ds),this.ws=new Qn(mi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new mi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new mi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new et(new xn([])),r=new mi(t,e),o=new mi(t,e+1),u=[];return this.ws.forEachInRange([r,o],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new et(new xn([])),r=new mi(t,e),o=new mi(t,e+1);let u=rn();return this.ws.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new mi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class mi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return et.comparator(e.key,t.key)||Kt(e.As,t.As)}static _s(e,t){return Kt(e.As,t.As)||et.comparator(e.key,t.key)}}class ZD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Qn(mi.ds)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.vs;this.vs++;const l=new vf(u,t,r,o);this.mutationQueue.push(l);for(const m of o)this.Rs=this.Rs.add(new mi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ce.resolve(l)}lookupMutationBatch(e,t){return ce.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.bs(t+1),u=o<0?0:o;return ce.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new mi(t,0),o=new mi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,o],l=>{const m=this.Ps(l.As);u.push(m)}),ce.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qn(Kt);return t.forEach(o=>{const u=new mi(o,0),l=new mi(o,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],m=>{r=r.add(m.As)})}),ce.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;et.isDocumentKey(u)||(u=u.child(""));const l=new mi(new et(u),0);let m=new Qn(Kt);return this.Rs.forEachWhile(w=>{const D=w.key.path;return!!r.isPrefixOf(D)&&(D.length===o&&(m=m.add(w.As)),!0)},l),ce.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const o=this.Ps(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Ct(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ce.forEach(t.mutations,o=>{const u=new mi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new mi(t,0),o=this.Rs.firstAfterOrEqual(r);return ce.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ce.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class xS{constructor(e){this.Ds=e,this.docs=new cr(et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():gr.newInvalidDocument(t))}getEntries(e,t){let r=gi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():gr.newInvalidDocument(o))}),ce.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=gi();const l=t.path,m=new et(l.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:D,value:{document:b}}=w.getNext();if(!l.isPrefixOf(D.path))break;D.path.length>l.length+1||y_(AI(b),r)<=0||(o.has(b.key)||bu(t,b))&&(u=u.insert(b.key,b.mutableCopy()))}return ce.resolve(u)}getAllFromCollectionGroup(e,t,r,o){gt()}Cs(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new RS(this)}getSize(e){return ce.resolve(this.size)}}class RS extends HD{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.os.addEntry(e,o)):this.os.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class NS{constructor(e){this.persistence=e,this.xs=new Ma(t=>Ws(t),lf),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Lf,this.targetCount=0,this.Ms=Hc.kn()}forEachTarget(e,t){return this.xs.forEach((r,o)=>t(o)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ce.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Hc(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Fn(t),ce.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.xs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ce.waitFor(u).next(()=>o)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),ce.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.ks.containsKey(t))}}class Vf{constructor(e,t){this.$s={},this.overlays={},this.Os=new Hi(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new NS(this),this.indexManager=new Vm,this.remoteDocumentCache=new xS(r=>this.referenceDelegate.Ls(r)),this.serializer=new AD(t),this.qs=new Ff(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new MS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new ZD(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){He("MemoryPersistence","Starting transaction:",e);const o=new KD(this.Os.next());return this.referenceDelegate.Us(),r(o).next(u=>this.referenceDelegate.Ks(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Gs(e,t){return ce.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class KD extends fm{constructor(e){super(),this.currentSequenceNumber=e}}class $m{constructor(e){this.persistence=e,this.Qs=new Lf,this.js=null}static zs(e){return new $m(e)}get Ws(){if(this.js)return this.js;throw gt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(o=>this.Ws.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Ws,r=>{const o=et.fromPath(r);return this.Hs(e,o).next(u=>{u||t.removeEntry(o,bt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ce.or([()=>ce.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class m0{constructor(e){this.serializer=e}O(e,t,r,o){const u=new tf("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NI,{unique:!0}),m.createObjectStore("documentMutations"),OS(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=ce.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),OS(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",D)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").j().next(D=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NI,{unique:!0});const b=w.store("mutations"),N=D.map(K=>b.put(K));return ce.waitFor(N)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Ys(u))),r<6&&o>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&o>=7&&(l=l.next(()=>this.Zs(u))),r<8&&o>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.ei(u))),r<11&&o>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:tx});w.createIndex("collectionPathOverlayIndex",VI,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",E_,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:zT});w.createIndex("documentKeyIndex",OI),w.createIndex("collectionGroupIndex",HT)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.si(e,u))),r<15&&o>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:WT}).createIndex("sequenceNumberIndex",FI,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:qT}).createIndex("documentKeyIndex",LI,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,o)=>{t+=Id(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(o=>ce.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>ce.forEach(m,w=>{Ct(w.userId===u.userId);const D=xu(this.serializer,w);return UD(e,u.userId,D).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.X((l,m)=>{const w=new xn(l),D=[0,Gi(w)];u.push(t.get(D).next(b=>b?ce.resolve():t.put({targetId:0,path:Gi(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ce.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:GT});const r=t.store("collectionParents"),o=new u0,u=l=>{if(o.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:Gi(w)})}};return t.store("remoteDocuments").X({Y:!0},(l,m)=>{const w=new xn(l);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,m,w],D)=>{const b=ho(m);return u(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,o)=>{const u=Ed(o),l=MD(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),o=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(D=l,D.document?new et(xn.fromString(D.document.name).popFirst(5)):D.noDocument?et.fromSegments(D.noDocument.path):D.unknownDocument?et.fromSegments(D.unknownDocument.path):gt()).path.toArray();var D;const b={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(m.put(b))}).next(()=>ce.waitFor(o))}si(e,t){const r=t.store("mutations"),o=WD(this.serializer),u=new Vf($m.zs,this.serializer.fe);return r.j().next(l=>{const m=new Map;return l.forEach(w=>{var D;let b=null!==(D=m.get(w.userId))&&void 0!==D?D:rn();xu(this.serializer,w).keys().forEach(N=>b=b.add(N)),m.set(w.userId,b)}),ce.forEach(m,(w,D)=>{const b=new pi(D),N=Fm.de(this.serializer,b),K=u.getIndexManager(b),re=Dd.de(b,this.serializer,K,u.referenceDelegate);return new Bm(o,re,N,K).recalculateAndSaveOverlaysForDocumentKeys(new Ss(t,Hi.ct),w).next()})})}}function OS(n){n.createObjectStore("targetDocuments",{keyPath:kI}).createIndex("documentTargetsIndex",ud,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",PI,{unique:!0}),n.createObjectStore("targetGlobal")}const jm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class y0{constructor(e,t,r,o,u,l,m,w,D,b,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=m,this.ri=D,this.oi=b,this.ui=N,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=K=>Promise.resolve(),!y0.D())throw new Fe(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zD(this,o),this.di=t+"main",this.serializer=new AD(w),this.wi=new Gs(this.di,this.ui,new m0(this.serializer)),this.Bs=new bS(this.referenceDelegate,this.serializer),this.remoteDocumentCache=WD(this.serializer),this.qs=new IS,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&Vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(fe.FAILED_PRECONDITION,jm);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Hi(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Ae.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ae.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ae.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Oa(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Ca(e))return He("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return He("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return bd(e).get("owner").next(t=>ce.resolve(this.Ri(t)))}Pi(e){return Oa(e).delete(this.clientId)}bi(){var e=this;return(0,Ae.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=ni(r,"clientMetadata");return o.j().next(u=>{const l=e.Si(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return ce.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ce.resolve(!0):bd(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Fe(fe.FAILED_PRECONDITION,jm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Oa(e).j().next(r=>void 0===this.Si(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(t=>(this.isPrimary!==t&&He("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ae.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Ss(t,Hi.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Oa(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Dd.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new VD(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Fm.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){He("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?go:14===l?po:13===l?UI:12===l?ZT:11===l?fo:void gt();var l;let m;return this.wi.runTransaction(e,o,u,w=>(m=new Ss(w,this.Os?this.Os.next():Hi.ct),"readwrite-primary"===t?this.Ti(m).next(D=>!!D||this.Ei(m)).next(D=>{if(!D)throw Vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Fe(fe.FAILED_PRECONDITION,hm);return r(m)}).next(D=>this.vi(m).next(()=>D)):this.Oi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Oi(e){return bd(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(fe.FAILED_PRECONDITION,jm)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bd(e).put("owner",t)}static D(){return Gs.D()}Ai(e){const t=bd(e);return t.get("owner").next(r=>this.Ri(r)?(He("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Vr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,An.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return He("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Vr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Vr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bd(n){return ni(n,"owner")}function Oa(n){return ni(n,"clientMetadata")}function v0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class zm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=o}static Li(e,t){let r=rn(),o=rn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new zm(e,t.fromCache,r,o)}}class Hm{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ki(e,t).next(u=>u||this.Gi(e,t,o,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(k_(t))return ce.resolve(null);let r=qi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Cu(t,null,"F"),r=qi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=rn(...u);return this.Ui.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const D=this.ji(t,m);return this.zi(t,D,l,w.readTime)?this.Ki(e,Cu(t,null,"F")):this.Wi(e,D,t,w)}))})))}Gi(e,t,r,o){return k_(t)||o.isEqual(bt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,o)?this.Qi(e,t):(rd()<=Ds.in.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),L_(t)),this.Wi(e,l,t,m_(o,-1)))})}ji(e,t){let r=new Qn(U_(e));return t.forEach((o,u)=>{bu(e,u)&&(r=r.add(u))}),r}zi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Qi(e,t){return rd()<=Ds.in.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",L_(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ts.min())}Wi(e,t,r,o){return this.Ui.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class ox{constructor(e,t,r,o){this.persistence=e,this.Hi=t,this.serializer=o,this.Ji=new cr(Kt),this.Yi=new Ma(u=>Ws(u),lf),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bm(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function YD(n,e,t,r){return new ox(n,e,t,r)}function PS(n,e){return _0.apply(this,arguments)}function _0(){return _0=(0,Ae.Z)(function*(n,e){const t=st(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=rn();for(const D of o){l.push(D.batchId);for(const b of D.mutations)w=w.add(b.key)}for(const D of u){m.push(D.batchId);for(const b of D.mutations)w=w.add(b.key)}return t.localDocuments.getDocuments(r,w).next(D=>({er:D,removedBatchIds:l,addedBatchIds:m}))})})}),_0.apply(this,arguments)}function QD(n){const e=st(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function w0(n,e,t){let r=rn(),o=rn();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=gi();return t.forEach((m,w)=>{const D=u.get(m);w.isFoundDocument()!==D.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(bt.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!D.isValidDocument()||w.version.compareTo(D.version)>0||0===w.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):He("LocalStore","Ignoring outdated watch update for ",m,". Current version:",D.version," Watch version:",w.version)}),{nr:l,sr:o}})}function FS(n,e){const t=st(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Zc(n,e){const t=st(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Bs.getTargetData(r,e).next(u=>u?(o=u,ce.resolve(o)):t.Bs.allocateTargetId(r).next(l=>(o=new Ra(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ji.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Kc(n,e,t){return E0.apply(this,arguments)}function E0(){return E0=(0,Ae.Z)(function*(n,e,t){const r=st(n),o=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!Ca(l))throw l;He("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(o.target)}),E0.apply(this,arguments)}function Gm(n,e,t){const r=st(n);let o=bt.min(),u=rn();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,D){const b=st(m),N=b.Yi.get(D);return void 0!==N?ce.resolve(b.Ji.get(N)):b.Bs.getTargetData(w,D)}(r,l,qi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?o:bt.min(),t?u:rn())).next(m=>(D0(r,V_(e),m),{documents:m,ir:u})))}function I0(n,e){const t=st(n),r=st(t.Bs),o=t.Ji.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function XD(n,e){const t=st(n),r=t.Xi.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Zi.getAllFromCollectionGroup(o,e,m_(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(D0(t,e,o),o))}function D0(n,e,t){let r=n.Xi.get(e)||bt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function Wm(){return Wm=(0,Ae.Z)(function*(n,e,t,r){const o=st(n);let u=rn(),l=gi();for(const D of t){const b=e.rr(D.metadata.name);D.document&&(u=u.add(b));const N=e.ur(D);N.setReadTime(e.cr(D.metadata.readTime)),l=l.insert(b,N)}const m=o.Zi.newChangeBuffer({trackRemovals:!0}),w=yield Zc(o,(D=r,qi(dd(xn.fromString(`__bundle__/docs/${D}`)))));var D;return o.persistence.runTransaction("Apply bundle documents","readwrite",D=>w0(D,m,l).next(b=>(m.apply(D),b)).next(b=>o.Bs.removeMatchingKeysForTargetId(D,w.targetId).next(()=>o.Bs.addMatchingKeys(D,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(D,b.nr,b.sr)).next(()=>b.nr)))}),Wm.apply(this,arguments)}function tC(n,e){return C0.apply(this,arguments)}function C0(){return C0=(0,Ae.Z)(function*(n,e,t=rn()){const r=yield Zc(n,qi(n0(e.bundledQuery))),o=st(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=Ur(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.qs.saveNamedQuery(u,e);const m=r.withResumeToken(Wr.EMPTY_BYTE_STRING,l);return o.Ji=o.Ji.insert(m.targetId,m),o.Bs.updateTargetData(u,m).next(()=>o.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>o.qs.saveNamedQuery(u,e))})}),C0.apply(this,arguments)}function nC(n,e){return`firestore_clients_${n}_${e}`}function LS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function qm(n,e){return`firestore_targets_${n}_${e}`}class b0{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static ar(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new Fe(o.error.code,o.error.message))),l?new b0(e,t,o.state,u):(Vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zm{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Fe(r.error.code,r.error.message))),u?new Zm(e,r.state,o):(Vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class T0{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=sD();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=BT(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new T0(e,u):(Vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class rC{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new rC(t.clientId,t.onlineState):(Vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class iC{constructor(){this.activeTargetIds=sD()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sC{constructor(e,t,r,o,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new cr(Kt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=nC(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new iC),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.syncEngine.$i();for(const o of t){if(o===e.wr)continue;const u=e.getItem(nC(e.persistenceKey,o));if(u){const l=T0.ar(o,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const o=e.br(r);o&&e.Vr(o)}for(const o of e.yr)e.mr(o);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(qm(this.persistenceKey,e));if(r){const o=Zm.ar(e,r);o&&(t=o.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qm(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Cr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return He("SharedClientState","READ",e,t),t}setItem(e,t){He("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){He("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(He("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ae.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const o=t.Or(r.key);return t.Fr(o,null)}{const o=t.Br(r.key,r.newValue);if(o)return t.Fr(o.clientId,o)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const o=t.Lr(r.key,r.newValue);if(o)return t.qr(o)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const o=t.Ur(r.key,r.newValue);if(o)return t.Kr(o)}}else if(r.key===t.vr){if(null!==r.newValue){const o=t.br(r.newValue);if(o)return t.Vr(o)}}else if(r.key===t.Ir){const o=function(u){let l=Hi.ct;if(null!=u)try{const m=JSON.parse(u);Ct("number"==typeof m),l=m}catch(m){Vr("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);o!==Hi.ct&&t.sequenceNumberHandler(o)}else if(r.key===t.Rr){const o=t.Gr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const o=new b0(this.currentUser,e,t,r),u=LS(this.persistenceKey,this.currentUser,e);this.setItem(u,o.hr())}Cr(e){const t=LS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const o=qm(this.persistenceKey,e),u=new Zm(e,t,r);this.setItem(o,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return T0.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),o=Number(r[1]);return b0.ar(new pi(void 0!==r[2]?r[2]:null),o,t)}Ur(e,t){const r=this.Ar.exec(e),o=Number(r[1]);return Zm.ar(o,t)}br(e){return rC.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);He("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),o=this.Sr(this.gr),u=this.Sr(r),l=[],m=[];return u.forEach(w=>{o.has(w)||l.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Wr(l,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=sD();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class VS{constructor(){this.Hr=new iC,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new iC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ax{Yr(e){}shutdown(){}}class US{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){He("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){He("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Uf=null;function Bf(){return null===Uf?Uf=268435456+Math.round(2147483648*Math.random()):Uf++,"0x"+Uf.toString(16)}const oC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BS{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ii="WebChannelConnection";class $S extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,o,u){const l=Bf(),m=this.To(e,t);He("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const w={};return this.Eo(w,o,u),this.Ao(e,m,w,r).then(D=>(He("RestConnection",`Received RPC '${e}' ${l}: `,D),D),D=>{throw hs("RestConnection",`RPC '${e}' ${l} failed with error: `,D,"url: ",m,"request:",r),D})}vo(e,t,r,o,u,l){return this.Io(e,t,r,o,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+_u,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}To(e,t){return`${this.mo}/v1/${t}:${oC[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,o){const u=Bf();return new Promise((l,m)=>{const w=new Yh;w.setWithCredentials(!0),w.listenOnce(um.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case Kh.NO_ERROR:const b=w.getResponseJson();He(ii,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),l(b);break;case Kh.TIMEOUT:He(ii,`RPC '${e}' ${u} timed out`),m(new Fe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Kh.HTTP_ERROR:const N=w.getStatus();if(He(ii,`RPC '${e}' ${u} failed with status:`,N,"response text:",w.getResponseText()),N>0){let K=w.getResponseJson();Array.isArray(K)&&(K=K[0]);const re=K?.error;if(re&&re.status&&re.message){const Se=function(qe){const Ze=qe.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(Ze)>=0?Ze:fe.UNKNOWN}(re.status);m(new Fe(Se,re.message))}else m(new Fe(fe.UNKNOWN,"Server responded with status "+w.getStatus()))}else m(new Fe(fe.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{He(ii,`RPC '${e}' ${u} completed.`)}});const D=JSON.stringify(o);He(ii,`RPC '${e}' ${u} sending request:`,o),w.send(t,"POST",D,r,15)})}Ro(e,t,r){const o=Bf(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=h_(),m=Zh(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},D=this.longPollingOptions.timeoutSeconds;void 0!==D&&(w.longPollingTimeout=Math.round(1e3*D)),this.useFetchStreams&&(w.xmlHttpFactory=new EI({})),this.Eo(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const b=u.join("");He(ii,`Creating RPC '${e}' stream ${o}: ${b}`,w);const N=l.createWebChannel(b,w);let K=!1,re=!1;const Se=new BS({ro:Ze=>{re?He(ii,`Not sending because RPC '${e}' stream ${o} is closed:`,Ze):(K||(He(ii,`Opening RPC '${e}' stream ${o} transport.`),N.open(),K=!0),He(ii,`RPC '${e}' stream ${o} sending:`,Ze),N.send(Ze))},oo:()=>N.close()}),qe=(Ze,At,$t)=>{Ze.listen(At,Ot=>{try{$t(Ot)}catch(Ht){setTimeout(()=>{throw Ht},0)}})};return qe(N,cm.EventType.OPEN,()=>{re||He(ii,`RPC '${e}' stream ${o} transport opened.`)}),qe(N,cm.EventType.CLOSE,()=>{re||(re=!0,He(ii,`RPC '${e}' stream ${o} transport closed`),Se.wo())}),qe(N,cm.EventType.ERROR,Ze=>{re||(re=!0,hs(ii,`RPC '${e}' stream ${o} transport errored:`,Ze),Se.wo(new Fe(fe.UNAVAILABLE,"The operation could not be completed")))}),qe(N,cm.EventType.MESSAGE,Ze=>{var At;if(!re){const $t=Ze.data[0];Ct(!!$t);const Ht=$t.error||(null===(At=$t[0])||void 0===At?void 0:At.error);if(Ht){He(ii,`RPC '${e}' stream ${o} received error:`,Ht);const cn=Ht.status;let Vn=function(up){const oO=qr[up];if(void 0!==oO)return mD(oO)}(cn),ms=Ht.message;void 0===Vn&&(Vn=fe.INTERNAL,ms="Unknown error status: "+cn+" with message "+Ht.message),re=!0,Se.wo(new Fe(Vn,ms)),N.close()}else He(ii,`RPC '${e}' stream ${o} received:`,$t),Se._o($t)}}),qe(m,wI.STAT_EVENT,Ze=>{Ze.stat===td.PROXY?He(ii,`RPC '${e}' stream ${o} detected buffering proxy`):Ze.stat===td.NOPROXY&&He(ii,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{Se.fo()},0),Se}}function jS(){return typeof window<"u"?window:null}function S0(){return typeof document<"u"?document:null}function $f(n){return new ID(n,!0)}class Km{constructor(e,t,r=1e3,o=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=o,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),o=Math.max(0,t-r);o>0&&He("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,o,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class aC{constructor(e,t,r,o,u,l,m,w){this.ii=e,this.$o=r,this.Oo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Km(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ae.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ae.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Ae.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Vr(t.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Fo===t&&this.Zo(r,o)},r=>{e(()=>{const o=new Fe(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(o)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(o=>{r(()=>this.tu(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Go(){var e=this;this.state=5,this.qo.No((0,Ae.Z)(function*(){e.state=0,e.start()}))}tu(e){return He("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(He("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zS extends aC{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function gS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:gt(),o=e.targetChange.targetIds||[],u=function(w,D){return w.useProto3Json?(Ct(void 0===D||"string"==typeof D),Wr.fromBase64String(D||"")):(Ct(void 0===D||D instanceof Uint8Array),Wr.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const D=void 0===w.code?fe.UNKNOWN:mD(w.code);return new Fe(D,w.message||"")}(l);t=new q_(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=_o(n,r.document.name),u=Ur(r.document.updateTime),l=r.document.createTime?Ur(r.document.createTime):bt.min(),m=new Si({mapValue:{fields:r.document.fields}}),w=gr.newFoundDocument(o,u,l,m);t=new md(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,o=_o(n,r.document),u=r.readTime?Ur(r.readTime):bt.min(),l=gr.newNoDocument(o,u);t=new md([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=_o(n,r.document);t=new md([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return gt();{const r=e.filter,{count:o=0,unchangedNames:u}=r,l=new dS(o,u);t=new xm(r.targetId,l)}}var w;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return bt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?bt.min():u.readTime?Ur(u.readTime):bt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=vd(this.serializer),t.addTarget=function(o,u){let l;const m=u.target;if(l=Fc(m)?{documents:e0(o,m)}:{query:t0(o,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=Om(o,u.resumeToken);const w=Z_(o,u.expectedCount);null!==w&&(l.expectedCount=w)}else if(u.snapshotVersion.compareTo(bt.min())>0){l.readTime=If(o,u.snapshotVersion.toTimestamp());const w=Z_(o,u.expectedCount);null!==w&&(l.expectedCount=w)}return l}(this.serializer,e);const r=function sx(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=vd(this.serializer),t.removeTarget=e,this.Wo(t)}}class HS extends aC{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function ix(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,o){let u=Ur(r.updateTime?r.updateTime:o);return u.isEqual(bt.min())&&(u=Ur(o)),new cS(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.cu(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=vd(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>bf(this.serializer,r))};this.Wo(t)}}class ux extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.lu=!1}fu(){if(this.lu)throw new Fe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Io(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Fe(fe.UNKNOWN,o.toString())})}vo(e,t,r,o){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Fe(fe.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class uC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Vr(t),this.mu=!1):He("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class cx{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,Ae.Z)(function*(){var w;Pa(l)&&(He("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,Ae.Z)(function*(D){const b=st(D);b.vu.add(4),yield Td(b),b.bu.set("Unknown"),b.vu.delete(4),yield Ki(b)}),function(D){return w.apply(this,arguments)})(l))}))}),this.bu=new uC(r,o)}}function Ki(n){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,Ae.Z)(function*(n){if(Pa(n))for(const e of n.Ru)yield e(!0)}),Qm.apply(this,arguments)}function Td(n){return cC.apply(this,arguments)}function cC(){return cC=(0,Ae.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),cC.apply(this,arguments)}function yi(n,e){const t=st(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Hf(t)?A0(t):Yc(t).Ko()&&zf(t,e))}function jf(n,e){const t=st(n),r=Yc(t);t.Au.delete(e),r.Ko()&&lC(t,e),0===t.Au.size&&(r.Ko()?r.jo():Pa(t)&&t.bu.set("Unknown"))}function zf(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(bt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yc(n).su(e)}function lC(n,e){n.Vu.qt(e),Yc(n).iu(e)}function A0(n){n.Vu=new hS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Yc(n).start(),n.bu.gu()}function Hf(n){return Pa(n)&&!Yc(n).Uo()&&n.Au.size>0}function Pa(n){return 0===st(n).vu.size}function M0(n){n.Vu=void 0}function WS(n){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,Ae.Z)(function*(n){n.Au.forEach((e,t)=>{zf(n,e)})}),Jm.apply(this,arguments)}function dC(n,e){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,Ae.Z)(function*(n,e){M0(n),Hf(n)?(n.bu.Iu(e),A0(n)):n.bu.set("Unknown")}),Xm.apply(this,arguments)}function hC(n,e,t){return x0.apply(this,arguments)}function x0(){return x0=(0,Ae.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof q_&&2===e.state&&e.cause)try{yield(r=(0,Ae.Z)(function*(o,u){const l=u.cause;for(const m of u.targetIds)o.Au.has(m)&&(yield o.remoteSyncer.rejectListen(m,l),o.Au.delete(m),o.Vu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){He("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Gf(n,r)}else if(e instanceof md?n.Vu.Ht(e):e instanceof xm?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(bt.min()))try{const r=yield QD(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.Vu.ce(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const D=o.Au.get(w);D&&o.Au.set(w,D.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach((m,w)=>{const D=o.Au.get(m);if(!D)return;o.Au.set(m,D.withResumeToken(Wr.EMPTY_BYTE_STRING,D.snapshotVersion)),lC(o,m);const b=new Ra(D.target,m,w,D.sequenceNumber);zf(o,b)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){He("RemoteStore","Failed to raise snapshot:",r),yield Gf(n,r)}var r}),x0.apply(this,arguments)}function Gf(n,e,t){return R0.apply(this,arguments)}function R0(){return R0=(0,Ae.Z)(function*(n,e,t){if(!Ca(e))throw e;n.vu.add(1),yield Td(n),n.bu.set("Offline"),t||(t=()=>QD(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ae.Z)(function*(){He("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Ki(n)}))}),R0.apply(this,arguments)}function ey(n,e){return e().catch(t=>Gf(n,t,e))}function As(n){return ty.apply(this,arguments)}function ty(){return ty=(0,Ae.Z)(function*(n){const e=st(n),t=ka(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;N0(e);)try{const o=yield FS(e.localStore,r);if(null===o){0===e.Eu.length&&t.jo();break}r=o.batchId,O0(e,o)}catch(o){yield Gf(e,o)}fC(e)&&qS(e)}),ty.apply(this,arguments)}function N0(n){return Pa(n)&&n.Eu.length<10}function O0(n,e){n.Eu.push(e);const t=ka(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function fC(n){return Pa(n)&&!ka(n).Uo()&&n.Eu.length>0}function qS(n){ka(n).start()}function pC(n){return P0.apply(this,arguments)}function P0(){return P0=(0,Ae.Z)(function*(n){ka(n).hu()}),P0.apply(this,arguments)}function ZS(n){return k0.apply(this,arguments)}function k0(){return k0=(0,Ae.Z)(function*(n){const e=ka(n);for(const t of n.Eu)e.uu(t.mutations)}),k0.apply(this,arguments)}function KS(n,e,t){return ny.apply(this,arguments)}function ny(){return ny=(0,Ae.Z)(function*(n,e,t){const r=n.Eu.shift(),o=H_.from(r,e,t);yield ey(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield As(n)}),ny.apply(this,arguments)}function lx(n,e){return ry.apply(this,arguments)}function ry(){return ry=(0,Ae.Z)(function*(n,e){var t;e&&ka(n).ou&&(yield(t=(0,Ae.Z)(function*(r,o){if(gD(u=o.code)&&u!==fe.ABORTED){const l=r.Eu.shift();ka(r).Qo(),yield ey(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield As(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),fC(n)&&qS(n)}),ry.apply(this,arguments)}function gC(n,e){return iy.apply(this,arguments)}function iy(){return iy=(0,Ae.Z)(function*(n,e){const t=st(n);t.asyncQueue.verifyOperationInProgress(),He("RemoteStore","RemoteStore received new credentials");const r=Pa(t);t.vu.add(3),yield Td(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Ki(t)}),iy.apply(this,arguments)}function mC(n,e){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,Ae.Z)(function*(n,e){const t=st(n);e?(t.vu.delete(2),yield Ki(t)):e||(t.vu.add(2),yield Td(t),t.bu.set("Unknown"))}),Wf.apply(this,arguments)}function Yc(n){return n.Su||(n.Su=function(e,t,r){const o=st(e);return o.fu(),new zS(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:WS.bind(null,n),ao:dC.bind(null,n),nu:hC.bind(null,n)}),n.Ru.push(function(){var e=(0,Ae.Z)(function*(t){t?(n.Su.Qo(),Hf(n)?A0(n):n.bu.set("Unknown")):(yield n.Su.stop(),M0(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function ka(n){return n.Du||(n.Du=function(e,t,r){const o=st(e);return o.fu(),new HS(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:pC.bind(null,n),ao:lx.bind(null,n),au:ZS.bind(null,n),cu:KS.bind(null,n)}),n.Ru.push(function(){var e=(0,Ae.Z)(function*(t){t?(n.Du.Qo(),yield As(n)):(yield n.Du.stop(),n.Eu.length>0&&(He("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class F0{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,m=new F0(e,t,l,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qc(n,e){if(Vr("AsyncQueue",`${e}: ${n}`),Ca(n))return new Fe(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Jc{constructor(e){this.comparator=e?(t,r)=>e(t,r)||et.comparator(t.key,r.key):(t,r)=>et.comparator(t.key,r.key),this.keyedMap=pf(),this.sortedSet=new cr(this.comparator)}static emptySet(e){return new Jc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Jc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Xc{constructor(){this.Cu=new cr(et.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):gt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Fa{constructor(e,t,r,o,u,l,m,w,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new Fa(e,t,Jc.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class yC{constructor(){this.Nu=void 0,this.listeners=[]}}class vC{constructor(){this.queries=new Ma(e=>eD(e),hf),this.onlineState="Unknown",this.ku=new Set}}function L0(n,e){return V0.apply(this,arguments)}function V0(){return V0=(0,Ae.Z)(function*(n,e){const t=st(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new yC),o)try{u.Nu=yield t.onListen(r)}catch(l){const m=Qc(l,`Initialization of query '${L_(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&wC(t)}),V0.apply(this,arguments)}function _C(n,e){return sy.apply(this,arguments)}function sy(){return sy=(0,Ae.Z)(function*(n,e){const t=st(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),sy.apply(this,arguments)}function YS(n,e){const t=st(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const m of l.listeners)m.$u(o)&&(r=!0);l.Nu=o}}r&&wC(t)}function QS(n,e,t){const r=st(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function wC(n){n.ku.forEach(e=>{e.next()})}class EC{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class dx{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class U0{constructor(e){this.serializer=e}rr(e){return _o(this.serializer,e)}ur(e){return e.metadata.exists?DD(this.serializer,e.document,!1):gr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ur(e)}}class JS{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=IC(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=xn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new U0(this.serializer);for(const o of e)if(o.metadata.queries){const u=r.rr(o.metadata.name);for(const l of o.metadata.queries){const m=(t.get(l)||rn()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,Ae.Z)(function*(){const t=yield function eC(n,e,t,r){return Wm.apply(this,arguments)}(e.localStore,new U0(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const o of e.queries)yield tC(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function IC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class DC{constructor(e){this.key=e}}class XS{constructor(e){this.key=e}}class eA{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=rn(),this.mutatedKeys=rn(),this.tc=U_(e),this.ec=new Jc(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new Xc,o=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,D="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((b,N)=>{const K=o.get(b),re=bu(this.query,N)?N:null,Se=!!K&&this.mutatedKeys.has(K.key),qe=!!re&&(re.hasLocalMutations||this.mutatedKeys.has(re.key)&&re.hasCommittedMutations);let Ze=!1;K&&re?K.data.isEqual(re.data)?Se!==qe&&(r.track({type:3,doc:re}),Ze=!0):this.rc(K,re)||(r.track({type:2,doc:re}),Ze=!0,(w&&this.tc(re,w)>0||D&&this.tc(re,D)<0)&&(m=!0)):!K&&re?(r.track({type:0,doc:re}),Ze=!0):K&&!re&&(r.track({type:1,doc:K}),Ze=!0,(w||D)&&(m=!0)),Ze&&(re?(l=l.add(re),u=qe?u.add(b):u.delete(b)):(l=l.delete(b),u=u.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{ec:l,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((D,b)=>function(N,K){const re=Se=>{switch(Se){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return re(N)-re(K)}(D.type,b.type)||this.tc(D.doc,b.doc)),this.oc(r);const l=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,w=m!==this.Xu;return this.Xu=m,0!==u.length||w?{snapshot:new Fa(this.query,e.ec,o,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Xc,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=rn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new XS(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new DC(r))}),t}hc(e){this.Yu=e.ir,this.Zu=rn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Fa.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class hx{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class fx{constructor(e){this.key=e,this.fc=!1}}class px{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Ma(m=>eD(m),hf),this._c=new Map,this.mc=new Set,this.gc=new cr(et.comparator),this.yc=new Map,this.Ic=new Lf,this.Tc={},this.Ec=new Map,this.Ac=Hc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function tA(n,e){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,Ae.Z)(function*(n,e){const t=Kf(n);let r,o;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.lc();else{const l=yield Zc(t.localStore,qi(e)),m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield B0(t,e,r,"current"===m,l.resumeToken),t.isPrimaryClient&&yi(t.remoteStore,l)}return o}),Sd.apply(this,arguments)}function B0(n,e,t,r,o){return $0.apply(this,arguments)}function $0(){return $0=(0,Ae.Z)(function*(n,e,t,r,o){n.Rc=(N,K,re)=>{return(Se=(0,Ae.Z)(function*(qe,Ze,At,$t){let Ot=Ze.view.sc(At);Ot.zi&&(Ot=yield Gm(qe.localStore,Ze.query,!1).then(({documents:Vn})=>Ze.view.sc(Vn,Ot)));const Ht=$t&&$t.targetChanges.get(Ze.targetId),cn=Ze.view.applyChanges(Ot,qe.isPrimaryClient,Ht);return cy(qe,Ze.targetId,cn.cc),cn.snapshot}),function(qe,Ze,At,$t){return Se.apply(this,arguments)})(n,N,K,re);var Se};const u=yield Gm(n.localStore,e,!0),l=new eA(e,u.ir),m=l.sc(u.documents),w=Ef.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),D=l.applyChanges(m,n.isPrimaryClient,w);cy(n,t,D.cc);const b=new hx(e,t,l);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),D.snapshot}),$0.apply(this,arguments)}function CC(n,e){return La.apply(this,arguments)}function La(){return La=(0,Ae.Z)(function*(n,e){const t=st(n),r=t.wc.get(e),o=t._c.get(r.targetId);if(o.length>1)return t._c.set(r.targetId,o.filter(u=>!hf(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Kc(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),jf(t.remoteStore,r.targetId),el(t,r.targetId)}).catch(Da))):(el(t,r.targetId),yield Kc(t.localStore,r.targetId,!0))}),La.apply(this,arguments)}function qf(){return qf=(0,Ae.Z)(function*(n,e,t){const r=nw(n);try{const o=yield function(u,l){const m=st(u),w=ur.now(),D=l.reduce((K,re)=>K.add(re.key),rn());let b,N;return m.persistence.runTransaction("Locally write mutations","readwrite",K=>{let re=gi(),Se=rn();return m.Zi.getEntries(K,D).next(qe=>{re=qe,re.forEach((Ze,At)=>{At.isValidDocument()||(Se=Se.add(Ze))})}).next(()=>m.localDocuments.getOverlayedDocuments(K,re)).next(qe=>{b=qe;const Ze=[];for(const At of l){const $t=hD(At,b.get(At.key).overlayedDocument);null!=$t&&Ze.push(new xa(At.key,$t,KI($t.value.mapValue),Xn.exists(!0)))}return m.mutationQueue.addMutationBatch(K,w,Ze,l)}).next(qe=>{N=qe;const Ze=qe.applyToLocalDocumentSet(b,Se);return m.documentOverlayCache.saveOverlays(K,qe.batchId,Ze)})}).then(()=>({batchId:N.batchId,changes:rD(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,m){let w=u.Tc[u.currentUser.toKey()];w||(w=new cr(Kt)),w=w.insert(l,m),u.Tc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield Jo(r,o.changes),yield As(r.remoteStore)}catch(o){const u=Qc(o,"Failed to persist write");t.reject(u)}}),qf.apply(this,arguments)}function oy(n,e){return j0.apply(this,arguments)}function j0(){return j0=(0,Ae.Z)(function*(n,e){const t=st(n);try{const r=yield function JD(n,e){const t=st(n),r=e.snapshotVersion;let o=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});o=t.Ji;const m=[];e.targetChanges.forEach((b,N)=>{const K=o.get(N);if(!K)return;m.push(t.Bs.removeMatchingKeys(u,b.removedDocuments,N).next(()=>t.Bs.addMatchingKeys(u,b.addedDocuments,N)));let re=K.withSequenceNumber(u.currentSequenceNumber);var Se,qe,Ze;null!==e.targetMismatches.get(N)?re=re.withResumeToken(Wr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):b.resumeToken.approximateByteSize()>0&&(re=re.withResumeToken(b.resumeToken,r)),o=o.insert(N,re),qe=re,Ze=b,(0===(Se=K).resumeToken.approximateByteSize()||qe.snapshotVersion.toMicroseconds()-Se.snapshotVersion.toMicroseconds()>=3e8||Ze.addedDocuments.size+Ze.modifiedDocuments.size+Ze.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,re))});let w=gi(),D=rn();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),m.push(w0(u,l,e.documentUpdates).next(b=>{w=b.nr,D=b.sr})),!r.isEqual(bt.min())){const b=t.Bs.getLastRemoteSnapshotVersion(u).next(N=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(b)}return ce.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,D)).next(()=>w)}).then(u=>(t.Ji=o,u))}(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.yc.get(u);l&&(Ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.fc=!0:o.modifiedDocuments.size>0?Ct(l.fc):o.removedDocuments.size>0&&(Ct(l.fc),l.fc=!1))}),yield Jo(t,r,e)}catch(r){yield Da(r)}}),j0.apply(this,arguments)}function ay(n,e,t){const r=st(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.wc.forEach((u,l)=>{const m=l.view.Mu(e);m.snapshot&&o.push(m.snapshot)}),function(u,l){const m=st(u);m.onlineState=l;let w=!1;m.queries.forEach((D,b)=>{for(const N of b.listeners)N.Mu(l)&&(w=!0)}),w&&wC(m)}(r.eventManager,e),o.length&&r.dc.nu(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function z0(n,e,t){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,Ae.Z)(function*(n,e,t){const r=st(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.yc.get(e),u=o&&o.key;if(u){let l=new cr(et.comparator);l=l.insert(u,gr.newNoDocument(u,bt.min()));const m=rn().add(u),w=new wf(bt.min(),new Map,new cr(Kt),l,m);yield oy(r,w),r.gc=r.gc.remove(u),r.yc.delete(e),Z0(r)}else yield Kc(r.localStore,e,!1).then(()=>el(r,e,t)).catch(Da)}),Ad.apply(this,arguments)}function gx(n,e){return TC.apply(this,arguments)}function TC(){return TC=(0,Ae.Z)(function*(n,e){const t=st(n),r=e.batch.batchId;try{const o=yield function kS(n,e){const t=st(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,m,w,D){const b=w.batch,N=b.keys();let K=ce.resolve();return N.forEach(re=>{K=K.next(()=>D.getEntry(m,re)).next(Se=>{const qe=w.docVersions.get(re);Ct(null!==qe),Se.version.compareTo(qe)<0&&(b.applyToRemoteDocument(Se,w),Se.isValidDocument()&&(Se.setReadTime(w.commitVersion),D.addEntry(Se)))})}),K.next(()=>l.mutationQueue.removeMutationBatch(m,b))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=rn();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}(t.localStore,e);W0(t,r,null),G0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Jo(t,o)}catch(o){yield Da(o)}}),TC.apply(this,arguments)}function mx(n,e,t){return uy.apply(this,arguments)}function uy(){return uy=(0,Ae.Z)(function*(n,e,t){const r=st(n);try{const o=yield function(u,l){const m=st(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let D;return m.mutationQueue.lookupMutationBatch(w,l).next(b=>(Ct(null!==b),D=b.keys(),m.mutationQueue.removeMutationBatch(w,b))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,D,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,D)).next(()=>m.localDocuments.getDocuments(w,D))})}(r.localStore,e);W0(r,e,t),G0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Jo(r,o)}catch(o){yield Da(o)}}),uy.apply(this,arguments)}function H0(){return H0=(0,Ae.Z)(function*(n,e){const t=st(n);Pa(t.remoteStore)||He("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=st(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Ec.get(r)||[];o.push(e),t.Ec.set(r,o)}catch(r){const o=Qc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),H0.apply(this,arguments)}function G0(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function W0(n,e,t){const r=st(n);let o=r.Tc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Tc[r.currentUser.toKey()]=o}}function el(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||q0(n,r)})}function q0(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(jf(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),Z0(n))}function cy(n,e,t){for(const r of t)r instanceof DC?(n.Ic.addReference(r.key,e),rA(n,r)):r instanceof XS?(He("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||q0(n,r.key)):gt()}function rA(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(He("SyncEngine","New document in limbo: "+t),n.mc.add(r),Z0(n))}function Z0(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new et(xn.fromString(e)),r=n.Ac.next();n.yc.set(r,new fx(t)),n.gc=n.gc.insert(t,r),yi(n.remoteStore,new Ra(qi(dd(t.path)),r,"TargetPurposeLimboResolution",Hi.ct))}}function Jo(n,e,t){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,Ae.Z)(function*(n,e,t){const r=st(n),o=[],u=[],l=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,w)=>{l.push(r.Rc(w,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,D?.fromCache?"not-current":"current"),D){o.push(D);const b=zm.Li(w.targetId,D);u.push(b)}}))}),yield Promise.all(l),r.dc.nu(o),yield(m=(0,Ae.Z)(function*(w,D){const b=st(w);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ce.forEach(D,K=>ce.forEach(K.Fi,re=>b.persistence.referenceDelegate.addReference(N,K.targetId,re)).next(()=>ce.forEach(K.Bi,re=>b.persistence.referenceDelegate.removeReference(N,K.targetId,re)))))}catch(N){if(!Ca(N))throw N;He("LocalStore","Failed to update sequence numbers: "+N)}for(const N of D){const K=N.targetId;if(!N.fromCache){const re=b.Ji.get(K),qe=re.withLastLimboFreeSnapshotVersion(re.snapshotVersion);b.Ji=b.Ji.insert(K,qe)}}}),function(w,D){return m.apply(this,arguments)})(r.localStore,u))}),Zf.apply(this,arguments)}function yx(n,e){return ly.apply(this,arguments)}function ly(){return ly=(0,Ae.Z)(function*(n,e){const t=st(n);if(!t.currentUser.isEqual(e)){He("SyncEngine","User change. New user:",e.toKey());const r=yield PS(t.localStore,e);t.currentUser=e,(o=t).Ec.forEach(l=>{l.forEach(m=>{m.reject(new Fe(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Jo(t,r.er)}var o}),ly.apply(this,arguments)}function K0(n,e){const t=st(n),r=t.yc.get(e);if(r&&r.fc)return rn().add(r.key);{let o=rn();const u=t._c.get(e);if(!u)return o;for(const l of u){const m=t.wc.get(l);o=o.unionWith(m.view.nc)}return o}}function iA(n,e){return Y0.apply(this,arguments)}function Y0(){return Y0=(0,Ae.Z)(function*(n,e){const t=st(n),r=yield Gm(t.localStore,e.query,!0),o=e.view.hc(r);return t.isPrimaryClient&&cy(t,e.targetId,o.cc),o}),Y0.apply(this,arguments)}function vx(n,e){return SC.apply(this,arguments)}function SC(){return SC=(0,Ae.Z)(function*(n,e){const t=st(n);return XD(t.localStore,e).then(r=>Jo(t,r))}),SC.apply(this,arguments)}function sA(n,e,t,r){return Q0.apply(this,arguments)}function Q0(){return Q0=(0,Ae.Z)(function*(n,e,t,r){const o=st(n),u=yield function(l,m){const w=st(l),D=st(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",b=>D.Sn(b,m).next(N=>N?w.localDocuments.getDocuments(b,N):ce.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield As(o.remoteStore):"acknowledged"===t||"rejected"===t?(W0(o,e,r||null),G0(o,e),m=e,st(st(o.localStore).mutationQueue).Cn(m)):gt(),yield Jo(o,u)):He("SyncEngine","Cannot apply mutation batch with id: "+e)}),Q0.apply(this,arguments)}function J0(){return J0=(0,Ae.Z)(function*(n,e){const t=st(n);if(Kf(t),nw(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield X0(t,r.toArray());t.vc=!0,yield mC(t.remoteStore,!0);for(const u of o)yi(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let o=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(el(t,l),Kc(t.localStore,l,!0))),jf(t.remoteStore,l)}),yield o,yield X0(t,r),function(u){const l=st(u);l.yc.forEach((m,w)=>{jf(l.remoteStore,w)}),l.Ic.Ts(),l.yc=new Map,l.gc=new cr(et.comparator)}(t),t.vc=!1,yield mC(t.remoteStore,!1)}}),J0.apply(this,arguments)}function X0(n,e,t){return dy.apply(this,arguments)}function dy(){return dy=(0,Ae.Z)(function*(n,e,t){const r=st(n),o=[],u=[];for(const l of e){let m;const w=r._c.get(l);if(w&&0!==w.length){m=yield Zc(r.localStore,qi(w[0]));for(const D of w){const b=r.wc.get(D),N=yield iA(r,b);N.snapshot&&u.push(N.snapshot)}}else{const D=yield I0(r.localStore,l);m=yield Zc(r.localStore,D),yield B0(r,aA(D),l,!1,m.resumeToken)}o.push(m)}return r.dc.nu(u),o}),dy.apply(this,arguments)}function aA(n){return P_(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function uA(n){const e=st(n);return st(st(e.localStore).persistence).$i()}function ew(n,e,t,r){return hy.apply(this,arguments)}function hy(){return hy=(0,Ae.Z)(function*(n,e,t,r){const o=st(n);if(o.vc)return void He("SyncEngine","Ignoring unexpected query state notification.");const u=o._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield XD(o.localStore,V_(u[0])),m=wf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Wr.EMPTY_BYTE_STRING);yield Jo(o,l,m);break}case"rejected":yield Kc(o.localStore,e,!0),el(o,e,r);break;default:gt()}}),hy.apply(this,arguments)}function AC(n,e,t){return tw.apply(this,arguments)}function tw(){return tw=(0,Ae.Z)(function*(n,e,t){const r=Kf(n);if(r.vc){for(const o of e){if(r._c.has(o)){He("SyncEngine","Adding an already active target "+o);continue}const u=yield I0(r.localStore,o),l=yield Zc(r.localStore,u);yield B0(r,aA(u),l.targetId,!1,l.resumeToken),yi(r.remoteStore,l)}for(const o of t)r._c.has(o)&&(yield Kc(r.localStore,o,!1).then(()=>{jf(r.remoteStore,o),el(r,o)}).catch(Da))}}),tw.apply(this,arguments)}function Kf(n){const e=st(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z0.bind(null,e),e.dc.nu=YS.bind(null,e.eventManager),e.dc.Pc=QS.bind(null,e.eventManager),e}function nw(n){const e=st(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mx.bind(null,e),e}class Md{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ae.Z)(function*(){t.serializer=$f(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return YD(this.persistence,new Hm,e.initialUser,this.serializer)}createPersistence(e){return new Vf($m.zs,this.serializer)}createSharedClientState(e){return new VS}terminate(){var e=this;return(0,Ae.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class xC extends Md{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ae.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield nw(r.Vc.syncEngine),yield As(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return YD(this.persistence,new Hm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new g0(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Ac(t,this.persistence);return new __(e.asyncQueue,r)}createPersistence(e){const t=v0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Pi.withCacheSize(this.cacheSizeBytes):Pi.DEFAULT;return new y0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jS(),S0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new VS}}class RC extends xC{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ae.Z)(function*(){yield t().call(r,e);const o=r.Vc.syncEngine;r.sharedClientState instanceof sC&&(r.sharedClientState.syncEngine={jr:sA.bind(null,o),zr:ew.bind(null,o),Wr:AC.bind(null,o),$i:uA.bind(null,o),Qr:vx.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,Ae.Z)(function*(l){yield function oA(n,e){return J0.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=jS();if(!sC.D(t))throw new Fe(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=v0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Va{initialize(e,t){var r=this;return(0,Ae.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>ay(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=yx.bind(null,r.syncEngine),yield mC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new vC}createDatastore(e){const t=$f(e.databaseInfo.databaseId),r=new $S(e.databaseInfo);return new ux(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>ay(this.syncEngine,m,0),l=US.D()?new US:new ax,new cx(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,m,w,D){const b=new px(r,o,u,l,m,w);return D&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ae.Z)(function*(t){const r=st(t);He("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Td(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function lA(n,e=10240){let t=0;return{read:()=>(0,Ae.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ae.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class fy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Vr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class _x{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ti,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ae.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ae.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),o=Number(r);isNaN(o)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(o);return new dx(JSON.parse(u),t.length+o)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ae.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class wx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ae.Z)(function*(u,l){const m=st(u),w=vd(m.serializer)+"/documents",D={documents:l.map(re=>Df(m.serializer,re))},b=yield m.vo("BatchGetDocuments",w,D,l.length),N=new Map;b.forEach(re=>{const Se=function pS(n,e){return"found"in e?function(t,r){Ct(!!r.found);const o=_o(t,r.found.name),u=Ur(r.found.updateTime),l=r.found.createTime?Ur(r.found.createTime):bt.min(),m=new Si({mapValue:{fields:r.found.fields}});return gr.newFoundDocument(o,u,l,m)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const o=_o(t,r.missing),u=Ur(r.readTime);return gr.newNoDocument(o,u)}(n,e):gt()}(m.serializer,re);N.set(Se.key.toString(),Se)});const K=[];return l.forEach(re=>{const Se=N.get(re.toString());Ct(!!Se),K.push(Se)}),K}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new gd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=et.fromPath(o);e.mutations.push(new z_(u,e.precondition(u)))}),yield(r=(0,Ae.Z)(function*(o,u){const l=st(o),m=vd(l.serializer)+"/documents",w={writes:u.map(D=>bf(l.serializer,D))};yield l.Io("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gt();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(bt.min())?Xn.exists(!1):Xn.updateTime(t):Xn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Fe(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xn.updateTime(t)}return Xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class dA{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new Km(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ae.Z)(function*(){const t=new wx(e.datastore),r=e.qc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Uc(u)}))}).catch(o=>{e.Uc(o)})}))}qc(e){try{const t=this.updateFunction(e);return!nf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!gD(t)}return!1}}class Ex{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=pi.UNAUTHENTICATED,this.clientId=TI.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ae.Z)(function*(m){He("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(He("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ae.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ae.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Qc(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function rw(n,e){return NC.apply(this,arguments)}function NC(){return NC=(0,Ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),He("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ae.Z)(function*(u){r.isEqual(u)||(yield PS(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),NC.apply(this,arguments)}function OC(n,e){return PC.apply(this,arguments)}function PC(){return PC=(0,Ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield FC(n);He("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>gC(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>gC(e.remoteStore,u)),n._onlineComponents=e}),PC.apply(this,arguments)}function kC(n){return"FirebaseError"===n.name?n.code===fe.FAILED_PRECONDITION||n.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function FC(n){return LC.apply(this,arguments)}function LC(){return LC=(0,Ae.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){He("FirestoreClient","Using user provided OfflineComponentProvider");try{yield rw(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!kC(t))throw t;hs("Error using user provided cache. Falling back to memory cache: "+t),yield rw(n,new Md)}}else He("FirestoreClient","Using default OfflineComponentProvider"),yield rw(n,new Md);return n._offlineComponents}),LC.apply(this,arguments)}function iw(n){return VC.apply(this,arguments)}function VC(){return VC=(0,Ae.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(He("FirestoreClient","Using user provided OnlineComponentProvider"),yield OC(n,n._uninitializedComponentsProvider._online)):(He("FirestoreClient","Using default OnlineComponentProvider"),yield OC(n,new Va))),n._onlineComponents}),VC.apply(this,arguments)}function hA(n){return FC(n).then(e=>e.persistence)}function py(n){return FC(n).then(e=>e.localStore)}function fA(n){return iw(n).then(e=>e.remoteStore)}function i(n){return iw(n).then(e=>e.syncEngine)}function a(n){return c.apply(this,arguments)}function c(){return c=(0,Ae.Z)(function*(n){const e=yield iw(n),t=e.eventManager;return t.onListen=tA.bind(null,e.syncEngine),t.onUnlisten=CC.bind(null,e.syncEngine),t}),c.apply(this,arguments)}function _(n,e,t={}){const r=new ti;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function(o,u,l,m,w){const D=new fy({next:N=>{u.enqueueAndForget(()=>_C(o,b));const K=N.docs.has(l);!K&&N.fromCache?w.reject(new Fe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):K&&N.fromCache&&m&&"server"===m.source?w.reject(new Fe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),b=new EC(dd(l.path),D,{includeMetadataChanges:!0,Ku:!0});return L0(o,b)}(yield a(n),n.asyncQueue,e,t,r)})),r.promise}function C(n,e,t={}){const r=new ti;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function(o,u,l,m,w){const D=new fy({next:N=>{u.enqueueAndForget(()=>_C(o,b)),N.fromCache&&"server"===m.source?w.reject(new Fe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),b=new EC(l,D,{includeMetadataChanges:!0,Ku:!0});return L0(o,b)}(yield a(n),n.asyncQueue,e,t,r)})),r.promise}function xe(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const ze=new Map;function nt(n,e,t){if(!t)throw new Fe(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Et(n,e,t,r){if(!0===e&&!0===r)throw new Fe(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Pe(n){if(!et.isDocumentKey(n))throw new Fe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Wt(n){if(et.isDocumentKey(n))throw new Fe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yn(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":gt()}function mt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yn(n);throw new Fe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ai(n,e){if(e<=0)throw new Fe(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Yf{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Et("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=xe(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new Fe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Fe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Fe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qf{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yf(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new kT;switch(t.type){case"firstParty":return new LT(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Fe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ze.get(e);t&&(He("ComponentProvider","Removing Datastore"),ze.delete(e),t.terminate())}(this),Promise.resolve()}}function UC(n,e,t,r={}){var o;const u=(n=mt(n,Qf))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&hs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let m,w;if("string"==typeof r.mockUserToken)m=r.mockUserToken,w=pi.MOCK_USER;else{m=(0,An.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const D=r.mockUserToken.sub||r.mockUserToken.user_id;if(!D)throw new Fe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new pi(D)}n._authCredentials=new FT(new DI(m,w))}}class Tr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ou(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tr(this.firestore,e,this._key)}}class Yi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yi(this.firestore,e,this._query)}}class Ou extends Yi{constructor(e,t,r){super(e,t,dd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tr(this.firestore,null,new et(e))}withConverter(e){return new Ou(this.firestore,e,this._path)}}function Ix(n,e,...t){if(n=(0,An.m9)(n),nt("collection","path",e),n instanceof Qf){const r=xn.fromString(e,...t);return Wt(r),new Ou(n,null,r)}{if(!(n instanceof Tr||n instanceof Ou))throw new Fe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xn.fromString(e,...t));return Wt(r),new Ou(n.firestore,null,r)}}function BC(n,e,...t){if(n=(0,An.m9)(n),1===arguments.length&&(e=TI.A()),nt("doc","path",e),n instanceof Qf){const r=xn.fromString(e,...t);return Pe(r),new Tr(n,null,new et(r))}{if(!(n instanceof Tr||n instanceof Ou))throw new Fe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xn.fromString(e,...t));return Pe(r),new Tr(n.firestore,n instanceof Ou?n.converter:null,new et(r))}}function Dx(n,e){return n=(0,An.m9)(n),e=(0,An.m9)(e),(n instanceof Tr||n instanceof Ou)&&(e instanceof Tr||e instanceof Ou)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function pA(n,e){return n=(0,An.m9)(n),e=(0,An.m9)(e),n instanceof Yi&&e instanceof Yi&&n.firestore===e.firestore&&hf(n._query,e._query)&&n.converter===e.converter}class lO{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Km(this,"async_queue_retry"),this.Xc=()=>{const t=S0();t&&He("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=S0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=S0();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ti;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ae.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Ca(t))throw t;He("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Vr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const o=F0.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(o),o}Zc(){this.Wc&&gt()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ae.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function gA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class dO{constructor(){this._progressObserver={},this._taskCompletionResolver=new ti,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Sr extends Qf{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new lO,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Cx(this),this._firestoreClient.terminate()}}function fO(n,e){const t="object"==typeof n?n:(0,ao.getApp)(),r="string"==typeof n?n:e||"(default)",o=(0,ao._getProvider)(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=(0,An.P0)("firestore");u&&UC(o,...u)}return o}function si(n){return n._firestoreClient||Cx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Cx(n){var e,t,r;const o=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new D_(n._databaseId,m,n._persistenceKey,(D=o).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,xe(D.experimentalLongPollingOptions),D.useFetchStreams));var m,D;n._firestoreClient=new Ex(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=o.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=o.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}function bx(n,e,t){const r=new ti;return n.asyncQueue.enqueue((0,Ae.Z)(function*(){try{yield rw(n,t),yield OC(n,e),r.resolve()}catch(o){const u=o;if(!kC(u))throw u;hs("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function Tx(n){if(n._initialized||n._terminated)throw new Fe(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pu(Wr.fromBase64String(e))}catch(t){throw new Fe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pu(Wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class tl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Jf{constructor(e){this._methodName=e}}class $C{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}const DO=/^__.*__$/;class CO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new xa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tu(e,this.data,t,this.fieldTransforms)}}class Sx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ax(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class jC{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new jC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.fa(e),o}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.ua(),o}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return GC(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Ax(this.ca)&&DO.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class bO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||$f(e)}ya(e,t,r,o=!1){return new jC({ca:e,methodName:t,ga:r,path:Cr.emptyPath(),la:!1,ma:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xf(n){const e=n._freezeSettings(),t=$f(n._databaseId);return new bO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zC(n,e,t,r,o,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,o);_A("Data must be an object, but it was:",l,r);const m=Rx(r,l);let w,D;if(u.merge)w=new ps(l.fieldMask),D=l.fieldTransforms;else if(u.mergeFields){const b=[];for(const N of u.mergeFields){const K=aw(e,N,t);if(!l.contains(K))throw new Fe(fe.INVALID_ARGUMENT,`Field '${K}' is specified in your field mask but missing from your input data.`);Ox(b,K)||b.push(K)}w=new ps(b),D=l.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,D=l.fieldTransforms;return new CO(new Si(m),w,D)}class ow extends Jf{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ow}}function Mx(n,e,t){return new jC({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class mA extends Jf{_toFieldTransform(e){return new pd(e.path,new Uc)}isEqual(e){return e instanceof mA}}class TO extends Jf{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Mx(this,e,!0),r=this.pa.map(u=>ep(u,t)),o=new vo(r);return new pd(e.path,o)}isEqual(e){return this===e}}class SO extends Jf{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Mx(this,e,!0),r=this.pa.map(u=>ep(u,t)),o=new Bc(r);return new pd(e.path,o)}isEqual(e){return this===e}}class AO extends Jf{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new fd(e.serializer,sS(e.serializer,this.Ia));return new pd(e.path,t)}isEqual(e){return this===e}}function yA(n,e,t,r){const o=n.ya(1,e,t);_A("Data must be an object, but it was:",o,r);const u=[],l=Si.empty();Eu(r,(w,D)=>{const b=HC(e,w,t);D=(0,An.m9)(D);const N=o.da(b);if(D instanceof ow)u.push(b);else{const K=ep(D,N);null!=K&&(u.push(b),l.set(b,K))}});const m=new ps(u);return new Sx(l,m,o.fieldTransforms)}function vA(n,e,t,r,o,u){const l=n.ya(1,e,t),m=[aw(e,r,t)],w=[o];if(u.length%2!=0)throw new Fe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let K=0;K<u.length;K+=2)m.push(aw(e,u[K])),w.push(u[K+1]);const D=[],b=Si.empty();for(let K=m.length-1;K>=0;--K)if(!Ox(D,m[K])){const re=m[K];let Se=w[K];Se=(0,An.m9)(Se);const qe=l.da(re);if(Se instanceof ow)D.push(re);else{const Ze=ep(Se,qe);null!=Ze&&(D.push(re),b.set(re,Ze))}}const N=new ps(D);return new Sx(b,N,l.fieldTransforms)}function xx(n,e,t,r=!1){return ep(t,n.ya(r?4:3,e))}function ep(n,e){if(Nx(n=(0,An.m9)(n)))return _A("Unsupported field value:",e,n),Rx(n,e);if(n instanceof Jf)return function(t,r){if(!Ax(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let m=ep(l,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,An.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return sS(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=ur.fromDate(t);return{timestampValue:If(r.serializer,o)}}if(t instanceof ur){const o=new ur(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:If(r.serializer,o)}}if(t instanceof $C)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pu)return{bytesValue:Om(r.serializer,t._byteString)};if(t instanceof Tr){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Pm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${yn(t)}`)}(n,e)}function Rx(n,e){const t={};return BI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eu(n,(r,o)=>{const u=ep(o,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Nx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ur||n instanceof $C||n instanceof Pu||n instanceof Tr||n instanceof Jf)}function _A(n,e,t){if(!Nx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=yn(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function aw(n,e,t){if((e=(0,An.m9)(e))instanceof tl)return e._internalPath;if("string"==typeof e)return HC(n,e);throw GC("Field path arguments must be of type string or ",n,!1,void 0,t)}const MO=new RegExp("[~\\*/\\[\\]]");function HC(n,e,t){if(e.search(MO)>=0)throw GC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new tl(...e.split("."))._internalPath}catch{throw GC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function GC(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${o}`),w+=")"),new Fe(fe.INVALID_ARGUMENT,m+n+w)}function Ox(n,e){return n.some(t=>t.isEqual(e))}class uw{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Tr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(WC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xO extends uw{data(){return super.data()}}function WC(n,e){return"string"==typeof e?HC(n,e):e instanceof tl?e._internalPath:e._delegate._internalPath}function Px(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wA{}class cw extends wA{}function xd(n,e,...t){let r=[];e instanceof wA&&r.push(e),r=r.concat(t),function(o){const u=o.filter(m=>m instanceof gy).length,l=o.filter(m=>m instanceof lw).length;if(u>1||u>0&&l>0)throw new Fe(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class lw extends cw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new lw(e,t,r)}_apply(e){const t=this._parse(e);return Vx(e._query,t),new Yi(e.firestore,e.converter,F_(e._query,t))}_parse(e){const t=Xf(e.firestore);return function(o,u,l,m,w,D,b){let N;if(w.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Fe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){Lx(b,D);const K=[];for(const re of b)K.push(Fx(m,o,re));N={arrayValue:{values:K}}}else N=Fx(m,o,b)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||Lx(b,D),N=xx(l,"where",b,"in"===D||"not-in"===D);return In.create(w,D,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class gy extends wA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Wn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const l=o.getFlattenedFilters();for(const m of l)Vx(u,m),u=F_(u,m)}(e._query,t),new Yi(e.firestore,e.converter,F_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class EA extends cw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new EA(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Fe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Oc(o,u);return function(m,w){if(null===Dm(m)){const D=df(m);null!==D&&Ux(0,D,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new Yi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Ko(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class qC extends cw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new qC(e,t,r)}_apply(e){return new Yi(e.firestore,e.converter,Cu(e._query,this._limit,this._limitType))}}class ZC extends cw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ZC(e,t,r)}_apply(e){const t=kx(e,this.type,this._docOrFields,this._inclusive);return new Yi(e.firestore,e.converter,(o=t,new Ko((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class KC extends cw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new KC(e,t,r)}_apply(e){const t=kx(e,this.type,this._docOrFields,this._inclusive);return new Yi(e.firestore,e.converter,(o=t,new Ko((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function kx(n,e,t,r){if(t[0]=(0,An.m9)(t[0]),t[0]instanceof uw)return function(o,u,l,m,w){if(!m)throw new Fe(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const D=[];for(const b of Vc(o))if(b.field.isKeyField())D.push(Nc(u,m.key));else{const N=m.data.field(b.field);if(rf(N))throw new Fe(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const K=b.field.canonicalString();throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${K}' (used as the orderBy) does not exist.`)}D.push(N)}return new Du(D,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Xf(n.firestore);return function(u,l,m,w,D,b){const N=u.explicitOrderBy;if(D.length>N.length)throw new Fe(fe.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const K=[];for(let re=0;re<D.length;re++){const Se=D[re];if(N[re].field.isKeyField()){if("string"!=typeof Se)throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof Se}`);if(!Cm(u)&&-1!==Se.indexOf("/"))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${Se}' contains a slash.`);const qe=u.path.child(xn.fromString(Se));if(!et.isDocumentKey(qe))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${qe}' is not because it contains an odd number of segments.`);const Ze=new et(qe);K.push(Nc(l,Ze))}else{const qe=xx(m,w,Se);K.push(qe)}}return new Du(K,b)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Fx(n,e,t){if("string"==typeof(t=(0,An.m9)(t))){if(""===t)throw new Fe(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cm(e)&&-1!==t.indexOf("/"))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(xn.fromString(t));if(!et.isDocumentKey(r))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nc(n,new et(r))}if(t instanceof Tr)return Nc(n,t._key);throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yn(t)}.`)}function Lx(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Vx(n,e){if(e.isInequality()){const r=df(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=Dm(n);null!==u&&Ux(0,o,u)}const t=function(r,o){for(const u of r)for(const l of u.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Fe(fe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Ux(n,e,t){if(!t.isEqual(e))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class IA{convertValue(e,t="none"){switch(Ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Eu(e,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new $C(br(e.latitude),br(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=vm(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sf(e));default:return null}}convertTimestamp(e){const t=Iu(e);return new ur(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=xn.fromString(e);Ct(SD(r));const o=new Zo(r.get(1),r.get(3)),u=new et(r.popFirst(5));return o.isEqual(t)||Vr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function YC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class UO extends IA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tr(this.firestore,null,t)}}class tp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nl extends uw{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new dw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(WC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class dw extends nl{data(e={}){return super.data(e)}}class Rd{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new tp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new dw(this._firestore,this._userDataWriter,r.key,r,new tp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new dw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new tp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const m=new dw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new tp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,D=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),D=u.indexOf(l.doc.key)),{type:$O(l.type),doc:m,oldIndex:w,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $O(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function $x(n,e){return n instanceof nl&&e instanceof nl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Rd&&e instanceof Rd&&n._firestore===e._firestore&&pA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Nd extends IA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tr(this.firestore,null,t)}}function jx(n,e,t){n=mt(n,Tr);const r=mt(n.firestore,Sr),o=YC(n.converter,e,t);return my(r,[zC(Xf(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Xn.none())])}function zx(n,e,t,...r){n=mt(n,Tr);const o=mt(n.firestore,Sr),u=Xf(o);let l;return l="string"==typeof(e=(0,An.m9)(e))||e instanceof tl?vA(u,"updateDoc",n._key,e,t,r):yA(u,"updateDoc",n._key,e),my(o,[l.toMutation(n._key,Xn.exists(!0))])}function Hx(n,...e){var t,r,o;n=(0,An.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||gA(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(gA(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,D,b;if(n instanceof Tr)D=mt(n.firestore,Sr),b=dd(n._key.path),w={next:N=>{e[l]&&e[l](DA(D,n,N))},error:e[l+1],complete:e[l+2]};else{const N=mt(n,Yi);D=mt(N.firestore,Sr),b=N._query;const K=new Nd(D);w={next:re=>{e[l]&&e[l](new Rd(D,K,N,re))},error:e[l+1],complete:e[l+2]},Px(n._query)}return function(N,K,re,Se){const qe=new fy(Se),Ze=new EC(K,qe,re);return N.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return L0(yield a(N),Ze)})),()=>{qe.Dc(),N.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return _C(yield a(N),Ze)}))}}(si(D),b,m,w)}function my(n,e){return function(t,r){const o=new ti;return t.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function bC(n,e,t){return qf.apply(this,arguments)}(yield i(t),r,o)})),o.promise}(si(n),e)}function DA(n,e,t){const r=t.docs.get(e._key),o=new Nd(n);return new nl(n,o,e._key,r,new tp(t.hasPendingWrites,t.fromCache),e.converter)}const sP={maxAttempts:5};class Gx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xf(e)}set(e,t,r){this._verifyNotCommitted();const o=Od(e,this._firestore),u=YC(o.converter,t,r),l=zC(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,Xn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Od(e,this._firestore);let l;return l="string"==typeof(t=(0,An.m9)(t))||t instanceof tl?vA(this._dataReader,"WriteBatch.update",u._key,t,r,o):yA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Od(e,this._firestore);return this._mutations=this._mutations.concat(new gd(t._key,Xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Od(n,e){if((n=(0,An.m9)(n)).firestore!==e)throw new Fe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class oP extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Xf(e)}get(e){const t=Od(e,this._firestore),r=new UO(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return gt();const u=o[0];if(u.isFoundDocument())return new uw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new uw(this._firestore,r,t._key,null,t.converter);throw gt()})}set(e,t,r){const o=Od(e,this._firestore),u=YC(o.converter,t,r),l=zC(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=Od(e,this._firestore);let l;return l="string"==typeof(t=(0,An.m9)(t))||t instanceof tl?vA(this._dataReader,"Transaction.update",u._key,t,r,o):yA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Od(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Od(e,this._firestore),r=new Nd(this._firestore);return super.get(e).then(o=>new nl(this._firestore,r,t._key,o._document,new tp(!1,!1),t.converter))}}function CA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function qx(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function Zx(){if(!function zI(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){_u=ao.SDK_VERSION,(0,ao._registerComponent)(new zl.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new Sr(new p_(t.getProvider("auth-internal")),new lm(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Fe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zo(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,ao.registerVersion)(II,"3.13.0",n),(0,ao.registerVersion)(II,"3.13.0","esm2017")}();class hw{constructor(e){this._delegate=e}static fromBase64String(e){return Zx(),new hw(Pu.fromBase64String(e))}static fromUint8Array(e){return qx(),new hw(Pu.fromUint8Array(e))}toBase64(){return Zx(),this._delegate.toBase64()}toUint8Array(){return qx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function bA(n){return function gP(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class mP{enableIndexedDbPersistence(e,t){return function pO(n,e){Tx(n=mt(n,Sr));const t=si(n);if(t._uninitializedComponentsProvider)throw new Fe(fe.FAILED_PRECONDITION,"SDK cache is already specified.");hs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),o=new Va;return bx(t,o,new xC(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function gO(n){Tx(n=mt(n,Sr));const e=si(n);if(e._uninitializedComponentsProvider)throw new Fe(fe.FAILED_PRECONDITION,"SDK cache is already specified.");hs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Va;return bx(e,r,new RC(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function mO(n){if(n._initialized&&!n._terminated)throw new Fe(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ti;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ae.Z)(function*(){try{yield(t=(0,Ae.Z)(function*(r){if(!Gs.D())return Promise.resolve();const o=r+"main";yield Gs.delete(o)}),function(r){return t.apply(this,arguments)})(v0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Kx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Zo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&hs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){UC(this._delegate,e,t,r)}enableNetwork(){return function vO(n){return function d(n){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){const e=yield hA(n),t=yield fA(n);return e.setNetworkEnabled(!0),function(r){const o=st(r);return o.vu.delete(0),Ki(o)}(t)}))}(si(n=mt(n,Sr)))}(this._delegate)}disableNetwork(){return function _O(n){return function f(n){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){const e=yield hA(n),t=yield fA(n);return e.setNetworkEnabled(!1),(r=(0,Ae.Z)(function*(o){const u=st(o);u.vu.add(0),yield Td(u),u.bu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(si(n=mt(n,Sr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Et("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function yO(n){return function(e){const t=new ti;return e.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function nA(n,e){return H0.apply(this,arguments)}(yield i(e),t)})),t.promise}(si(n=mt(n,Sr)))}(this._delegate)}onSnapshotsInSync(e){return function YO(n,e){return function S(n,e){const t=new fy(e);return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return r=yield a(n),o=t,st(r).ku.add(o),void o.next();var r,o})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return r=yield a(n),o=t,void st(r).ku.delete(o);var r,o}))}}(si(n=mt(n,Sr)),gA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new yy(this,Ix(this._delegate,e))}catch(t){throw Ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new Xo(this,BC(this._delegate,e))}catch(t){throw Ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xs(this,function cO(n,e){if(n=mt(n,Qf),nt("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yi(n,null,(t=e,new Ko(xn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function aP(n,e,t){n=mt(n,Sr);const r=Object.assign(Object.assign({},sP),t);return function(o){if(o.maxAttempts<1)throw new Fe(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const m=new ti;return o.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){const w=yield function s(n){return iw(n).then(e=>e.datastore)}(o);new dA(o.asyncQueue,w,l,u,m).run()})),m.promise}(si(n),o=>e(new oP(n,o)),r)}(this._delegate,t=>e(new Yx(this,t)))}batch(){return si(this._delegate),new Qx(new Gx(this._delegate,e=>my(this._delegate,e)))}loadBundle(e){return function wO(n,e){const t=si(n=mt(n,Sr)),r=new dO;return function F(n,e,t,r){const o=function(u,l){let m;return m="string"==typeof u?W_().encode(u):u,w=function(w,D){if(w instanceof Uint8Array)return lA(w,D);if(w instanceof ArrayBuffer)return lA(new Uint8Array(w),D);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new _x(w,l);var w}(t,$f(e));n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){!function cA(n,e,t){const r=st(n);var o;(o=(0,Ae.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function(K,re){const Se=st(K),qe=Ur(re.createTime);return Se.persistence.runTransaction("hasNewerBundle","readonly",Ze=>Se.qs.getBundleMetadata(Ze,re.id)).then(Ze=>!!Ze&&Ze.createTime.compareTo(qe)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(K=w).totalDocuments,bytesLoaded:K.totalBytes,totalDocuments:K.totalDocuments,totalBytes:K.totalBytes}),Promise.resolve(new Set);m._updateProgress(IC(w));const D=new JS(w,u.localStore,l.serializer);let b=yield l.bc();for(;b;){const K=yield D.zu(b);K&&m._updateProgress(K),b=yield l.bc()}const N=yield D.complete();return yield Jo(u,N.Ju,void 0),yield function(K,re){const Se=st(K);return Se.persistence.runTransaction("Save bundle","readwrite",qe=>Se.qs.saveBundleMetadata(qe,re))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Hu)}catch(w){return hs("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var K}),function(u,l,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield i(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function EO(n,e){return function Y(n,e){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){return function(t,r){const o=st(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.qs.getNamedQuery(u,r))}(yield py(n),e)}))}(si(n=mt(n,Sr)),e).then(t=>t?new Yi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new xs(this,t):null)}}class QC extends IA{constructor(e){super(),this.firestore=e}convertBytes(e){return new hw(new Pu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Xo.forKey(t,this.firestore,null)}}class Yx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new QC(e)}get(e){const t=rp(e);return this._delegate.get(t).then(r=>new fw(this._firestore,new nl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=rp(e);return r?(CA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=rp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=rp(e);return this._delegate.delete(t),this}}class Qx{constructor(e){this._delegate=e}set(e,t,r){const o=rp(e);return r?(CA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=rp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=rp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class np{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new dw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new pw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=np.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new np(e,new QC(e),t),o.set(t,u)),u}}np.INSTANCES=new WeakMap;class Xo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new QC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Xo(t,new Tr(t._delegate,r,new et(e)))}static forKey(e,t,r){return new Xo(t,new Tr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new yy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new yy(this.firestore,Ix(this._delegate,e))}catch(t){throw Ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,An.m9)(e))instanceof Tr&&Dx(this._delegate,e)}set(e,t){t=CA("DocumentReference.set",t);try{return t?jx(this._delegate,e,t):jx(this._delegate,e)}catch(r){throw Ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?zx(this._delegate,e):zx(this._delegate,e,t,...r)}catch(o){throw Ms(o,"updateDoc()","DocumentReference.update()")}}delete(){return function ZO(n){return my(mt(n.firestore,Sr),[new gd(n._key,Xn.none())])}(this._delegate)}onSnapshot(...e){const t=Jx(e),r=Xx(e,o=>new fw(this.firestore,new nl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Hx(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function zO(n){n=mt(n,Tr);const e=mt(n.firestore,Sr),t=si(e),r=new Nd(e);return function y(n,e){const t=new ti;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return(r=(0,Ae.Z)(function*(o,u,l){try{const m=yield function(w,D){const b=st(w);return b.persistence.runTransaction("read document","readonly",N=>b.localDocuments.getDocument(N,D))}(o,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Fe(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Qc(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(o,u,l){return r.apply(this,arguments)})(yield py(n),e,t);var r})),t.promise}(t,n._key).then(o=>new nl(e,r,n._key,o,new tp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function HO(n){n=mt(n,Tr);const e=mt(n.firestore,Sr);return _(si(e),n._key,{source:"server"}).then(t=>DA(e,n,t))}(this._delegate):function jO(n){n=mt(n,Tr);const e=mt(n.firestore,Sr);return _(si(e),n._key).then(t=>DA(e,n,t))}(this._delegate),t.then(r=>new fw(this.firestore,new nl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Xo(this.firestore,this._delegate.withConverter(e?np.getInstance(this.firestore,e):null))}}function Ms(n,e,t){return n.message=n.message.replace(e,t),n}function Jx(n){for(const e of n)if("object"==typeof e&&!bA(e))return e;return{}}function Xx(n,e){var t,r;let o;return o=bA(n[0])?n[0]:bA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class fw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Xo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return $x(this._delegate,e._delegate)}}class pw extends fw{data(e){const t=this._delegate.data(e);return function PT(n,e){n||gt()}(void 0!==t),t}}class xs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new QC(e)}where(e,t,r){try{return new xs(this.firestore,xd(this._delegate,function RO(n,e,t){const r=e,o=WC("where",n);return lw._create(o,r,t)}(e,t,r)))}catch(o){throw Ms(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new xs(this.firestore,xd(this._delegate,function NO(n,e="asc"){const t=e,r=WC("orderBy",n);return EA._create(r,t)}(e,t)))}catch(r){throw Ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xs(this.firestore,xd(this._delegate,function OO(n){return Ai("limit",n),qC._create("limit",n,"F")}(e)))}catch(t){throw Ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new xs(this.firestore,xd(this._delegate,function PO(n){return Ai("limitToLast",n),qC._create("limitToLast",n,"L")}(e)))}catch(t){throw Ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new xs(this.firestore,xd(this._delegate,function kO(...n){return ZC._create("startAt",n,!0)}(...e)))}catch(t){throw Ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new xs(this.firestore,xd(this._delegate,function FO(...n){return ZC._create("startAfter",n,!1)}(...e)))}catch(t){throw Ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new xs(this.firestore,xd(this._delegate,function LO(...n){return KC._create("endBefore",n,!1)}(...e)))}catch(t){throw Ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new xs(this.firestore,xd(this._delegate,function VO(...n){return KC._create("endAt",n,!0)}(...e)))}catch(t){throw Ms(t,"endAt()","Query.endAt()")}}isEqual(e){return pA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function WO(n){n=mt(n,Yi);const e=mt(n.firestore,Sr),t=si(e),r=new Nd(e);return function I(n,e){const t=new ti;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return(r=(0,Ae.Z)(function*(o,u,l){try{const m=yield Gm(o,u,!0),w=new eA(u,m.ir),D=w.sc(m.documents),b=w.applyChanges(D,!1);l.resolve(b.snapshot)}catch(m){const w=Qc(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(o,u,l){return r.apply(this,arguments)})(yield py(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Rd(e,r,n,o))}(this._delegate):"server"===e?.source?function qO(n){n=mt(n,Yi);const e=mt(n.firestore,Sr),t=si(e),r=new Nd(e);return C(t,n._query,{source:"server"}).then(o=>new Rd(e,r,n,o))}(this._delegate):function GO(n){n=mt(n,Yi);const e=mt(n.firestore,Sr),t=si(e),r=new Nd(e);return Px(n._query),C(t,n._query).then(o=>new Rd(e,r,n,o))}(this._delegate),t.then(r=>new TA(this.firestore,new Rd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Jx(e),r=Xx(e,o=>new TA(this.firestore,new Rd(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Hx(this._delegate,t,r)}withConverter(e){return new xs(this.firestore,this._delegate.withConverter(e?np.getInstance(this.firestore,e):null))}}class vP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new pw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class TA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new pw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new vP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new pw(this._firestore,r))})}isEqual(e){return $x(this._delegate,e._delegate)}}class yy extends xs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Xo(this.firestore,e):null}doc(e){try{return new Xo(this.firestore,void 0===e?BC(this._delegate):BC(this._delegate,e))}catch(t){throw Ms(t,"doc()","CollectionReference.doc()")}}add(e){return function KO(n,e){const t=mt(n.firestore,Sr),r=BC(n),o=YC(n.converter,e);return my(t,[zC(Xf(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Xn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Xo(this.firestore,t))}isEqual(e){return Dx(this._delegate,e._delegate)}withConverter(e){return new yy(this.firestore,this._delegate.withConverter(e?np.getInstance(this.firestore,e):null))}}function rp(n){return mt(n,Tr)}class SA{constructor(...e){this._delegate=new tl(...e)}static documentId(){return new SA(Cr.keyField().canonicalString())}isEqual(e){return(e=(0,An.m9)(e))instanceof tl&&this._delegate._internalPath.isEqual(e._internalPath)}}class ip{constructor(e){this._delegate=e}static serverTimestamp(){const e=function cP(){return new mA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ip(e)}static delete(){const e=function uP(){return new ow("deleteField")}();return e._methodName="FieldValue.delete",new ip(e)}static arrayUnion(...e){const t=function lP(...n){return new TO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ip(t)}static arrayRemove(...e){const t=function dP(...n){return new SO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ip(t)}static increment(e){const t=function hP(n){return new AO("increment",n)}(e);return t._methodName="FieldValue.increment",new ip(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const _P={Firestore:Kx,GeoPoint:$C,Timestamp:ur,Blob:hw,Transaction:Yx,WriteBatch:Qx,DocumentReference:Xo,DocumentSnapshot:fw,Query:xs,QueryDocumentSnapshot:pw,QuerySnapshot:TA,CollectionReference:yy,FieldPath:SA,FieldValue:ip,setLogLevel:function yP(n){!function ex(n){lo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function EP(n){(function wP(n,e){n.INTERNAL.registerComponent(new zl.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},_P)))})(n,(e,t)=>new Kx(e,t,new mP)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(xg.Z);var AA=M(3019),ea=M(3093),IP=M(4552);class DP extends Ls.x{constructor(e=1/0,t=1/0,r=IP.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var CP=M(3020);function MA(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,CP.B)({connector:()=>new DP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function JC(n,e){return(0,wi.m)(e)?(0,Ln.w)(()=>n,e):(0,Ln.w)(()=>n)}var Ua=M(5137),rl=M(3182);class sp{constructor(e){return e}}class XC{constructor(){return(0,rl.C6)()}}const xA=new h.OlP("angularfire2._apps"),TP={provide:sp,useFactory:function bP(n){return n&&1===n.length?n[0]:new sp((0,rl.Mq)())},deps:[[new h.FiY,xA]]},SP={provide:XC,deps:[[new h.FiY,xA]]};function AP(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new sp(r)}}let MP=(()=>{class n{constructor(t){(0,rl.KN)("angularfire",un.q4.full,"core"),(0,rl.KN)("angularfire",un.q4.full,"app"),(0,rl.KN)("angular",h.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[TP,SP]}),n})();function xP(n,...e){return{ngModule:MP,providers:[{provide:xA,useFactory:AP(n),multi:!0,deps:[h.R0b,h.zs3,un.HU,...e]}]}}const RP=(0,un.u3)(rl.ZF,!0),RA=new Map,eR={activated:!1,tokenObservers:[]},NP={initialized:!1,enabled:!1};function Zr(n){return RA.get(n)||Object.assign({},eR)}function eb(){return NP}const NA="https://content-firebaseappcheck.googleapis.com/v1",FP="exchangeDebugToken",tR={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class VP{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ae.Z)(function*(){t.stop();try{t.pending=new An.BH,yield function UP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new An.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Qi=new An.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function OA(n){if(!Zr(n).activated)throw Qi.create("use-before-activation",{appName:n.name})}function rb(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,Ae.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(N){throw Qi.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==l.status)throw Qi.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(N){throw Qi.create("fetch-parse-error",{originalErrorMessage:N?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Qi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const D=1e3*Number(w[1]),b=Date.now();return{token:m.token,expireTimeMillis:b+D,issuedAtTimeMillis:b}}),kA.apply(this,arguments)}function nR(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`${NA}/projects/${t}/apps/${r}:${FP}?key=${o}`,body:{debug_token:e}}}const zP="firebase-app-check-database",HP=1,gw="firebase-app-check-store";let ib=null;function FA(){return FA=(0,Ae.Z)(function*(n,e){const r=(yield function iR(){return ib||(ib=new Promise((n,e)=>{try{const t=indexedDB.open(zP,HP);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Qi.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(gw,{keyPath:"compositeKey"})}}catch(t){e(Qi.create("storage-open",{originalErrorMessage:t?.message}))}}),ib)}()).transaction(gw,"readwrite"),u=r.objectStore(gw).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var D;m(Qi.create("storage-set",{originalErrorMessage:null===(D=w.target.error)||void 0===D?void 0:D.message}))}})}),FA.apply(this,arguments)}const mw=new Ds.Yd("@firebase/app-check");function UA(n,e){return(0,An.hl)()?function WP(n,e){return function sR(n,e){return FA.apply(this,arguments)}(function aR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{mw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function $A(){return eb().enabled}function jA(){return zA.apply(this,arguments)}function zA(){return zA=(0,Ae.Z)(function*(){const n=eb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),zA.apply(this,arguments)}const JP={error:"UNKNOWN_ERROR"};function XP(n){return An.US.encodeString(JSON.stringify(n),!1)}function sb(n){return HA.apply(this,arguments)}function HA(){return HA=(0,Ae.Z)(function*(n,e=!1){const t=n.app;OA(t);const r=Zr(t);let u,o=r.token;if(o&&!vy(o)&&(r.token=void 0,o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(vy(w)?o=w:yield UA(t,void 0))}if(!e&&o&&vy(o))return{token:o.token};let m,l=!1;if($A()){r.exchangeTokenPromise||(r.exchangeTokenPromise=rb(nR(t,yield jA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield UA(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield Zr(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?mw.warn(w.message):mw.error(w),u=w}return o?u?m=vy(o)?{token:o.token,internalError:u}:dR(u):(m={token:o.token},r.token=o,yield UA(t,o)):m=dR(u),l&&function lR(n,e){const t=Zr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m}),HA.apply(this,arguments)}function GA(){return GA=(0,Ae.Z)(function*(n){const e=n.app;OA(e);const{provider:t}=Zr(e);if($A()){const r=yield jA(),{token:o}=yield rb(nR(e,r),n.heartbeatServiceProvider);return{token:o}}{const{token:r}=yield t.getToken();return{token:r}}}),GA.apply(this,arguments)}function qA(n,e){const t=Zr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function cR(n){const{app:e}=n,t=Zr(e);let r=t.tokenRefresher;r||(r=function e1(n){const{app:e}=n;return new VP((0,Ae.Z)(function*(){let r;if(r=Zr(e).token?yield sb(n,!0):yield sb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Zr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},tR.RETRIAL_MIN_WAIT,tR.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function vy(n){return n.expireTimeMillis-Date.now()>0}function dR(n){return{token:XP(JP),error:n}}class t1{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Zr(this.app);for(const t of e)qA(this.app,t.next);return Promise.resolve()}}const _R="app-check-internal";!function g1(){(0,ao._registerComponent)(new zl.wA("app-check",n=>function n1(n,e){return new t1(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(_R).initialize()})),(0,ao._registerComponent)(new zl.wA(_R,n=>function r1(n){return{getToken:e=>sb(n,e),getLimitedUseToken:()=>function uR(n){return GA.apply(this,arguments)}(n),addTokenListener:e=>function WA(n,e,t,r){const{app:o}=n,u=Zr(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&vy(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),cR(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>cR(n))}(n,"INTERNAL",e),removeTokenListener:e=>qA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ao.registerVersion)("@firebase/app-check","0.8.0")}();class yw{constructor(){return(0,un.vb)("app-check")}}typeof window<"u"&&window;var ER=M(7142);const IR=new h.OlP("angularfire2.auth.use-emulator"),DR=new h.OlP("angularfire2.auth.settings"),CR=new h.OlP("angularfire2.auth.tenant-id"),bR=new h.OlP("angularfire2.auth.langugage-code"),TR=new h.OlP("angularfire2.auth.use-device-language"),SR=new h.OlP("angularfire.auth.persistence"),AR=(n,e,t,r,o,u,l,m)=>(0,Ci.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),l)for(const[D,b]of Object.entries(l))w.settings[D]=b;return m&&w.setPersistence(m),w},[t,r,o,u,l,m]);let ab=(()=>{class n{constructor(t,r,o,u,l,m,w,D,b,N,K,re){const Se=new Ls.x,qe=(0,_t.of)(void 0).pipe((0,ea.Q)(l.outsideAngular),(0,Ln.w)(()=>u.runOutsideAngular(()=>Promise.resolve().then(M.bind(M,6365)))),(0,Lt.U)(()=>(0,Ci.on)(t,u,r)),(0,Lt.U)(Ze=>AR(Ze,u,m,D,b,N,w,K)),MA({bufferSize:1,refCount:!1}));if(Li(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,_t.of)(null);else{qe.pipe(Vs()).subscribe();const At=qe.pipe((0,Ln.w)(Ht=>Ht.getRedirectResult().then(cn=>cn,()=>null)),un.iC,MA({bufferSize:1,refCount:!1})),$t=qe.pipe((0,Ln.w)(Ht=>new Hr.y(cn=>({unsubscribe:u.runOutsideAngular(()=>Ht.onAuthStateChanged(Vn=>cn.next(Vn),Vn=>cn.error(Vn),()=>cn.complete()))})))),Ot=qe.pipe((0,Ln.w)(Ht=>new Hr.y(cn=>({unsubscribe:u.runOutsideAngular(()=>Ht.onIdTokenChanged(Vn=>cn.next(Vn),Vn=>cn.error(Vn),()=>cn.complete()))}))));this.authState=At.pipe(JC($t),(0,Ua.R)(l.outsideAngular),(0,ea.Q)(l.insideAngular)),this.user=At.pipe(JC(Ot),(0,Ua.R)(l.outsideAngular),(0,ea.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,Ln.w)(Ht=>Ht?(0,Yn.D)(Ht.getIdToken()):(0,_t.of)(null))),this.idTokenResult=this.user.pipe((0,Ln.w)(Ht=>Ht?(0,Yn.D)(Ht.getIdTokenResult()):(0,_t.of)(null))),this.credential=(0,AA.T)(At,Se,this.authState.pipe(Qr(Ht=>!Ht))).pipe((0,Lt.U)(Ht=>Ht?.user?Ht:null),(0,Ua.R)(l.outsideAngular),(0,ea.Q)(l.insideAngular))}return(0,Ci.pX)(this,qe,u,{spy:{apply:(Ze,At,$t)=>{(Ze.startsWith("signIn")||Ze.startsWith("createUser"))&&$t.then(Ot=>Se.next(Ot))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ci.Dh),h.LFG(Ci.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(un.HU),h.LFG(IR,8),h.LFG(DR,8),h.LFG(CR,8),h.LFG(bR,8),h.LFG(TR,8),h.LFG(SR,8),h.LFG(yw,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function MR(n,e){return function E1(n,e=TE.z){return new Hr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function JA(n,e){return MR(n,e).pipe((0,Lt.U)(t=>({payload:t,type:"query"})))}function ub(n,e){return JA(n,e).pipe(no(void 0),mv(),(0,Lt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=o.find(b=>b.doc.ref.isEqual(l.ref)),D=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&D&&JSON.stringify(D.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function xR(n,e,t){return ub(n,t).pipe(Lo((r,o)=>function D1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function C1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return XA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return XA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return XA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),(0,hT.x)(),(0,Lt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function XA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function RR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class NR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ub(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Lt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(no(void 0),mv(),Qr(([r,o])=>o.length>0||!r),(0,Lt.U)(([r,o])=>o),un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Lo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RR(e);return xR(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return JA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Lt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),un.iC)}get(e){return(0,Yn.D)(this.query.get(e)).pipe(un.iC)}add(e){return this.ref.add(e)}doc(e){return new OR(this.ref.doc(e),this.afs)}}class OR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=FR(r,t);return new NR(o,u,this.afs)}snapshotChanges(){return function I1(n,e){return MR(n,e).pipe(no(void 0),mv(),(0,Lt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Lt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Yn.D)(this.ref.get(e)).pipe(un.iC)}}class b1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ub(this.query,this.afs.schedulers.outsideAngular).pipe((0,Lt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Qr(t=>t.length>0),un.iC):ub(this.query,this.afs.schedulers.outsideAngular).pipe(un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Lo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RR(e);return xR(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return JA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Lt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),un.iC)}get(e){return(0,Yn.D)(this.query.get(e)).pipe(un.iC)}}const PR=new h.OlP("angularfire2.enableFirestorePersistence"),kR=new h.OlP("angularfire2.firestore.persistenceSettings"),T1=new h.OlP("angularfire2.firestore.settings"),S1=new h.OlP("angularfire2.firestore.use-emulator");function FR(n,e=(t=>t)){return{query:e(n),ref:n}}let eM=(()=>{class n{constructor(t,r,o,u,l,m,w,D,b,N,K,re,Se,qe,Ze,At,$t){this.schedulers=w;const Ot=(0,Ci.on)(t,m,r),Ht=b;N&&AR(Ot,m,K,Se,qe,Ze,re,At),[this.firestore,this.persistenceEnabled$]=(0,Ci.cc)(`${Ot.name}.firestore`,"AngularFirestore",Ot.name,()=>{const cn=m.runOutsideAngular(()=>Ot.firestore());if(u&&cn.settings(u),Ht&&cn.useEmulator(...Ht),o&&!Li(l)){const Vn=()=>{try{return(0,Yn.D)(cn.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(ms){return typeof console<"u"&&console.warn(ms),(0,_t.of)(!1)}};return[cn,m.runOutsideAngular(Vn)]}return[cn,(0,_t.of)(!1)]},[u,Ht,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=FR(o,r),m=this.schedulers.ngZone.run(()=>u);return new NR(m,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new b1(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new OR(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ci.Dh),h.LFG(Ci.xv,8),h.LFG(PR,8),h.LFG(T1,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(un.HU),h.LFG(kR,8),h.LFG(S1,8),h.LFG(ab,8),h.LFG(IR,8),h.LFG(DR,8),h.LFG(CR,8),h.LFG(bR,8),h.LFG(TR,8),h.LFG(SR,8),h.LFG(yw,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),A1=(()=>{class n{constructor(){ER.Z.registerVersion("angularfire",un.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:PR,useValue:!0},{provide:kR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[eM]}),n})();var LR=M(7582),VR=M(8990);const x1=new h.OlP("angularfire2.messaging.vapid-key"),R1=new h.OlP("angularfire2.messaging.service-worker-registeration");let tM=(()=>{class n{constructor(t,r,o,u,l,m,w){const D=w,b=(0,_t.of)(void 0).pipe((0,Ua.R)(l.outsideAngular),(0,ea.Q)(l.insideAngular),(0,Ln.w)(VR.Gb),(0,Ln.w)(re=>re?M.e(29).then(M.bind(M,29)):as.E),(0,Lt.U)(()=>(0,Ci.on)(t,u,r)),(0,Ln.w)(re=>(0,Ci.cc)(`${re.name}.messaging`,"AngularFireMessaging",re.name,()=>(0,LR.mG)(this,void 0,void 0,function*(){return re.messaging()}),[])),MA({bufferSize:1,refCount:!1}));this.requestPermission=b.pipe((0,Ua.R)(l.outsideAngular),(0,ea.Q)(l.insideAngular),(0,Ln.w)(()=>Notification.requestPermission())),this.getToken=b.pipe((0,Ua.R)(l.outsideAngular),(0,ea.Q)(l.insideAngular),(0,Ln.w)(re=>(0,LR.mG)(this,void 0,void 0,function*(){if("granted"===Notification.permission){const Se=D?yield D:null;return yield re.getToken({vapidKey:m,serviceWorkerRegistration:Se})}return null})));const N=new Hr.y(re=>{navigator.permissions.query({name:"notifications"}).then(Se=>{Se.onchange=()=>re.next()})}),K=b.pipe((0,Ua.R)(l.outsideAngular),(0,ea.Q)(l.insideAngular),JC(N),JC(this.getToken));return this.tokenChanges=b.pipe((0,Ua.R)(l.outsideAngular),(0,ea.Q)(l.insideAngular),(0,Ln.w)(()=>os(this.getToken,K))),this.messages=b.pipe((0,Ua.R)(l.outsideAngular),(0,ea.Q)(l.insideAngular),(0,Ln.w)(re=>new Hr.y(Se=>re.onMessage(Se)))),this.requestToken=b.pipe((0,Ua.R)(l.outsideAngular),(0,ea.Q)(l.insideAngular),(0,Ln.w)(()=>this.requestPermission),Ii(()=>(0,_t.of)(null)),(0,Dr.z)(()=>this.tokenChanges)),this.deleteToken=()=>b.pipe((0,Ua.R)(l.outsideAngular),(0,ea.Q)(l.insideAngular),(0,Ln.w)(re=>re.deleteToken()),da(!1)),(0,Ci.pX)(this,b,u)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ci.Dh),h.LFG(Ci.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(un.HU),h.LFG(x1,8),h.LFG(R1,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),N1=(()=>{class n{constructor(){ER.Z.registerVersion("angularfire",un.q4.full,"fcm-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[tM]}),n})(),nM=(()=>{class n{constructor(t,r,o){this.afs=t,this.afa=r,this.afm=o,this.currentMessage=new is.X(null),this.userId="001"}requestPermission(){this.afm.requestToken.subscribe(t=>(console.log(t),this.updateToken(t),!0),t=>{console.log("unable to get user permission",t)})}updateToken(t){this.afa.authState.subscribe(()=>{let r={user:this.userId,token:t};this.afs.collection("tokens/").add(r)})}receiveMessaging(){this.afm.messages.subscribe(t=>{console.log("new message received",t),this.currentMessage.next(t)})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(eM),h.LFG(ab),h.LFG(tM))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),O1=(()=>{class n{constructor(t,r){this.fireauth=t,this.router=r,this.message="something went wrong"}login(t,r){this.fireauth.signInWithEmailAndPassword(t,r).then(o=>{localStorage.setItem("token","true"),this.router.navigate(["/dashboard"])},o=>{alert(o.message),this.router.navigate(["/login"])})}register(t,r){this.fireauth.createUserWithEmailAndPassword(t,r).then(o=>{alert("Registration is successfull!"),this.router.navigate(["./login"])},o=>{alert(o.message),this.router.navigate(["./register"])})}logout(){this.fireauth.signOut().then(()=>{localStorage.removeItem("token"),this.router.navigate(["./login"])},t=>{alert(t.message)})}forgotPassword(t){this.fireauth.sendPasswordResetEmail(t).then(()=>{this.router.navigate(["/verify-email"])},r=>{alert(r.message)})}sendEmailForVerification(t){t.sendEmailForVerification().then(r=>{this.router.navigate(["/verify-email"])},r=>{alert("something went wrong unable to send email")})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ab),h.LFG(ds))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UR=(()=>{class n{constructor(t){this.afs=t,this.vegan_types=["vegetarian","non_vegetarian"],this.veg_pizzas=[{name:"Margherita Pizza",description:"Classic tomato sauce, mozzarella cheese, fresh basil leaves, and a drizzle of olive oil.",price:10.99},{name:"Veggie Supreme Pizza",description:"Tomato sauce, mozzarella cheese, bell peppers, onions, black olives, mushrooms, and tomatoes.",price:12.99},{name:"Spinach and Feta Pizza",description:"Tomato sauce, mozzarella cheese, spinach, feta cheese, and red onion.",price:11.99},{name:"Mushroom and Onion Pizza",description:"Creamy garlic sauce, mozzarella cheese, saut\xe9ed mushrooms, and caramelized onions.",price:12.49},{name:"Mediterranean Veggie Pizza",description:"Olive oil and garlic base, mozzarella cheese, artichoke hearts, roasted red peppers, kalamata olives, red onion, and feta cheese.",price:13.99},{name:"Pesto and Tomato Pizza",description:"Pesto sauce, mozzarella cheese, cherry tomatoes, and fresh basil.",price:11.49},{name:"Roasted Veggie Pizza",description:"Tomato sauce, mozzarella cheese, roasted zucchini, eggplant, red pepper, and red onion.",price:12.99},{name:"BBQ Veggie Pizza",description:"Barbecue sauce, mozzarella cheese, red onion, bell peppers, corn, and black beans.",price:12.99},{name:"Three Cheese Pizza",description:"Tomato sauce, mozzarella cheese, cheddar cheese, and parmesan cheese.",price:11.49},{name:"Hawaiian Pizza (without ham)",description:"Tomato sauce, mozzarella cheese, pineapple, and sometimes red onion or bell peppers.",price:11.99},{name:"Vegan Veggie Pizza",description:"Vegan cheese, tomato sauce, assorted vegetables like mushrooms, bell peppers, onions, and spinach.",price:13.49},{name:"Greek Pizza",description:"Olive oil and garlic base, mozzarella cheese, spinach, red onion, kalamata olives, tomatoes, and feta cheese.",price:12.99},{name:"Caprese Pizza",description:"Tomato slices, fresh mozzarella cheese, fresh basil leaves, and a balsamic reduction drizzle.",price:10.99},{name:"White Pizza",description:"Ricotta cheese and mozzarella cheese blend, garlic, spinach, and sometimes mushrooms or artichokes.",price:11.49},{name:"Truffle Mushroom Pizza",description:"Truffle oil-infused sauce, mozzarella cheese, and a variety of saut\xe9ed mushrooms.",price:13.99},{name:"Roasted Garlic and Tomato Pizza",description:"Roasted garlic sauce, mozzarella cheese, oven-roasted tomatoes, and fresh basil.",price:12.49},{name:"Sun-Dried Tomato and Pesto Pizza",description:"Pesto sauce, mozzarella cheese, sun-dried tomatoes, black olives, and arugula.",price:13.49},{name:"Broccoli and Cheddar Pizza",description:"Garlic sauce, mozzarella cheese, steamed broccoli, and cheddar cheese.",price:11.99},{name:"Sweet Potato and Caramelized Onion Pizza",description:"Olive oil base, mozzarella cheese, roasted sweet potato slices, caramelized onions, and rosemary.",price:12.99},{name:"Pear and Gorgonzola Pizza",description:"Olive oil base, mozzarella cheese, sliced pears, gorgonzola cheese, caramelized onions, and arugula.",price:13.49}],this.non_veg_pizzas=[{name:"Pepperoni Pizza",price:12.99,description:"Classic pizza topped with spicy pepperoni slices."},{name:"Meat Lovers Pizza",price:14.99,description:"A meaty delight with pepperoni, sausage, bacon, and ham."},{name:"Chicken BBQ Pizza",price:13.49,description:"Grilled chicken, red onions, and BBQ sauce create a smoky flavor."},{name:"Spicy Italian Sausage Pizza",price:12.99,description:"For those who love a bit of heat, with spicy sausage and jalapenos."},{name:"Bacon and Mushroom Pizza",price:13.99,description:"Savory bacon strips paired with earthy mushrooms."},{name:"Supreme Pizza",price:15.99,description:"A combination of various meats, vegetables, and olives."},{name:"Hawaiian Pizza (with ham)",price:12.49,description:"A tropical twist with ham and pineapple chunks."},{name:"Buffalo Chicken Pizza",price:13.99,description:"Spicy buffalo sauce, grilled chicken, and a drizzle of ranch."},{name:"Tandoori Chicken Pizza",price:14.49,description:"Indian-inspired flavors with tandoori-spiced chicken and onions."},{name:"Seafood Pizza",price:16.99,description:"A seafood lover's dream, topped with shrimp, crab, and clams."},{name:"BBQ Bacon Cheeseburger Pizza",price:15.49,description:"Combines the taste of a BBQ bacon cheeseburger in pizza form."},{name:"Pesto Chicken Pizza",price:13.99,description:"Grilled chicken, pesto sauce, and sun-dried tomatoes."},{name:"Sausage and Peppers Pizza",price:12.99,description:"Italian sausage slices with colorful bell peppers."},{name:"Chicken Alfredo Pizza",price:14.99,description:"Creamy Alfredo sauce, tender chicken, and garlic."},{name:"Meatball Pizza",price:13.49,description:"Sliced meatballs, marinara sauce, and melted cheese."}]}addItem(t){return t.id=this.afs.createId(),this.afs.collection("/PizzaList").add(t)}getAllItems(){return this.afs.collection("/PizzaList").snapshotChanges()}updateItem(t){return this.afs.doc("/PizzaList/"+t.id).update(t)}deleteItem(t){return this.afs.doc("/PizzaList/"+t.id).delete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(eM))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),op=(()=>{class n extends BR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const ku=new h.OlP("NgValueAccessor"),F1={provide:ku,useExisting:(0,h.Gpc)(()=>rM),multi:!0},V1=new h.OlP("CompositionEventMode");let rM=(()=>{class n extends BR{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function L1(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(V1,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([F1]),h.qOj]}),n})();const gs=new h.OlP("NgValidators"),kd=new h.OlP("NgAsyncValidators");function QR(n){return null!=n}function JR(n){return(0,h.QGY)(n)?(0,Yn.D)(n):n}function XR(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function eN(n,e){return e.map(t=>t(n))}function tN(n){return n.map(e=>function B1(n){return!n.validate}(e)?e:t=>e.validate(t))}function iM(n){return null!=n?function nN(n){if(!n)return null;const e=n.filter(QR);return 0==e.length?null:function(t){return XR(eN(t,e))}}(tN(n)):null}function sM(n){return null!=n?function rN(n){if(!n)return null;const e=n.filter(QR);return 0==e.length?null:function(t){return function P1(...n){const e=(0,Js.jO)(n),{args:t,keys:r}=vl(n),o=new Hr.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let w=l,D=l;for(let b=0;b<l;b++){let N=!1;(0,Fo.Xf)(t[b]).subscribe((0,ss.x)(u,K=>{N||(N=!0,D--),m[b]=K},()=>w--,void 0,()=>{(!w||!N)&&(D||u.next(r?ru(r,m):m),u.complete())}))}});return e?o.pipe(nu(e)):o}(eN(t,e).map(JR)).pipe((0,Lt.U)(XR))}}(tN(n)):null}function iN(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function oM(n){return n?Array.isArray(n)?n:[n]:[]}function lb(n,e){return Array.isArray(n)?n.includes(e):n===e}function aN(n,e){const t=oM(e);return oM(n).forEach(o=>{lb(t,o)||t.push(o)}),t}function uN(n,e){return oM(e).filter(t=>!lb(n,t))}class cN{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=iM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Rs extends cN{get formDirective(){return null}get path(){return null}}class Fd extends cN{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class lN{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let dN=(()=>{class n extends lN{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Fd,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})();const vw="VALID",hb="INVALID",_y="PENDING",_w="DISABLED";function fb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class gN{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===vw}get invalid(){return this.status===hb}get pending(){return this.status==_y}get disabled(){return this.status===_w}get enabled(){return this.status!==_w}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(aN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(aN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(uN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(uN(e,this._rawAsyncValidators))}hasValidator(e){return lb(this._rawValidators,e)}hasAsyncValidator(e){return lb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=_y,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_w,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vw,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vw||this.status===_y)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_w:vw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=_y,this._hasOwnPendingAsyncValidator=!0;const t=JR(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?_w:this.errors?hb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_y)?_y:this._anyControlsHaveStatus(hb)?hb:vw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){fb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function G1(n){return Array.isArray(n)?iM(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function W1(n){return Array.isArray(n)?sM(n):n||null}(this._rawAsyncValidators)}}const wy=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>pb}),pb="always";function ww(n,e,t=pb){(function hM(n,e){const t=function sN(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(iN(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function oN(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(iN(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();yb(e._rawValidators,o),yb(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function K1(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&mN(n,e)})}(n,e),function Q1(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Y1(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&mN(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Z1(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function yb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _N(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function wN(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const EN=class extends gN{constructor(e=null,t,r){super(function cM(n){return(fb(n)?n.validators:n)||null}(t),function lM(n,e){return(fb(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fb(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=wN(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_N(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_N(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){wN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},sk={provide:Fd,useExisting:(0,h.Gpc)(()=>yM)},CN=(()=>Promise.resolve())();let yM=(()=>{class n extends Fd{constructor(t,r,o,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new EN,this._registered=!1,this.name="",this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function gM(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===rM?t=u:function ek(n){return Object.getPrototypeOf(n.constructor)===op}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function pM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ww(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){CN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,h.VuI)(r);CN.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function gb(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Rs,9),h.Y36(gs,10),h.Y36(kd,10),h.Y36(ku,10),h.Y36(h.sBO,8),h.Y36(wy,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([sk]),h.qOj,h.TTD]}),n})(),TN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const mk={provide:ku,useExisting:(0,h.Gpc)(()=>_b),multi:!0};function ON(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let _b=(()=>{class n extends op{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const o=ON(this._getOptionId(t),t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function yk(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([mk]),h.qOj]}),n})(),PN=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(ON(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(_b,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const vk={provide:ku,useExisting:(0,h.Gpc)(()=>EM),multi:!0};function kN(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let EM=(()=>{class n extends op{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(u=>this._getOptionId(u));r=(u,l)=>{u._setSelected(o.indexOf(l.toString())>-1)}}else r=(o,u)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[],u=r.selectedOptions;if(void 0!==u){const l=u;for(let m=0;m<l.length;m++){const D=this._getOptionValue(l[m].value);o.push(D)}}else{const l=r.options;for(let m=0;m<l.length;m++){const w=l[m];if(w.selected){const D=this._getOptionValue(w.value);o.push(D)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function _k(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([vk]),h.qOj]}),n})(),FN=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(kN(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(kN(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(EM,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Ak=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[TN]}),n})(),xk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:wy,useValue:t.callSetDisabledState??pb}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ak]}),n})();function Rk(n,e){if(1&n&&(h.TgZ(0,"option",22),h._uU(1),h.qZA()),2&n){const t=e.$implicit;h.s9C("value",t),h.xp6(1),h.Oqu(t)}}function Nk(n,e){if(1&n&&(h.TgZ(0,"option",22),h._uU(1),h.qZA()),2&n){const t=e.$implicit;h.s9C("value",t.name),h.xp6(1),h.Oqu(t.name)}}function Ok(n,e){if(1&n&&(h.TgZ(0,"option",22),h._uU(1),h.qZA()),2&n){const t=e.$implicit;h.s9C("value",t.description),h.xp6(1),h.Oqu(t.description)}}function Pk(n,e){if(1&n&&(h.TgZ(0,"option",22),h._uU(1),h.qZA()),2&n){const t=e.$implicit;h.s9C("value",t.price),h.xp6(1),h.Oqu(t.price)}}function kk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"tr")(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td"),h._uU(6),h.qZA(),h.TgZ(7,"td"),h._uU(8),h.qZA(),h.TgZ(9,"td")(10,"a",23),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw();return h.KtG(l.updateItem(u))}),h._UZ(11,"i",24),h.qZA()(),h.TgZ(12,"td")(13,"a",25),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw();return h.KtG(l.deleteItem(u))}),h._UZ(14,"i",26),h.qZA()()()}if(2&n){const t=e.$implicit;h.xp6(2),h.Oqu(t.vegetarian),h.xp6(2),h.Oqu(t.name),h.xp6(2),h.Oqu(t.price),h.xp6(2),h.Oqu(t.description)}}const Fk=[{path:"order",component:(()=>{class n{constructor(t,r,o){this.ms=t,this.auth=r,this.data=o,this.itemList=[],this.itemObj={id:"",vegetarian:"",name:"",price:"",description:""},this.id="",this.vegetarian="",this.name="",this.price="",this.description="",this.veganTypes=this.data.vegan_types,this.vegPizzas=this.data.veg_pizzas,this.nonVegPizzas=this.data.non_veg_pizzas}ngOnInit(){this.getAllItems()}getAllItems(){this.data.getAllItems().subscribe(t=>{this.itemList=t.map(r=>{const o=r.payload.doc.data();return o.id=r.payload.doc.id,o}),console.log(this.itemList)},t=>{alert("error while fetching")})}resetForm(){this.id="",this.vegetarian="",this.name="",this.price="",this.description=""}addItem(t){""==this.vegetarian||""==this.name||""==this.price||""==this.description?alert("Fill all input fields"):(this.itemObj.id="add"==t?"":this.id,this.itemObj.vegetarian=this.vegetarian,this.itemObj.name=this.name,this.itemObj.price=this.price,this.itemObj.description=this.description,"add"==t?this.data.addItem(this.itemObj):this.data.updateItem(this.itemObj),this.resetForm())}updateItem(t){this.id=t.id,this.vegetarian=t.vegetarian,this.name=t.name,this.price=t.price,this.description=t.description}deleteItem(t){window.confirm("Are you sure want to item"+t.vegetarian+" "+t.name+" ?")&&this.data.deleteItem(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(nM),h.Y36(O1),h.Y36(UR))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-order-page"]],decls:65,vars:9,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-4","mt-5"],[1,"card","border-0","shadow","p-3"],[1,"form-floating","mb-3","text-center"],[1,"text-center","text-warning"],[1,"form-floating","mb-3"],[1,"form-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline-success",3,"click"],["type","button",1,"btn","btn-outline-warning",3,"click"],[1,"col-md-8","mt-2"],[1,"text-danger"],[1,"card","p-3","shadow"],[1,"card-body"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[2,"margin-left","45%"],[1,"btn","btn-success"],["href","/home",2,"color","white","align-items","center"],[3,"value"],[1,"btn","btn-outline-warning",3,"click"],[1,"far","fa-edit"],[1,"btn","btn-outline-danger",3,"click"],[1,"fa","fa-trash"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),h._uU(6,"Choose your Order"),h.qZA()(),h.TgZ(7,"div",6)(8,"h6"),h._uU(9,"Vegan type"),h.qZA(),h.TgZ(10,"select",7),h.NdJ("ngModelChange",function(u){return r.vegetarian=u}),h.TgZ(11,"option",8),h._uU(12,"Select your vegantype"),h.qZA(),h.YNc(13,Rk,2,2,"option",9),h.qZA()(),h.TgZ(14,"div",6)(15,"h6"),h._uU(16,"Pizza type"),h.qZA(),h.TgZ(17,"select",7),h.NdJ("ngModelChange",function(u){return r.name=u}),h.TgZ(18,"option",8),h._uU(19,"Select your Pizza"),h.qZA(),h.YNc(20,Nk,2,2,"option",9),h.qZA()(),h.TgZ(21,"div",6)(22,"h6"),h._uU(23,"Description"),h.qZA(),h.TgZ(24,"select",7),h.NdJ("ngModelChange",function(u){return r.description=u}),h.TgZ(25,"option",8),h._uU(26,"Select your description"),h.qZA(),h.YNc(27,Ok,2,2,"option",9),h.qZA()(),h.TgZ(28,"div",6)(29,"h6"),h._uU(30,"Price"),h.qZA(),h.TgZ(31,"select",7),h.NdJ("ngModelChange",function(u){return r.price=u}),h.TgZ(32,"option",8),h._uU(33,"Price range"),h.qZA(),h.YNc(34,Pk,2,2,"option",9),h.qZA()(),h.TgZ(35,"button",10),h.NdJ("click",function(){return r.addItem("add")}),h._uU(36,"Add Item"),h.qZA(),h.TgZ(37,"button",11),h.NdJ("click",function(){return r.addItem("update")}),h._uU(38,"Update Item"),h.qZA()()(),h.TgZ(39,"div",12)(40,"h5",13),h._uU(41,"Item List"),h.qZA(),h.TgZ(42,"div",14)(43,"div",15)(44,"table",16)(45,"thead")(46,"tr")(47,"th",17),h._uU(48,"Vegan Type"),h.qZA(),h.TgZ(49,"th",17),h._uU(50,"Name"),h.qZA(),h.TgZ(51,"th",17),h._uU(52,"Price"),h.qZA(),h.TgZ(53,"th",17),h._uU(54,"Description"),h.qZA(),h.TgZ(55,"th",17),h._uU(56,"Update"),h.qZA(),h.TgZ(57,"th",17),h._uU(58,"Delete"),h.qZA()()(),h.TgZ(59,"tbody"),h.YNc(60,kk,15,4,"tr",18),h.qZA()()()()()()(),h.TgZ(61,"div",19)(62,"button",20)(63,"a",21),h._uU(64,"back to Home"),h.qZA()()()),2&t&&(h.xp6(10),h.Q6J("ngModel",r.vegetarian),h.xp6(3),h.Q6J("ngForOf",r.veganTypes),h.xp6(4),h.Q6J("ngModel",r.name),h.xp6(3),h.Q6J("ngForOf",r.vegPizzas),h.xp6(4),h.Q6J("ngModel",r.description),h.xp6(3),h.Q6J("ngForOf",r.vegPizzas),h.xp6(4),h.Q6J("ngModel",r.price),h.xp6(3),h.Q6J("ngForOf",r.vegPizzas),h.xp6(26),h.Q6J("ngForOf",r.itemList))},dependencies:[Zs,PN,FN,_b,dN,yM]}),n})()},{path:"home",component:(()=>{class n{constructor(t,r){this.ms=t,this.data=r,this.pizzas=this.data.veg_pizzas,this.item={id:"",vegetarian:"",name:"",price:"",description:""},this.id="",this.vegetarian="",this.name="",this.price="",this.description=""}subscribeToNotifications(){1==confirm("You want to subscribe for our notifications?")&&(this.ms.requestPermission(),this.ms.receiveMessaging(),this.message=this.ms.currentMessage)}addToCart(t){console.log(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(nM),h.Y36(UR))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:59,vars:4,consts:[["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],["id","top1"],["id","navbar",1,"navbar"],["id","navcontent"],["href","#"],["href","/order"],[3,"click"],["aria-hidden","true",1,"fa","fa-bell"],["id","container1"],["id","welcome"],[1,"btn","btn-success"],["src","./../assets/arrow.gif",1,"arrow-image"],[1,"row"],[1,"card","sm-6",2,"max-width","400px"],[1,"row","no-gutters"],[1,"col-md-4"],["src","./../../../assets/pizza1.jfif","alt","...",1,"card-img"],[1,"col-md-8"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"text-muted"],["href","/cart"],["src","./../../../assets/pizza2.jfif","alt","...",1,"card-img"]],template:function(t,r){1&t&&(h.TgZ(0,"head"),h._UZ(1,"meta",0)(2,"meta",1),h.qZA(),h.TgZ(3,"body")(4,"header")(5,"h1",2),h._uU(6,"FoodShop"),h.qZA()(),h._UZ(7,"hr"),h.TgZ(8,"nav",3)(9,"ul",4)(10,"li")(11,"a",5),h._uU(12,"Food Delivery"),h.qZA()(),h.TgZ(13,"li")(14,"a",6),h._uU(15,"Make Order"),h.qZA()(),h.TgZ(16,"li")(17,"a",7),h.NdJ("click",function(){return r.subscribeToNotifications()}),h._UZ(18,"i",8),h.qZA()()()(),h.TgZ(19,"div",9)(20,"div",10),h._uU(21,"Welcome to Online FoodShop"),h.qZA(),h.TgZ(22,"button",11)(23,"a",6),h._uU(24,"ORDER NOW!"),h.qZA()(),h._UZ(25,"img",12),h.qZA(),h.TgZ(26,"div",13)(27,"div",14)(28,"div",15)(29,"div",16),h._UZ(30,"img",17),h.qZA(),h.TgZ(31,"div",18)(32,"div",19)(33,"h5",20),h._uU(34),h.qZA(),h.TgZ(35,"p",21),h._uU(36),h.qZA(),h.TgZ(37,"p",21)(38,"small",22),h._uU(39,"Last updated 3 mins ago"),h.qZA()(),h.TgZ(40,"button",11)(41,"a",23),h._uU(42,"Add to Cart"),h.qZA()()()()()(),h.TgZ(43,"div",14)(44,"div",15)(45,"div",16),h._UZ(46,"img",24),h.qZA(),h.TgZ(47,"div",18)(48,"div",19)(49,"h5",20),h._uU(50),h.qZA(),h.TgZ(51,"p",21),h._uU(52),h.qZA(),h.TgZ(53,"p",21)(54,"small",22),h._uU(55,"Last updated 3 mins ago"),h.qZA()(),h.TgZ(56,"button",11)(57,"a",23),h._uU(58,"Add to Cart"),h.qZA()()()()()()()()),2&t&&(h.xp6(34),h.Oqu(r.pizzas[0].name),h.xp6(2),h.Oqu(r.pizzas[0].description),h.xp6(14),h.Oqu(r.pizzas[1].name),h.xp6(2),h.Oqu(r.pizzas[1].description))},styles:["*[_ngcontent-%COMP%]{margin:0;padding:0}#top1[_ngcontent-%COMP%]{color:#f50a0a;text-align:center;font-size:46px;font-family:monospace}#navbar[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:green;height:14vh;width:100%;font-family:monospace;margin-top:10px}#navcontent[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin:15px;border-radius:20px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-right:110px;color:#fff;text-decoration:none;border-right:1px solid white;font-size:25px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:red;border-radius:2px}#container1[_ngcontent-%COMP%]{margin:20px 0;text-align:center;font-size:xx-large}.btn[_ngcontent-%COMP%]{margin:20px 0;font-size:20px;color:#fff;background-color:green;padding:10px;border:none}a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.arrow-image[_ngcontent-%COMP%]{width:80px}@media (max-width: 640px){#navbar[_ngcontent-%COMP%]{text-align:center;height:190px;font-size:10px;border:none}#navcontent[_ngcontent-%COMP%]{flex-direction:column}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:.8em 0}}"]}),n})()},{path:"cart",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-cart"]],decls:4,vars:0,consts:[[2,"align-items","center","text-align","center","width","300px"],["src","./../../../assets/under-construction.png","alt","under-construction",2,"width","400px","margin","200px 500px","opacity","60%"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"p"),h._uU(2,"we're working!"),h.qZA(),h._UZ(3,"img",1),h.qZA())}}),n})()},{path:"",redirectTo:"home",pathMatch:"full"}];let Lk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Mg.forRoot(Fk),Mg]}),n})(),Vk=(()=>{class n{constructor(){this.title="food_delivery_pwa"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[Jy]}),n})();const WN_firebase={apiKey:"AIzaSyAiSEC4IaT7LXLZqyS78JhsFTFP48QWoG0",authDomain:"pwa-app-1234.firebaseapp.com",projectId:"pwa-app-1234",storageBucket:"pwa-app-1234.appspot.com",messagingSenderId:"310078919824",appId:"1:310078919824:web:fa6e2500f2d76f0aefb415",measurementId:"G-QJLY6PHHKH"};var Uk=M(6878);class DM{constructor(e){return e}}class ZN{constructor(){return(0,un.vb)("auth")}}const CM=new h.OlP("angularfire2.auth-instances");function $k(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new DM(r)}}const jk={provide:ZN,deps:[[new h.FiY,CM]]},zk={provide:DM,useFactory:function Bk(n,e){const t=(0,un.JM)("auth",n,e);return t&&new DM(t)},deps:[[new h.FiY,CM],sp]};let Hk=(()=>{class n{constructor(){(0,rl.KN)("angularfire",un.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[zk,jk]}),n})();function Gk(n,...e){return{ngModule:Hk,providers:[{provide:CM,useFactory:$k(n),multi:!0,deps:[h.R0b,h.zs3,un.HU,XC,[new h.FiY,yw],...e]}]}}const Wk=(0,un.u3)(Uk.o,!0);class bM{constructor(e){return e}}const KN="firestore",TM=new h.OlP("angularfire2.firestore-instances");function Kk(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new bM(r)}}const Yk={provide:class qk{constructor(){return(0,un.vb)(KN)}},deps:[[new h.FiY,TM]]},Qk={provide:bM,useFactory:function Zk(n,e){const t=(0,un.JM)(KN,n,e);return t&&new bM(t)},deps:[[new h.FiY,TM],sp]};let Jk=(()=>{class n{constructor(){(0,rl.KN)("angularfire",un.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Qk,Yk]}),n})();function Xk(n,...e){return{ngModule:Jk,providers:[{provide:TM,useFactory:Kk(n),multi:!0,deps:[h.R0b,h.zs3,un.HU,XC,[new h.FiY,ZN],[new h.FiY,yw],...e]}]}}const eF=(0,un.u3)(fO,!0);class SM{constructor(e){return e}}const YN="messaging",AM=new h.OlP("angularfire2.messaging-instances");function rF(n){return(e,t)=>{if(!un.n1.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new SM(r)}}const iF={provide:class tF{constructor(){return(0,un.vb)(YN)}},deps:[[new h.FiY,AM]]},sF={provide:SM,useFactory:function nF(n,e){if(!un.n1.sync())return null;const t=(0,un.JM)(YN,n,e);return t&&new SM(t)},deps:[[new h.FiY,AM],sp]};let oF=(()=>{class n{constructor(){(0,rl.KN)("angularfire",un.q4.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[sF,iF,{provide:h.ip1,useValue:un.n1.async,multi:!0}]}),n})();function aF(n,...e){return{ngModule:oF,providers:[{provide:AM,useFactory:rF(n),multi:!0,deps:[h.R0b,h.zs3,un.HU,XC,...e]}]}}const uF=(0,un.u3)(VR.KL,!0);var cF=M(4266);const lF=["addListener","removeListener"],dF=["addEventListener","removeEventListener"],hF=["on","off"];function wb(n,e,t,r){if((0,wi.m)(t)&&(r=t,t=void 0),r)return wb(n,e,t).pipe(nu(r));const[o,u]=function gF(n){return(0,wi.m)(n.addEventListener)&&(0,wi.m)(n.removeEventListener)}(n)?dF.map(l=>m=>n[l](e,m,t)):function fF(n){return(0,wi.m)(n.addListener)&&(0,wi.m)(n.removeListener)}(n)?lF.map(QN(n,e)):function pF(n){return(0,wi.m)(n.on)&&(0,wi.m)(n.off)}(n)?hF.map(QN(n,e)):[];if(!o&&(0,cF.z)(n))return(0,Dr.z)(l=>wb(l,e,t))((0,Fo.Xf)(n));if(!o)throw new TypeError("Invalid event target");return new Hr.y(l=>{const m=(...w)=>l.next(1<w.length?w:w[0]);return o(m),()=>u(m)})}function QN(n,e){return t=>r=>n[t](e,r)}var JN=M(2420);const Ld=new Hr.y(JN.Z),yF={connector:()=>new Ls.x};function XN(n,e=yF){const{connector:t}=e;return(0,Ei.e)((r,o)=>{const u=t();(0,Fo.Xf)(n(function mF(n){return new Hr.y(e=>n.subscribe(e))}(u))).subscribe(o),o.add(r.subscribe(u))})}function eO(n,e){return e?t=>os(e.pipe(Yr(1),function wF(){return(0,Ei.e)((n,e)=>{n.subscribe((0,ss.x)(e,JN.Z))})}()),t.pipe(eO(n))):(0,Dr.z)((t,r)=>(0,Fo.Xf)(n(t,r)).pipe(Yr(1),sh(t)))}var EF=M(671);const Iw="Service workers are disabled or not supported by this browser";class Eb{constructor(e){if(this.serviceWorker=e,e){const r=wb(e,"controllerchange").pipe((0,Lt.U)(()=>e.controller)),u=os(wl(()=>(0,_t.of)(e.controller)),r);this.worker=u.pipe(Qr(b=>!!b)),this.registration=this.worker.pipe((0,Ln.w)(()=>e.getRegistration()));const D=wb(e,"message").pipe((0,Lt.U)(b=>b.data)).pipe(Qr(b=>b&&b.type)).pipe(function _F(n){return n?e=>XN(n)(e):e=>function vF(n,e){const t=(0,wi.m)(n)?n:()=>n;return(0,wi.m)(e)?XN(e,{connector:t}):r=>new Fs(r,t)}(new Ls.x)(e)}());D.connect(),this.events=D}else this.worker=this.events=this.registration=function bF(n){return wl(()=>to(new Error(n)))}(Iw)}postMessage(e,t){return this.worker.pipe(Yr(1),(0,pr.b)(r=>{r.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const o=this.waitForOperationCompleted(r),u=this.postMessage(e,t);return Promise.all([u,o]).then(([,l])=>l)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(Qr(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Yr(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(Qr(t=>t.nonce===e),Yr(1),(0,Lt.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let tO=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new Ls.x,!t.isEnabled)return this.messages=Ld,this.notificationClicks=Ld,void(this.subscription=Ld);this.messages=this.sw.eventsOfType("PUSH").pipe((0,Lt.U)(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,Lt.U)(o=>o.data)),this.pushManager=this.sw.registration.pipe((0,Lt.U)(o=>o.pushManager));const r=this.pushManager.pipe((0,Ln.w)(o=>o.getSubscription()));this.subscription=(0,AA.T)(r,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(Iw));const r={userVisibleOnly:!0};let o=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),u=new Uint8Array(new ArrayBuffer(o.length));for(let l=0;l<o.length;l++)u[l]=o.charCodeAt(l);return r.applicationServerKey=u,this.pushManager.pipe((0,Ln.w)(l=>l.subscribe(r)),Yr(1)).toPromise().then(l=>(this.subscriptionChanges.next(l),l))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Yr(1),(0,Ln.w)(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Iw))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Eb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),nO=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=Ld,this.available=Ld,this.activated=Ld,void(this.unrecoverable=Ld);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(Qr(r=>"VERSION_READY"===r.type),(0,Lt.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Iw));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Iw));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Eb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const rO=new h.OlP("NGSW_REGISTER_SCRIPT");function TF(n,e,t,r){return()=>{if(!ia(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let o;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)o=t.registrationStrategy();else{const[l,...m]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(l){case"registerImmediately":o=(0,_t.of)(null);break;case"registerWithDelay":o=iO(+m[0]||0);break;case"registerWhenStable":o=m[0]?(0,AA.T)(sO(n),iO(+m[0])):sO(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(h.R0b).runOutsideAngular(()=>o.pipe(Yr(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(l=>console.error("Service worker registration failed with:",l))))}}function iO(n){return(0,_t.of)(null).pipe(function CF(n,e=TE.z){const t=function DF(n=0,e,t=TE.P){let r=-1;return null!=e&&((0,EF.K)(e)?t=e:r=e),new Hr.y(o=>{let u=function IF(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let l=0;return t.schedule(function(){o.closed||(o.next(l++),0<=r?this.schedule(void 0,r):o.complete())},u)})}(n,e);return eO(()=>t)}(n))}function sO(n){return n.get(h.z2F).isStable.pipe(Qr(t=>t))}function SF(n,e){return new Eb(ia(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}class MM{}function AF(n,e={}){return(0,h.MR2)([tO,nO,{provide:rO,useValue:n},{provide:MM,useValue:e},{provide:Eb,useFactory:SF,deps:[MM,h.Lbi]},{provide:h.ip1,useFactory:TF,deps:[h.zs3,rO,MM,h.Lbi],multi:!0}])}let MF=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[AF(t,r)]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[tO,nO]}),n})(),xF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[Vk]}),n.\u0275inj=h.cJS({providers:[nM,ja],imports:[Yd,Lk,xk,Ci.hO,A1,N1,xP(()=>RP(WN_firebase)),Gk(()=>Wk()),Xk(()=>eF()),Ci.hO.initializeApp(WN_firebase),MF.register("ngsw-worker.js",{enabled:!(0,h.X6Q)(),registrationStrategy:"registerWhenStable:30000"}),aF(()=>uF())]}),n})();Rp().bootstrapModule(xF).catch(n=>console.error(n))},5619:(pt,be,M)=>{M.d(be,{X:()=>U});var h=M(8645);class U extends h.x{constructor(ee){super(),this._value=ee}get value(){return this.getValue()}_subscribe(ee){const se=super._subscribe(ee);return!se.closed&&ee.next(this._value),se}getValue(){const{hasError:ee,thrownError:se,_value:ye}=this;if(ee)throw se;return this._throwIfClosed(),ye}next(ee){super.next(this._value=ee)}}},5592:(pt,be,M)=>{M.d(be,{y:()=>Ne});var h=M(305),U=M(7394),O=M(4850),ee=M(8407),se=M(2653),ye=M(4674),_e=M(1441);let Ne=(()=>{class ne{constructor(Ee){Ee&&(this._subscribe=Ee)}lift(Ee){const Qe=new ne;return Qe.source=this,Qe.operator=Ee,Qe}subscribe(Ee,Qe,Oe){const Ge=function G(ne){return ne&&ne instanceof h.Lv||function B(ne){return ne&&(0,ye.m)(ne.next)&&(0,ye.m)(ne.error)&&(0,ye.m)(ne.complete)}(ne)&&(0,U.Nn)(ne)}(Ee)?Ee:new h.Hp(Ee,Qe,Oe);return(0,_e.x)(()=>{const{operator:Re,source:dt}=this;Ge.add(Re?Re.call(Ge,dt):dt?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(Ee){try{return this._subscribe(Ee)}catch(Qe){Ee.error(Qe)}}forEach(Ee,Qe){return new(Qe=pe(Qe))((Oe,Ge)=>{const Re=new h.Hp({next:dt=>{try{Ee(dt)}catch(ct){Ge(ct),Re.unsubscribe()}},error:Ge,complete:Oe});this.subscribe(Re)})}_subscribe(Ee){var Qe;return null===(Qe=this.source)||void 0===Qe?void 0:Qe.subscribe(Ee)}[O.L](){return this}pipe(...Ee){return(0,ee.U)(Ee)(this)}toPromise(Ee){return new(Ee=pe(Ee))((Qe,Oe)=>{let Ge;this.subscribe(Re=>Ge=Re,Re=>Oe(Re),()=>Qe(Ge))})}}return ne.create=Le=>new ne(Le),ne})();function pe(ne){var Le;return null!==(Le=ne??se.config.Promise)&&void 0!==Le?Le:Promise}},8645:(pt,be,M)=>{M.d(be,{x:()=>_e});var h=M(5592),U=M(7394);const ee=(0,M(2306).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=M(9039),ye=M(1441);let _e=(()=>{class pe extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const ne=new Ne(this,this);return ne.operator=G,ne}_throwIfClosed(){if(this.closed)throw new ee}next(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(G)}})}error(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:ne}=this;for(;ne.length;)ne.shift().error(G)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:ne,isStopped:Le,observers:Ee}=this;return ne||Le?U.Lc:(this.currentObservers=null,Ee.push(G),new U.w0(()=>{this.currentObservers=null,(0,se.P)(Ee,G)}))}_checkFinalizedStatuses(G){const{hasError:ne,thrownError:Le,isStopped:Ee}=this;ne?G.error(Le):Ee&&G.complete()}asObservable(){const G=new h.y;return G.source=this,G}}return pe.create=(B,G)=>new Ne(B,G),pe})();class Ne extends _e{constructor(B,G){super(),this.destination=B,this.source=G}next(B){var G,ne;null===(ne=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===ne||ne.call(G,B)}error(B){var G,ne;null===(ne=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===ne||ne.call(G,B)}complete(){var B,G;null===(G=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===G||G.call(B)}_subscribe(B){var G,ne;return null!==(ne=null===(G=this.source)||void 0===G?void 0:G.subscribe(B))&&void 0!==ne?ne:U.Lc}}},305:(pt,be,M)=>{M.d(be,{Hp:()=>Oe,Lv:()=>ne});var h=M(4674),U=M(7394),O=M(2653),ee=M(3894),se=M(2420);const ye=pe("C",void 0,void 0);function pe(J,Ie,ae){return{kind:J,value:Ie,error:ae}}var B=M(7599),G=M(1441);class ne extends U.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,U.Nn)(Ie)&&Ie.add(this)):this.destination=ct}static create(Ie,ae,Me){return new Oe(Ie,ae,Me)}next(Ie){this.isStopped?dt(function Ne(J){return pe("N",J,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?dt(function _e(J){return pe("E",void 0,J)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?dt(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Ee(J,Ie){return Le.call(J,Ie)}class Qe{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:ae}=this;if(ae.next)try{ae.next(Ie)}catch(Me){Ge(Me)}}error(Ie){const{partialObserver:ae}=this;if(ae.error)try{ae.error(Ie)}catch(Me){Ge(Me)}else Ge(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(ae){Ge(ae)}}}class Oe extends ne{constructor(Ie,ae,Me){let Ve;if(super(),(0,h.m)(Ie)||!Ie)Ve={next:Ie??void 0,error:ae??void 0,complete:Me??void 0};else{let z;this&&O.config.useDeprecatedNextContext?(z=Object.create(Ie),z.unsubscribe=()=>this.unsubscribe(),Ve={next:Ie.next&&Ee(Ie.next,z),error:Ie.error&&Ee(Ie.error,z),complete:Ie.complete&&Ee(Ie.complete,z)}):Ve=Ie}this.destination=new Qe(Ve)}}function Ge(J){O.config.useDeprecatedSynchronousErrorHandling?(0,G.O)(J):(0,ee.h)(J)}function dt(J,Ie){const{onStoppedNotification:ae}=O.config;ae&&B.z.setTimeout(()=>ae(J,Ie))}const ct={closed:!0,next:se.Z,error:function Re(J){throw J},complete:se.Z}},7394:(pt,be,M)=>{M.d(be,{Lc:()=>ye,w0:()=>se,Nn:()=>_e});var h=M(4674);const O=(0,M(2306).d)(pe=>function(G){pe(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((ne,Le)=>`${Le+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ee=M(9039);class se{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Ee of G)Ee.remove(this);else G.remove(this);const{initialTeardown:ne}=this;if((0,h.m)(ne))try{ne()}catch(Ee){B=Ee instanceof O?Ee.errors:[Ee]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Ee of Le)try{Ne(Ee)}catch(Qe){B=B??[],Qe instanceof O?B=[...B,...Qe.errors]:B.push(Qe)}}if(B)throw new O(B)}}add(B){var G;if(B&&B!==this)if(this.closed)Ne(B);else{if(B instanceof se){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(B)}}_hasParent(B){const{_parentage:G}=this;return G===B||Array.isArray(G)&&G.includes(B)}_addParent(B){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(B),G):G?[G,B]:B}_removeParent(B){const{_parentage:G}=this;G===B?this._parentage=null:Array.isArray(G)&&(0,ee.P)(G,B)}remove(B){const{_finalizers:G}=this;G&&(0,ee.P)(G,B),B instanceof se&&B._removeParent(this)}}se.EMPTY=(()=>{const pe=new se;return pe.closed=!0,pe})();const ye=se.EMPTY;function _e(pe){return pe instanceof se||pe&&"closed"in pe&&(0,h.m)(pe.remove)&&(0,h.m)(pe.add)&&(0,h.m)(pe.unsubscribe)}function Ne(pe){(0,h.m)(pe)?pe():pe.unsubscribe()}},2653:(pt,be,M)=>{M.d(be,{config:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(pt,be,M)=>{M.d(be,{E:()=>U});const U=new(M(5592).y)(se=>se.complete())},2459:(pt,be,M)=>{M.d(be,{D:()=>Ie});var h=M(4829),U=M(3093),O=M(5137),ye=M(5592),Ne=M(4971),pe=M(4674),B=M(7103);function ne(ae,Me){if(!ae)throw new Error("Iterable cannot be null");return new ye.y(Ve=>{(0,B.f)(Ve,Me,()=>{const z=ae[Symbol.asyncIterator]();(0,B.f)(Ve,Me,()=>{z.next().then(De=>{De.done?Ve.complete():Ve.next(De.value)})},0,!0)})})}var Le=M(8382),Ee=M(4026),Qe=M(4266),Oe=M(3664),Ge=M(5726),Re=M(9853),dt=M(541);function Ie(ae,Me){return Me?function J(ae,Me){if(null!=ae){if((0,Le.c)(ae))return function ee(ae,Me){return(0,h.Xf)(ae).pipe((0,O.R)(Me),(0,U.Q)(Me))}(ae,Me);if((0,Qe.z)(ae))return function _e(ae,Me){return new ye.y(Ve=>{let z=0;return Me.schedule(function(){z===ae.length?Ve.complete():(Ve.next(ae[z++]),Ve.closed||this.schedule())})})}(ae,Me);if((0,Ee.t)(ae))return function se(ae,Me){return(0,h.Xf)(ae).pipe((0,O.R)(Me),(0,U.Q)(Me))}(ae,Me);if((0,Ge.D)(ae))return ne(ae,Me);if((0,Oe.T)(ae))return function G(ae,Me){return new ye.y(Ve=>{let z;return(0,B.f)(Ve,Me,()=>{z=ae[Ne.h](),(0,B.f)(Ve,Me,()=>{let De,je;try{({value:De,done:je}=z.next())}catch(wt){return void Ve.error(wt)}je?Ve.complete():Ve.next(De)},0,!0)}),()=>(0,pe.m)(z?.return)&&z.return()})}(ae,Me);if((0,dt.L)(ae))return function ct(ae,Me){return ne((0,dt.Q)(ae),Me)}(ae,Me)}throw(0,Re.z)(ae)}(ae,Me):(0,h.Xf)(ae)}},4829:(pt,be,M)=>{M.d(be,{Xf:()=>Le});var h=M(7582),U=M(4266),O=M(4026),ee=M(5592),se=M(8382),ye=M(5726),_e=M(9853),Ne=M(3664),pe=M(541),B=M(4674),G=M(3894),ne=M(4850);function Le(J){if(J instanceof ee.y)return J;if(null!=J){if((0,se.c)(J))return function Ee(J){return new ee.y(Ie=>{const ae=J[ne.L]();if((0,B.m)(ae.subscribe))return ae.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(J);if((0,U.z)(J))return function Qe(J){return new ee.y(Ie=>{for(let ae=0;ae<J.length&&!Ie.closed;ae++)Ie.next(J[ae]);Ie.complete()})}(J);if((0,O.t)(J))return function Oe(J){return new ee.y(Ie=>{J.then(ae=>{Ie.closed||(Ie.next(ae),Ie.complete())},ae=>Ie.error(ae)).then(null,G.h)})}(J);if((0,ye.D)(J))return Re(J);if((0,Ne.T)(J))return function Ge(J){return new ee.y(Ie=>{for(const ae of J)if(Ie.next(ae),Ie.closed)return;Ie.complete()})}(J);if((0,pe.L)(J))return function dt(J){return Re((0,pe.Q)(J))}(J)}throw(0,_e.z)(J)}function Re(J){return new ee.y(Ie=>{(function ct(J,Ie){var ae,Me,Ve,z;return(0,h.mG)(this,void 0,void 0,function*(){try{for(ae=(0,h.KL)(J);!(Me=yield ae.next()).done;)if(Ie.next(Me.value),Ie.closed)return}catch(De){Ve={error:De}}finally{try{Me&&!Me.done&&(z=ae.return)&&(yield z.call(ae))}finally{if(Ve)throw Ve.error}}Ie.complete()})})(J,Ie).catch(ae=>Ie.error(ae))})}},3019:(pt,be,M)=>{M.d(be,{T:()=>ye});var h=M(7537),U=M(4829),O=M(6232),ee=M(9940),se=M(2459);function ye(..._e){const Ne=(0,ee.yG)(_e),pe=(0,ee._6)(_e,1/0),B=_e;return B.length?1===B.length?(0,U.Xf)(B[0]):(0,h.J)(pe)((0,se.D)(B,Ne)):O.E}},2096:(pt,be,M)=>{M.d(be,{of:()=>O});var h=M(9940),U=M(2459);function O(...ee){const se=(0,h.yG)(ee);return(0,U.D)(ee,se)}},8251:(pt,be,M)=>{M.d(be,{x:()=>U});var h=M(305);function U(ee,se,ye,_e,Ne){return new O(ee,se,ye,_e,Ne)}class O extends h.Lv{constructor(se,ye,_e,Ne,pe,B){super(se),this.onFinalize=pe,this.shouldUnsubscribe=B,this._next=ye?function(G){try{ye(G)}catch(ne){se.error(ne)}}:super._next,this._error=Ne?function(G){try{Ne(G)}catch(ne){se.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(G){se.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},3997:(pt,be,M)=>{M.d(be,{x:()=>ee});var h=M(2737),U=M(9360),O=M(8251);function ee(ye,_e=h.y){return ye=ye??se,(0,U.e)((Ne,pe)=>{let B,G=!0;Ne.subscribe((0,O.x)(pe,ne=>{const Le=_e(ne);(G||!ye(B,Le))&&(G=!1,B=Le,pe.next(ne))}))})}function se(ye,_e){return ye===_e}},7398:(pt,be,M)=>{M.d(be,{U:()=>O});var h=M(9360),U=M(8251);function O(ee,se){return(0,h.e)((ye,_e)=>{let Ne=0;ye.subscribe((0,U.x)(_e,pe=>{_e.next(ee.call(se,pe,Ne++))}))})}},7537:(pt,be,M)=>{M.d(be,{J:()=>O});var h=M(1631),U=M(2737);function O(ee=1/0){return(0,h.z)(U.y,ee)}},1631:(pt,be,M)=>{M.d(be,{z:()=>Ne});var h=M(7398),U=M(4829),O=M(9360),ee=M(7103),se=M(8251),_e=M(4674);function Ne(pe,B,G=1/0){return(0,_e.m)(B)?Ne((ne,Le)=>(0,h.U)((Ee,Qe)=>B(ne,Ee,Le,Qe))((0,U.Xf)(pe(ne,Le))),G):("number"==typeof B&&(G=B),(0,O.e)((ne,Le)=>function ye(pe,B,G,ne,Le,Ee,Qe,Oe){const Ge=[];let Re=0,dt=0,ct=!1;const J=()=>{ct&&!Ge.length&&!Re&&B.complete()},Ie=Me=>Re<ne?ae(Me):Ge.push(Me),ae=Me=>{Ee&&B.next(Me),Re++;let Ve=!1;(0,U.Xf)(G(Me,dt++)).subscribe((0,se.x)(B,z=>{Le?.(z),Ee?Ie(z):B.next(z)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(Re--;Ge.length&&Re<ne;){const z=Ge.shift();Qe?(0,ee.f)(B,Qe,()=>ae(z)):ae(z)}J()}catch(z){B.error(z)}}))};return pe.subscribe((0,se.x)(B,Ie,()=>{ct=!0,J()})),()=>{Oe?.()}}(ne,Le,pe,G)))}},3093:(pt,be,M)=>{M.d(be,{Q:()=>ee});var h=M(7103),U=M(9360),O=M(8251);function ee(se,ye=0){return(0,U.e)((_e,Ne)=>{_e.subscribe((0,O.x)(Ne,pe=>(0,h.f)(Ne,se,()=>Ne.next(pe),ye),()=>(0,h.f)(Ne,se,()=>Ne.complete(),ye),pe=>(0,h.f)(Ne,se,()=>Ne.error(pe),ye)))})}},3020:(pt,be,M)=>{M.d(be,{B:()=>se});var h=M(4829),U=M(8645),O=M(305),ee=M(9360);function se(_e={}){const{connector:Ne=(()=>new U.x),resetOnError:pe=!0,resetOnComplete:B=!0,resetOnRefCountZero:G=!0}=_e;return ne=>{let Le,Ee,Qe,Oe=0,Ge=!1,Re=!1;const dt=()=>{Ee?.unsubscribe(),Ee=void 0},ct=()=>{dt(),Le=Qe=void 0,Ge=Re=!1},J=()=>{const Ie=Le;ct(),Ie?.unsubscribe()};return(0,ee.e)((Ie,ae)=>{Oe++,!Re&&!Ge&&dt();const Me=Qe=Qe??Ne();ae.add(()=>{Oe--,0===Oe&&!Re&&!Ge&&(Ee=ye(J,G))}),Me.subscribe(ae),!Le&&Oe>0&&(Le=new O.Hp({next:Ve=>Me.next(Ve),error:Ve=>{Re=!0,dt(),Ee=ye(ct,pe,Ve),Me.error(Ve)},complete:()=>{Ge=!0,dt(),Ee=ye(ct,B),Me.complete()}}),(0,h.Xf)(Ie).subscribe(Le))})(ne)}}function ye(_e,Ne,...pe){if(!0===Ne)return void _e();if(!1===Ne)return;const B=new O.Hp({next:()=>{B.unsubscribe(),_e()}});return(0,h.Xf)(Ne(...pe)).subscribe(B)}},5137:(pt,be,M)=>{M.d(be,{R:()=>U});var h=M(9360);function U(O,ee=0){return(0,h.e)((se,ye)=>{ye.add(O.schedule(()=>se.subscribe(ye),ee))})}},4664:(pt,be,M)=>{M.d(be,{w:()=>ee});var h=M(4829),U=M(9360),O=M(8251);function ee(se,ye){return(0,U.e)((_e,Ne)=>{let pe=null,B=0,G=!1;const ne=()=>G&&!pe&&Ne.complete();_e.subscribe((0,O.x)(Ne,Le=>{pe?.unsubscribe();let Ee=0;const Qe=B++;(0,h.Xf)(se(Le,Qe)).subscribe(pe=(0,O.x)(Ne,Oe=>Ne.next(ye?ye(Le,Oe,Qe,Ee++):Oe),()=>{pe=null,ne()}))},()=>{G=!0,ne()}))})}},9397:(pt,be,M)=>{M.d(be,{b:()=>se});var h=M(4674),U=M(9360),O=M(8251),ee=M(2737);function se(ye,_e,Ne){const pe=(0,h.m)(ye)||_e||Ne?{next:ye,error:_e,complete:Ne}:ye;return pe?(0,U.e)((B,G)=>{var ne;null===(ne=pe.subscribe)||void 0===ne||ne.call(pe);let Le=!0;B.subscribe((0,O.x)(G,Ee=>{var Qe;null===(Qe=pe.next)||void 0===Qe||Qe.call(pe,Ee),G.next(Ee)},()=>{var Ee;Le=!1,null===(Ee=pe.complete)||void 0===Ee||Ee.call(pe),G.complete()},Ee=>{var Qe;Le=!1,null===(Qe=pe.error)||void 0===Qe||Qe.call(pe,Ee),G.error(Ee)},()=>{var Ee,Qe;Le&&(null===(Ee=pe.unsubscribe)||void 0===Ee||Ee.call(pe)),null===(Qe=pe.finalize)||void 0===Qe||Qe.call(pe)}))}):ee.y}},1954:(pt,be,M)=>{M.d(be,{o:()=>se});var h=M(7394);class U extends h.w0{constructor(_e,Ne){super()}schedule(_e,Ne=0){return this}}const O={setInterval(ye,_e,...Ne){const{delegate:pe}=O;return pe?.setInterval?pe.setInterval(ye,_e,...Ne):setInterval(ye,_e,...Ne)},clearInterval(ye){const{delegate:_e}=O;return(_e?.clearInterval||clearInterval)(ye)},delegate:void 0};var ee=M(9039);class se extends U{constructor(_e,Ne){super(_e,Ne),this.scheduler=_e,this.work=Ne,this.pending=!1}schedule(_e,Ne=0){var pe;if(this.closed)return this;this.state=_e;const B=this.id,G=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId(G,B,Ne)),this.pending=!0,this.delay=Ne,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId(G,this.id,Ne),this}requestAsyncId(_e,Ne,pe=0){return O.setInterval(_e.flush.bind(_e,this),pe)}recycleAsyncId(_e,Ne,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return Ne;null!=Ne&&O.clearInterval(Ne)}execute(_e,Ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(_e,Ne);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,Ne){let B,pe=!1;try{this.work(_e)}catch(G){pe=!0,B=G||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:_e,scheduler:Ne}=this,{actions:pe}=Ne;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.P)(pe,this),null!=_e&&(this.id=this.recycleAsyncId(Ne,_e,null)),this.delay=null,super.unsubscribe()}}}},2631:(pt,be,M)=>{M.d(be,{v:()=>O});var h=M(4552);class U{constructor(se,ye=U.now){this.schedulerActionCtor=se,this.now=ye}schedule(se,ye=0,_e){return new this.schedulerActionCtor(this,se).schedule(_e,ye)}}U.now=h.l.now;class O extends U{constructor(se,ye=U.now){super(se,ye),this.actions=[],this._active=!1}flush(se){const{actions:ye}=this;if(this._active)return void ye.push(se);let _e;this._active=!0;do{if(_e=se.execute(se.state,se.delay))break}while(se=ye.shift());if(this._active=!1,_e){for(;se=ye.shift();)se.unsubscribe();throw _e}}}},6321:(pt,be,M)=>{M.d(be,{P:()=>ee,z:()=>O});var h=M(1954);const O=new(M(2631).v)(h.o),ee=O},4552:(pt,be,M)=>{M.d(be,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},7599:(pt,be,M)=>{M.d(be,{z:()=>h});const h={setTimeout(U,O,...ee){const{delegate:se}=h;return se?.setTimeout?se.setTimeout(U,O,...ee):setTimeout(U,O,...ee)},clearTimeout(U){const{delegate:O}=h;return(O?.clearTimeout||clearTimeout)(U)},delegate:void 0}},4971:(pt,be,M)=>{M.d(be,{h:()=>U});const U=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(pt,be,M)=>{M.d(be,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(pt,be,M)=>{M.d(be,{_6:()=>ye,jO:()=>ee,yG:()=>se});var h=M(4674),U=M(671);function O(_e){return _e[_e.length-1]}function ee(_e){return(0,h.m)(O(_e))?_e.pop():void 0}function se(_e){return(0,U.K)(O(_e))?_e.pop():void 0}function ye(_e,Ne){return"number"==typeof O(_e)?_e.pop():Ne}},9039:(pt,be,M)=>{function h(U,O){if(U){const ee=U.indexOf(O);0<=ee&&U.splice(ee,1)}}M.d(be,{P:()=>h})},2306:(pt,be,M)=>{function h(U){const ee=U(se=>{Error.call(se),se.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}M.d(be,{d:()=>h})},1441:(pt,be,M)=>{M.d(be,{O:()=>ee,x:()=>O});var h=M(2653);let U=null;function O(se){if(h.config.useDeprecatedSynchronousErrorHandling){const ye=!U;if(ye&&(U={errorThrown:!1,error:null}),se(),ye){const{errorThrown:_e,error:Ne}=U;if(U=null,_e)throw Ne}}else se()}function ee(se){h.config.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=se)}},7103:(pt,be,M)=>{function h(U,O,ee,se=0,ye=!1){const _e=O.schedule(function(){ee(),ye?U.add(this.schedule(null,se)):this.unsubscribe()},se);if(U.add(_e),!ye)return _e}M.d(be,{f:()=>h})},2737:(pt,be,M)=>{function h(U){return U}M.d(be,{y:()=>h})},4266:(pt,be,M)=>{M.d(be,{z:()=>h});const h=U=>U&&"number"==typeof U.length&&"function"!=typeof U},5726:(pt,be,M)=>{M.d(be,{D:()=>U});var h=M(4674);function U(O){return Symbol.asyncIterator&&(0,h.m)(O?.[Symbol.asyncIterator])}},4674:(pt,be,M)=>{function h(U){return"function"==typeof U}M.d(be,{m:()=>h})},8382:(pt,be,M)=>{M.d(be,{c:()=>O});var h=M(4850),U=M(4674);function O(ee){return(0,U.m)(ee[h.L])}},3664:(pt,be,M)=>{M.d(be,{T:()=>O});var h=M(4971),U=M(4674);function O(ee){return(0,U.m)(ee?.[h.h])}},4026:(pt,be,M)=>{M.d(be,{t:()=>U});var h=M(4674);function U(O){return(0,h.m)(O?.then)}},541:(pt,be,M)=>{M.d(be,{L:()=>ee,Q:()=>O});var h=M(7582),U=M(4674);function O(se){return(0,h.FC)(this,arguments,function*(){const _e=se.getReader();try{for(;;){const{value:Ne,done:pe}=yield(0,h.qq)(_e.read());if(pe)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(Ne)}}finally{_e.releaseLock()}})}function ee(se){return(0,U.m)(se?.getReader)}},671:(pt,be,M)=>{M.d(be,{K:()=>U});var h=M(4674);function U(O){return O&&(0,h.m)(O.schedule)}},9360:(pt,be,M)=>{M.d(be,{A:()=>U,e:()=>O});var h=M(4674);function U(ee){return(0,h.m)(ee?.lift)}function O(ee){return se=>{if(U(se))return se.lift(function(ye){try{return ee(ye,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(pt,be,M)=>{function h(){}M.d(be,{Z:()=>h})},8407:(pt,be,M)=>{M.d(be,{U:()=>O,z:()=>U});var h=M(2737);function U(...ee){return O(ee)}function O(ee){return 0===ee.length?h.y:1===ee.length?ee[0]:function(ye){return ee.reduce((_e,Ne)=>Ne(_e),ye)}}},3894:(pt,be,M)=>{M.d(be,{h:()=>O});var h=M(2653),U=M(7599);function O(ee){U.z.setTimeout(()=>{const{onUnhandledError:se}=h.config;if(!se)throw ee;se(ee)})}},9853:(pt,be,M)=>{function h(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(be,{z:()=>h})},5879:(pt,be,M)=>{M.d(be,{$8M:()=>Vs,$WT:()=>nr,$Z:()=>Vv,AFp:()=>lT,AaK:()=>ne,CHM:()=>Kd,CRH:()=>$D,EJc:()=>$S,EpF:()=>Cr,F4k:()=>Jh,FYo:()=>Ng,FiY:()=>ha,GfV:()=>xE,Gpc:()=>Qe,HDt:()=>Km,JOm:()=>ng,KtG:()=>Tp,LFG:()=>On,Lbi:()=>bE,Lck:()=>Z_,MMx:()=>Y_,MR2:()=>yE,NdJ:()=>Xh,Ojb:()=>mv,OlP:()=>$n,Oqu:()=>D_,P3R:()=>iT,PXZ:()=>ZS,Q6J:()=>p_,QGY:()=>et,Qsj:()=>Dv,R0b:()=>yi,RDi:()=>Ll,Rgc:()=>Sf,SBq:()=>pc,Sil:()=>zS,Suo:()=>g0,TTD:()=>mp,TgZ:()=>Qh,VuI:()=>dA,X6Q:()=>QS,XFs:()=>ht,Xpm:()=>na,Xq5:()=>a_,Xts:()=>Cg,Y36:()=>mc,YKP:()=>ID,YNc:()=>st,Yjl:()=>on,Yz7:()=>Nt,Z0I:()=>vn,ZZ4:()=>Zf,_Bn:()=>ED,_UZ:()=>CI,_c5:()=>sA,_uU:()=>qo,aQg:()=>K0,c2e:()=>oC,cJS:()=>Zn,cg1:()=>R_,dDg:()=>x0,dqk:()=>jt,eFA:()=>ry,eJc:()=>Bm,ekj:()=>E_,eoX:()=>Gf,f3M:()=>Yt,g9A:()=>dT,h0i:()=>yd,hGG:()=>Q0,iGM:()=>p0,ifc:()=>vt,ip1:()=>Uf,jDz:()=>_o,kL8:()=>N_,lG2:()=>sn,lqb:()=>lc,lri:()=>Xm,n5z:()=>Dr,oAB:()=>te,oxw:()=>m_,q4F:()=>ql,qFp:()=>py,qLn:()=>gu,qOj:()=>o_,qZA:()=>lm,rWj:()=>hC,rg0:()=>Sw,s9C:()=>hm,sBO:()=>JS,s_b:()=>Vm,soG:()=>ii,tb:()=>O0,tp0:()=>Xu,uIk:()=>Ea,vHH:()=>J,vpe:()=>wo,wAp:()=>ld,xp6:()=>kE,z2F:()=>Xc,zSh:()=>EE,zs3:()=>Us});var h=M(8645),U=M(7394),O=M(5619),ee=M(5592),se=M(3019),ye=M(2096),_e=M(3020),Ne=M(4664),pe=M(3997);function B(i){for(let s in i)if(i[s]===B)return s;throw Error("Could not find renamed property on target object.")}function G(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ne(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ne).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function Le(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const Ee=B({__forward_ref__:B});function Qe(i){return i.__forward_ref__=Qe,i.toString=function(){return ne(this())},i}function Oe(i){return Ge(i)?i():i}function Ge(i){return"function"==typeof i&&i.hasOwnProperty(Ee)&&i.__forward_ref__===Qe}function Re(i){return i&&!!i.\u0275providers}const ct="https://g.co/ng/security#xss";class J extends Error{constructor(s,a){super(function Ie(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function ae(i){return"string"==typeof i?i:null==i?"":String(i)}function je(i,s){throw new J(-201,!1)}function rt(i,s){null==i&&function Xe(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Nt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Zn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Kn(i){return Nn(i,lr)||Nn(i,dr)}function vn(i){return null!==Kn(i)}function Nn(i,s){return i.hasOwnProperty(s)?i[s]:null}function Or(i){return i&&(i.hasOwnProperty(Tn)||i.hasOwnProperty(oi))?i[Tn]:null}const lr=B({\u0275prov:B}),Tn=B({\u0275inj:B}),dr=B({ngInjectableDef:B}),oi=B({ngInjectorDef:B});var ht=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(ht||{});let xt;function Rt(i){const s=xt;return xt=i,s}function _r(i,s,a){const c=Kn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&ht.Optional?null:void 0!==s?s:void je(ne(i))}const jt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ui={},Pt="__NG_DI_FLAG__",gn="ngTempTokenPath",wr=/\n/gm,Un="__source";let Sn;function Mn(i){const s=Sn;return Sn=i,s}function Hn(i,s=ht.Default){if(void 0===Sn)throw new J(-203,!1);return null===Sn?_r(i,void 0,s):Sn.get(i,s&ht.Optional?null:void 0,s)}function On(i,s=ht.Default){return(function Mt(){return xt}()||Hn)(Oe(i),s)}function Yt(i,s=ht.Default){return On(i,W(s))}function W(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function j(i){const s=[];for(let a=0;a<i.length;a++){const c=Oe(i[a]);if(Array.isArray(c)){if(0===c.length)throw new J(900,!1);let d,f=ht.Default;for(let y=0;y<c.length;y++){const _=c[y],I=P(_);"number"==typeof I?-1===I?d=_.token:f|=I:d=_}s.push(On(d,f))}else s.push(On(c))}return s}function R(i,s){return i[Pt]=s,i.prototype[Pt]=s,i}function P(i){return i[Pt]}function ve(i){return{toString:i}.toString()}var Je=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Je||{}),vt=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(vt||{});const yt={},lt=[],Tt=B({\u0275cmp:B}),mn=B({\u0275dir:B}),Ft=B({\u0275pipe:B}),Jn=B({\u0275mod:B}),Z=B({\u0275fac:B}),L=B({__NG_ELEMENT_ID__:B}),q=B({__NG_ENV_ID__:B});function oe(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}function Ue(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],y=a[c++],_=a[c++];i.setAttribute(s,y,_,f)}else{const f=d,y=a[++c];ft(f)?i.setProperty(s,f,y):i.setAttribute(s,f,y),c++}}return c}function Ke(i){return 3===i||4===i||6===i}function ft(i){return 64===i.charCodeAt(0)}function zt(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||Pn(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function Pn(i,s,a,c,d){let f=0,y=i.length;if(-1===s)y=-1;else for(;f<i.length;){const _=i[f++];if("number"==typeof _){if(_===s){y=-1;break}if(_>s){y=f-1;break}}}for(;f<i.length;){const _=i[f];if("number"==typeof _)break;if(_===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==y&&(i.splice(y,0,s),f=y+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}const kn="ng-template";function Fr(i,s,a){let c=0,d=!0;for(;c<i.length;){let f=i[c++];if("string"==typeof f&&d){const y=i[c++];if(a&&"class"===f&&-1!==oe(y.toLowerCase(),s,0))return!0}else{if(1===f){for(;c<i.length&&"string"==typeof(f=i[c++]);)if(f.toLowerCase()===s)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function en(i){return 4===i.type&&i.value!==kn}function qs(i,s,a){return s===(4!==i.type||a?i.value:kn)}function Eo(i,s,a){let c=4;const d=i.attrs||[],f=function Zs(i){for(let s=0;s<i.length;s++)if(Ke(i[s]))return s;return i.length}(d);let y=!1;for(let _=0;_<s.length;_++){const I=s[_];if("number"!=typeof I){if(!y)if(4&c){if(c=2|1&c,""!==I&&!qs(i,I,a)||""===I&&1===s.length){if(er(c))return!1;y=!0}}else{const C=8&c?I:s[++_];if(8&c&&null!==i.attrs){if(!Fr(i.attrs,C,a)){if(er(c))return!1;y=!0}continue}const F=vi(8&c?"class":I,d,en(i),a);if(-1===F){if(er(c))return!1;y=!0;continue}if(""!==C){let Y;Y=F>f?"":d[F+1].toLowerCase();const ie=8&c?Y:null;if(ie&&-1!==oe(ie,C,0)||2&c&&C!==Y){if(er(c))return!1;y=!0}}}}else{if(!y&&!er(c)&&!er(I))return!1;if(y&&er(I))continue;y=!1,c=I|1&c}}return er(c)||y}function er(i){return 0==(1&i)}function vi(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let f=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let _=s[++d];for(;"string"==typeof _;)_=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function tr(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function Ns(i,s,a=!1){for(let c=0;c<s.length;c++)if(Eo(i,s[c],a))return!0;return!1}function Io(i,s){return i?":not("+s.trim()+")":s}function Ba(i){let s=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const _=i[++a];d+="["+y+(_.length>0?'="'+_+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!er(y)&&(s+=Io(f,d),d=""),c=y,f=f||!er(c);a++}return""!==d&&(s+=Io(f,d)),s}function na(i){return ve(()=>{const s=ja(i),a={...s,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Je.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||vt.Emulated,styles:i.styles||lt,_:null,schemas:i.schemas||null,tView:null,id:""};za(a);const c=i.dependencies;return a.directiveDefs=bo(c,!1),a.pipeDefs=bo(c,!0),a.id=function Vu(i){let s=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)s=Math.imul(31,s)+d.charCodeAt(0)<<0;return s+=2147483648,"c"+s}(a),a})}function Fu(i){return ot(i)||an(i)}function $(i){return null!==i}function te(i){return ve(()=>({type:i.type,bootstrap:i.bootstrap||lt,declarations:i.declarations||lt,imports:i.imports||lt,exports:i.exports||lt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function at(i,s){if(null==i)return yt;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,s&&(s[d]=f)}return a}function sn(i){return ve(()=>{const s=ja(i);return za(s),s})}function on(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function ot(i){return i[Tt]||null}function an(i){return i[mn]||null}function _n(i){return i[Ft]||null}function nr(i){const s=ot(i)||an(i)||_n(i);return null!==s&&s.standalone}function or(i,s){const a=i[Jn]||null;if(!a&&!0===s)throw new Error(`Type ${ne(i)} does not have '\u0275mod' property.`);return a}function ja(i){const s={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:s,inputTransforms:null,inputConfig:i.inputs||yt,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||lt,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:at(i.inputs,s),outputs:at(i.outputs)}}function za(i){i.features?.forEach(s=>s(i))}function bo(i,s){if(!i)return null;const a=s?_n:Fu;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter($)}const hr=0,ut=1,Bt=2,rr=3,ci=4,ra=5,Er=6,Fi=7,Fn=8,Ji=9,Xi=10,St=11,Ks=12,To=13,es=14,jn=15,Ha=16,So=17,ys=18,Ao=19,Ga=20,Ir=21,ts=22,ia=23,Li=24,Qt=25,Br=1,Mo=2,_i=7,Ro=9,$r=11;function k(i){return Array.isArray(i)&&"object"==typeof i[Br]}function H(i){return Array.isArray(i)&&!0===i[Br]}function de(i){return 0!=(4&i.flags)}function we(i){return i.componentOffset>-1}function $e(i){return 1==(1&i.flags)}function We(i){return!!i.template}function kt(i){return 0!=(512&i[Bt])}function No(i,s){return i.hasOwnProperty(Z)?i[Z]:null}let Uu=jt.WeakRef??class zd{constructor(s){this.ref=s}deref(){return this.ref}},dp=0,ns=null,sl=!1;function vr(i){const s=ns;return ns=i,s}class aa{constructor(){this.id=dp++,this.ref=function bw(i){return new Uu(i)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[s,a]of this.producers){const c=a.producerNode.deref();if(null!=c&&a.atTrackingVersion===this.trackingVersion){if(c.producerPollStatus(a.seenValueVersion))return!0}else this.producers.delete(s),c?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const s=sl;sl=!0;try{for(const[a,c]of this.consumers){const d=c.consumerNode.deref();null!=d&&d.trackingVersion===c.atTrackingVersion?d.onConsumerDependencyMayHaveChanged():(this.consumers.delete(a),d?.producers.delete(this.id))}}finally{sl=s}}producerAccessed(){if(sl)throw new Error("");if(null===ns)return;let s=ns.producers.get(this.id);void 0===s?(s={consumerNode:ns.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:ns.trackingVersion},ns.producers.set(this.id,s),this.consumers.set(ns.id,s)):(s.seenValueVersion=this.valueVersion,s.atTrackingVersion=ns.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==ns?.consumerAllowSignalWrites}producerPollStatus(s){return this.valueVersion!==s||(this.onProducerUpdateValueVersion(),this.valueVersion!==s)}}let pp=null;function Sw(i){const s=vr(null);try{return i()}finally{vr(s)}}const Gd=()=>{};class Aw extends aa{constructor(s,a,c){super(),this.watch=s,this.schedule=a,this.dirty=!1,this.cleanupFn=Gd,this.registerOnCleanup=d=>{this.cleanupFn=d},this.consumerAllowSignalWrites=c}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const s=vr(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Gd,this.watch(this.registerOnCleanup)}finally{vr(s)}}cleanup(){this.cleanupFn()}}class Wd{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function mp(){return ol}function ol(i){return i.type.prototype.ngOnChanges&&(i.setInput=yp),Sy}function Sy(){const i=qd(this),s=i?.current;if(s){const a=i.previous;if(a===yt)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function yp(i,s,a,c){const d=this.declaredInputs[a],f=qd(i)||function Mw(i,s){return i[Ay]=s}(i,{previous:yt,current:null}),y=f.current||(f.current={}),_=f.previous,I=_[d];y[d]=new Wd(I&&I.currentValue,s,_===yt),i[c]=s}mp.ngInherit=!0;const Ay="__ngSimpleChanges__";function qd(i){return i[Ay]||null}const _s=function(i,s,a){};function ir(i){for(;Array.isArray(i);)i=i[hr];return i}function ul(i,s){return ir(s[i])}function li(i,s){return ir(s[i.index])}function _p(i,s){return i.data[s]}function rs(i,s){const a=s[i];return k(a)?a:a[hr]}function Po(i,s){return null==s?null:i[s]}function Ep(i){i[So]=0}function Ip(i){1024&i[Bt]||(i[Bt]|=1024,Ja(i,1))}function Dp(i){1024&i[Bt]&&(i[Bt]&=-1025,Ja(i,-1))}function Ja(i,s){let a=i[rr];if(null===a)return;a[ra]+=s;let c=a;for(a=a[rr];null!==a&&(1===s&&1===c[ra]||-1===s&&0===c[ra]);)a[ra]+=s,c=a,a=a[rr]}const Ut={lFrame:Qd(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ju(){return Ut.bindingsEnabled}function ke(){return Ut.lFrame.lView}function Cn(){return Ut.lFrame.tView}function Kd(i){return Ut.lFrame.contextLView=i,i[Fn]}function Tp(i){return Ut.lFrame.contextLView=null,i}function Lr(){let i=Sp();for(;null!==i&&64===i.type;)i=i.parent;return i}function Sp(){return Ut.lFrame.currentTNode}function Vi(i,s){const a=Ut.lFrame;a.currentTNode=i,a.isParent=s}function Ap(){return Ut.lFrame.isParent}function ua(){return Ut.lFrame.bindingIndex++}function dl(i,s){const a=Ut.lFrame;a.bindingIndex=a.bindingRootIndex=i,Np(s)}function Np(i){Ut.lFrame.currentDirectiveIndex=i}function fl(){return Ut.lFrame.currentQueryIndex}function Xa(i){Ut.lFrame.currentQueryIndex=i}function ko(i){const s=i[ut];return 2===s.type?s.declTNode:1===s.type?i[Er]:null}function pl(i,s,a){if(a&ht.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&ht.Host||(d=ko(f),null===d||(f=f[es],10&d.type))););if(null===d)return!1;s=d,i=f}const c=Ut.lFrame=ml();return c.currentTNode=s,c.lView=i,!0}function gl(i){const s=ml(),a=i[ut];Ut.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function ml(){const i=Ut.lFrame,s=null===i?null:i.child;return null===s?Qd(i):s}function Qd(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Ow(){const i=Ut.lFrame;return Ut.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Op=Ow;function Pp(){const i=Ow();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Ri(){return Ut.lFrame.selectedIndex}function eu(i){Ut.lFrame.selectedIndex=i}function sr(){const i=Ut.lFrame;return _p(i.tView,i.selectedIndex)}let Jd=!0;function Xd(){return Jd}function ca(i){Jd=i}function yl(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:_,ngAfterViewInit:I,ngAfterViewChecked:C,ngOnDestroy:S}=f;y&&(i.contentHooks??=[]).push(-a,y),_&&((i.contentHooks??=[]).push(a,_),(i.contentCheckHooks??=[]).push(a,_)),I&&(i.viewHooks??=[]).push(-a,I),C&&((i.viewHooks??=[]).push(a,C),(i.viewCheckHooks??=[]).push(a,C)),null!=S&&(i.destroyHooks??=[]).push(a,S)}}function eh(i,s,a){Hr(i,s,3,a)}function th(i,s,a,c){(3&i[Bt])===a&&Hr(i,s,a,c)}function Lp(i,s){let a=i[Bt];(3&a)===s&&(a&=8191,a+=1,i[Bt]=a)}function Hr(i,s,a,c){const f=c??-1,y=s.length-1;let _=0;for(let I=void 0!==c?65535&i[So]:0;I<y;I++)if("number"==typeof s[I+1]){if(_=s[I],null!=c&&_>=c)break}else s[I]<0&&(i[So]+=65536),(_<f||-1==f)&&(nh(i,a,s,I),i[So]=(4294901760&i[So])+I+2),I++}function wi(i,s){_s(4,i,s);const a=vr(null);try{s.call(i)}finally{vr(a),_s(5,i,s)}}function nh(i,s,a,c){const d=a[c]<0,f=a[c+1],_=i[d?-a[c]:a[c]];d?i[Bt]>>13<i[So]>>16&&(3&i[Bt])===s&&(i[Bt]+=8192,wi(_,f)):wi(_,f)}const Yn=-1;class _t{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Lt(i){return i!==Yn}function _l(i){return 32767&i}function nu(i,s){let a=function Uy(i){return i>>16}(i),c=s;for(;a>0;)c=c[es],a--;return c}let Js=!0;function ru(i){const s=Js;return Js=i,s}const Bp=255,iu=5;let By=0;const Ui={};function Xs(i,s){const a=$p(i,s);if(-1!==a)return a;const c=s[ut];c.firstCreatePass&&(i.injectorIndex=s.length,eo(c.data,i),eo(s,null),eo(c.blueprint,null));const d=os(i,s),f=i.injectorIndex;if(Lt(d)){const y=_l(d),_=nu(d,s),I=_[ut].data;for(let C=0;C<8;C++)s[f+C]=_[y+C]|I[y+C]}return s[f+8]=d,f}function eo(i,s){i.push(0,0,0,0,0,0,0,0,s)}function $p(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function os(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=Il(d),null===c)return Yn;if(a++,d=d[es],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Yn}function Fo(i,s,a){!function $y(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(L)&&(c=a[L]),null==c&&(c=a[L]=By++);const d=c&Bp;s.data[i+(d>>iu)]|=1<<d}(i,s,a)}function El(i,s,a){if(a&ht.Optional||void 0!==i)return i;je()}function to(i,s,a,c){if(a&ht.Optional&&void 0===c&&(c=null),!(a&(ht.Self|ht.Host))){const d=i[Ji],f=Rt(void 0);try{return d?d.get(s,c,a&ht.Optional):_r(s,c,a&ht.Optional)}finally{Rt(f)}}return El(c,0,a)}function as(i,s,a,c=ht.Default,d){if(null!==i){if(2048&s[Bt]&&!(c&ht.Self)){const y=function jp(i,s,a,c,d){let f=i,y=s;for(;null!==f&&null!==y&&2048&y[Bt]&&!(512&y[Bt]);){const _=rh(f,y,a,c|ht.Self,Ui);if(_!==Ui)return _;let I=f.parent;if(!I){const C=y[Ga];if(C){const S=C.get(a,Ui,c);if(S!==Ui)return S}I=Il(y),y=y[es]}f=I}return d}(i,s,a,c,Ui);if(y!==Ui)return y}const f=rh(i,s,a,c,Ui);if(f!==Ui)return f}return to(s,a,c,d)}function rh(i,s,a,c,d){const f=function Ls(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(L)?i[L]:void 0;return"number"==typeof s?s>=0?s&Bp:Qr:s}(a);if("function"==typeof f){if(!pl(s,i,c))return c&ht.Host?El(d,0,c):to(s,a,c,d);try{const y=f(c);if(null!=y||c&ht.Optional)return y;je()}finally{Op()}}else if("number"==typeof f){let y=null,_=$p(i,s),I=Yn,C=c&ht.Host?s[jn][Er]:null;for((-1===_||c&ht.SkipSelf)&&(I=-1===_?os(i,s):s[_+8],I!==Yn&&Yr(c,!1)?(y=s[ut],_=_l(I),s=nu(I,s)):_=-1);-1!==_;){const S=s[ut];if(Ln(f,_,S.data)){const F=Ei(_,s,a,y,c,C);if(F!==Ui)return F}I=s[_+8],I!==Yn&&Yr(c,s[ut].data[_+8]===C)&&Ln(f,_,s)?(y=S,_=_l(I),s=nu(I,s)):_=-1}}return d}function Ei(i,s,a,c,d,f){const y=s[ut],_=y.data[i+8],S=la(_,y,a,null==c?we(_)&&Js:c!=y&&0!=(3&_.type),d&ht.Host&&f===_);return null!==S?Fs(s,y,S,_):Ui}function la(i,s,a,c,d){const f=i.providerIndexes,y=s.data,_=1048575&f,I=i.directiveStart,S=f>>20,Y=d?_+S:i.directiveEnd;for(let ie=c?_:_+S;ie<Y;ie++){const xe=y[ie];if(ie<I&&a===xe||ie>=I&&xe.type===a)return ie}if(d){const ie=y[I];if(ie&&We(ie)&&ie.type===a)return I}return null}function Fs(i,s,a,c){let d=i[a];const f=s.data;if(function is(i){return i instanceof _t}(d)){const y=d;y.resolving&&function Ve(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new J(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Me(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ae(i)}(f[a]));const _=ru(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?Rt(y.injectImpl):null;pl(i,c,ht.Default);try{d=i[a]=y.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Vw(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(c){const y=ol(s);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}d&&(a.preOrderHooks??=[]).push(0-i,d),f&&((a.preOrderHooks??=[]).push(i,f),(a.preOrderCheckHooks??=[]).push(i,f))}(a,f[a],s)}finally{null!==I&&Rt(I),ru(_),y.resolving=!1,Op()}}return d}function Ln(i,s,a){return!!(a[s+(i>>iu)]&1<<i)}function Yr(i,s){return!(i&ht.Self||i&ht.Host&&s)}class no{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return as(this._tNode,this._lView,s,W(c),a)}}function Qr(){return new no(Lr(),ke())}function Dr(i){return ve(()=>{const s=i.prototype.constructor,a=s[Z]||da(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[Z]||da(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function da(i){return Ge(i)?()=>{const s=da(Oe(i));return s&&s()}:No(i)}function Il(i){const s=i[ut],a=s.type;return 2===a?s.declTNode:1===a?i[Er]:null}function Vs(i){return function wl(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(Ke(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(Lr(),i)}const pr="__parameters__";function Vo(i,s,a){return ve(()=>{const c=function Lo(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...f){if(this instanceof d)return c.apply(this,f),this;const y=new d(...f);return _.annotation=y,_;function _(I,C,S){const F=I.hasOwnProperty(pr)?I[pr]:Object.defineProperty(I,pr,{value:[]})[pr];for(;F.length<=S;)F.push(null);return(F[S]=F[S]||[]).push(y),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function Yu(i,s){i.forEach(a=>Array.isArray(a)?Yu(a,s):s(a))}function ah(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Dl(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Jr(i,s,a){let c=ls(i,s);return c>=0?i[1|c]=a:(c=~c,function au(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function ch(i,s){const a=ls(i,s);if(a>=0)return i[1|a]}function ls(i,s){return function uu(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const f=c+(d-c>>1),y=i[f<<a];if(s===y)return f<<a;y>s?d=f:c=f+1}return~(d<<a)}(i,s,1)}const ha=R(Vo("Optional"),8),Xu=R(Vo("SkipSelf"),4);function eg(i){return 128==(128&i.flags)}var ng=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(ng||{});const Zy=new Map;let zw=0;const rg="__ngContext__";function Di(i,s){k(s)?(i[rg]=s[Ao],function Ab(i){Zy.set(i[Ao],i)}(s)):i[rg]=s}let Xy;function Ol(i,s){return Xy(i,s)}function mh(i){const s=i[rr];return H(s)?s[rr]:s}function Zw(i){return ev(i[Ks])}function og(i){return ev(i[ci])}function ev(i){for(;null!==i&&!H(i);)i=i[ci];return i}function sc(i,s,a,c,d){if(null!=c){let f,y=!1;H(c)?f=c:k(c)&&(y=!0,c=c[hr]);const _=ir(c);0===i&&null!==a?null==d?rv(s,a,_):oc(s,a,_,d||null,!0):1===i&&null!==a?oc(s,a,_,d||null,!0):2===i?function dg(i,s,a){const c=pa(i,s);c&&function Ob(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,_,y):3===i&&s.destroyNode(_),null!=f&&function kb(i,s,a,c,d){const f=a[_i];f!==ir(a)&&sc(s,i,c,f,d);for(let _=$r;_<a.length;_++){const I=a[_];kl(I[ut],I,i,s,c,f)}}(s,i,f,a,d)}}function ug(i,s,a){return i.createElement(s,a)}function Kw(i,s){const a=i[Ro],c=a.indexOf(s);Dp(s),a.splice(c,1)}function nv(i,s){if(i.length<=$r)return;const a=$r+s,c=i[a];if(c){const d=c[Ha];null!==d&&d!==i&&Kw(d,c),s>0&&(i[a-1][ci]=c[ci]);const f=Dl(i,$r+s);!function RM(i,s){kl(i,s,s[St],2,null,null),s[hr]=null,s[Er]=null}(c[ut],c);const y=f[ys];null!==y&&y.detachView(f[ut]),c[rr]=null,c[ci]=null,c[Bt]&=-129}return c}function cg(i,s){if(!(256&s[Bt])){const a=s[St];s[ia]?.destroy(),s[Li]?.destroy(),a.destroyNode&&kl(i,s,a,3,null,null),function PM(i){let s=i[Ks];if(!s)return Is(i[ut],i);for(;s;){let a=null;if(k(s))a=s[Ks];else{const c=s[$r];c&&(a=c)}if(!a){for(;s&&!s[ci]&&s!==i;)k(s)&&Is(s[ut],s),s=s[rr];null===s&&(s=i),k(s)&&Is(s[ut],s),a=s&&s[ci]}s=a}}(s)}}function Is(i,s){if(!(256&s[Bt])){s[Bt]&=-129,s[Bt]|=256,function _h(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof _t)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const _=d[f[y]],I=f[y+1];_s(4,_,I);try{I.call(_)}finally{_s(5,_,I)}}else{_s(4,d,f);try{f.call(d)}finally{_s(5,d,f)}}}}}(i,s),function Nb(i,s){const a=i.cleanup,c=s[Fi];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+3];y>=0?c[y]():c[-y].unsubscribe(),f+=2}else a[f].call(c[a[f+1]]);null!==c&&(s[Fi]=null);const d=s[Ir];if(null!==d){s[Ir]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(i,s),1===s[ut].type&&s[St].destroy();const a=s[Ha];if(null!==a&&H(s[rr])){a!==s[rr]&&Kw(a,s);const c=s[ys];null!==c&&c.detachView(i)}!function Hw(i){Zy.delete(i[Ao])}(s)}}function Yw(i,s,a){return function Qw(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[hr];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:f}=i.data[c.directiveStart+d];if(f===vt.None||f===vt.Emulated)return null}return li(c,a)}}(i,s.parent,a)}function oc(i,s,a,c,d){i.insertBefore(s,a,c,d)}function rv(i,s,a){i.appendChild(s,a)}function wh(i,s,a,c,d){null!==c?oc(i,s,a,c,d):rv(i,s,a)}function pa(i,s){return i.parentNode(s)}let ac,gg,mg,Pl=function Xw(i,s,a){return 40&i.type?li(i,a):null};function lg(i,s,a,c){const d=Yw(i,c,s),f=s[St],_=function Jw(i,s,a){return Pl(i,s,a)}(c.parent||s[Er],c,s);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)wh(f,d,a[I],_,!1);else wh(f,d,a,_,!1);void 0!==ac&&ac(f,c,s,a,d)}function Ih(i,s){if(null!==s){const a=s.type;if(3&a)return li(s,i);if(4&a)return iv(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Ih(i,c);{const d=i[s.index];return H(d)?iv(-1,d):ir(d)}}if(32&a)return Ol(s,i)()||ir(i[s.index]);{const c=tE(i,s);return null!==c?Array.isArray(c)?c[0]:Ih(mh(i[jn]),c):Ih(i,s.next)}}return null}function tE(i,s){return null!==s?i[jn][Er].projection[s.projection]:null}function iv(i,s){const a=$r+i+1;if(a<s.length){const c=s[a],d=c[ut].firstChild;if(null!==d)return Ih(c,d)}return s[_i]}function sv(i,s,a,c,d,f,y){for(;null!=a;){const _=c[a.index],I=a.type;if(y&&0===s&&(_&&Di(ir(_),c),a.flags|=2),32!=(32&a.flags))if(8&I)sv(i,s,a.child,c,d,f,!1),sc(s,i,d,_,f);else if(32&I){const C=Ol(a,c);let S;for(;S=C();)sc(s,i,d,S,f);sc(s,i,d,_,f)}else 16&I?uc(i,s,c,a,d,f):sc(s,i,d,_,f);a=y?a.projectionNext:a.next}}function kl(i,s,a,c,d,f){sv(a,c,i.firstChild,s,d,f,!1)}function uc(i,s,a,c,d,f){const y=a[jn],I=y[Er].projection[c.projection];if(Array.isArray(I))for(let C=0;C<I.length;C++)sc(s,i,d,I[C],f);else{let C=I;const S=y[rr];eg(c)&&(C.flags|=128),sv(i,s,C,S,d,f,!0)}}function nE(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function rE(i,s,a){const{mergedAttrs:c,classes:d,styles:f}=a;null!==c&&Ue(i,s,c),null!==d&&nE(i,s,d),null!==f&&function Lb(i,s,a){i.setAttribute(s,"style",a)}(i,s,f)}function Ll(i){gg=i}function oE(i){return function av(){if(void 0===mg&&(mg=null,jt.trustedTypes))try{mg=jt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return mg}()?.createScriptURL(i)||i}class vg{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ct})`}}function oo(i){return i instanceof vg?i.changingThisBreaksApplicationSecurity:i}function Dh(i,s){const a=function zb(i){return i instanceof vg&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${ct})`)}return a===s}const qb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Bl=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(Bl||{});function ds(i){const s=cc();return s?s.sanitize(Bl.URL,i)||"":Dh(i,"URL")?oo(i):function uv(i){return(i=String(i)).match(qb)?i:"unsafe:"+i}(ae(i))}function pE(i){const s=cc();if(s)return oE(s.sanitize(Bl.RESOURCE_URL,i)||"");if(Dh(i,"ResourceURL"))return oE(oo(i));throw new J(904,!1)}function iT(i,s,a){return function gE(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?pE:ds}(s,a)(i)}function cc(){const i=ke();return i&&i[Xi].sanitizer}class $n{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Nt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Cg=new $n("ENVIRONMENT_INITIALIZER"),dv=new $n("INJECTOR",-1),jo=new $n("INJECTOR_DEF_TYPES");class mE{get(s,a=ui){if(a===ui){const c=new Error(`NullInjectorError: No provider for ${ne(s)}!`);throw c.name="NullInjectorError",c}return a}}function yE(i){return{\u0275providers:i}}function HM(...i){return{\u0275providers:sT(0,i),\u0275fromNgModule:!0}}function sT(i,...s){const a=[],c=new Set;let d;return Yu(s,f=>{const y=f;bg(y,a,[],c)&&(d||=[],d.push(y))}),void 0!==d&&hv(d,a),a}function hv(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];fv(d,f=>{s.push(f)})}}function bg(i,s,a,c){if(!(i=Oe(i)))return!1;let d=null,f=Or(i);const y=!f&&ot(i);if(f||y){if(y&&!y.standalone)return!1;d=i}else{const I=i.ngModule;if(f=Or(I),!f)return!1;d=I}const _=c.has(d);if(y){if(_)return!1;if(c.add(d),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const C of I)bg(C,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!_){let C;c.add(d);try{Yu(f.imports,S=>{bg(S,s,a,c)&&(C||=[],C.push(S))})}finally{}void 0!==C&&hv(C,s)}if(!_){const C=No(d)||(()=>new d);s.push({provide:d,useFactory:C,deps:lt},{provide:jo,useValue:d,multi:!0},{provide:Cg,useValue:()=>On(d),multi:!0})}const I=f.providers;null==I||_||fv(I,S=>{s.push(S)})}}return d!==i&&void 0!==i.providers}function fv(i,s){for(let a of i)Re(a)&&(a=a.\u0275providers),Array.isArray(a)?fv(a,s):s(a)}const oT=B({provide:String,useValue:B});function _E(i){return null!==i&&"object"==typeof i&&oT in i}function $l(i){return"function"==typeof i}const EE=new $n("Set Injector scope."),Tg={},WM={};let Sg;function Ag(){return void 0===Sg&&(Sg=new mE),Sg}class lc{}class Mg extends lc{get destroyed(){return this._destroyed}constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,CE(s,y=>this.processProvider(y)),this.records.set(dv,jl(void 0,this)),d.has("environment")&&this.records.set(lc,jl(void 0,this));const f=this.records.get(EE);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(jo.multi,lt,ht.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of s)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const a=Mn(this),c=Rt(void 0);try{return s()}finally{Mn(a),Rt(c)}}get(s,a=ui,c=ht.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(q))return s[q](this);c=W(c);const d=Mn(this),f=Rt(void 0);try{if(!(c&ht.SkipSelf)){let _=this.records.get(s);if(void 0===_){const I=function qM(i){return"function"==typeof i||"object"==typeof i&&i instanceof $n}(s)&&Kn(s);_=I&&this.injectableDefInScope(I)?jl(gv(s),Tg):null,this.records.set(s,_)}if(null!=_)return this.hydrate(s,_)}return(c&ht.Self?Ag():this.parent).get(s,a=c&ht.Optional&&a===ui?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[gn]=y[gn]||[]).unshift(ne(s)),d)throw y;return function A(i,s,a,c){const d=i[gn];throw s[Un]&&d.unshift(s[Un]),i.message=function X(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=ne(s);if(Array.isArray(s))d=s.map(ne).join(" -> ");else if("object"==typeof s){let f=[];for(let y in s)if(s.hasOwnProperty(y)){let _=s[y];f.push(y+":"+("string"==typeof _?JSON.stringify(_):ne(_)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(wr,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[gn]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{Rt(f),Mn(d)}}resolveInjectorInitializers(){const s=Mn(this),a=Rt(void 0);try{const c=this.get(Cg.multi,lt,ht.Self);for(const d of c)d()}finally{Mn(s),Rt(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(ne(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new J(205,!1)}processProvider(s){let a=$l(s=Oe(s))?s:Oe(s&&s.provide);const c=function uT(i){return _E(i)?jl(void 0,i.useValue):jl(IE(i),Tg)}(s);if($l(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=jl(void 0,Tg,!0),d.factory=()=>j(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Tg&&(a.value=WM,a.value=a.factory()),"object"==typeof a.value&&a.value&&function cT(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Oe(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(s){const a=this._onDestroyHooks.indexOf(s);-1!==a&&this._onDestroyHooks.splice(a,1)}}function gv(i){const s=Kn(i),a=null!==s?s.factory:No(i);if(null!==a)return a;if(i instanceof $n)throw new J(204,!1);if(i instanceof Function)return function aT(i){const s=i.length;if(s>0)throw function ou(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new J(204,!1);const a=function mr(i){return i&&(i[lr]||i[dr])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new J(204,!1)}function IE(i,s,a){let c;if($l(i)){const d=Oe(i);return No(d)||gv(d)}if(_E(i))c=()=>Oe(i.useValue);else if(function wE(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...j(i.deps||[]));else if(function pv(i){return!(!i||!i.useExisting)}(i))c=()=>On(Oe(i.useExisting));else{const d=Oe(i&&(i.useClass||i.provide));if(!function DE(i){return!!i.deps}(i))return No(d)||gv(d);c=()=>new d(...j(i.deps))}return c}function jl(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function CE(i,s){for(const a of i)Array.isArray(a)?CE(a,s):a&&Re(a)?CE(a.\u0275providers,s):s(a)}const lT=new $n("AppId",{providedIn:"root",factory:()=>ZM}),ZM="ng",dT=new $n("Platform Initializer"),bE=new $n("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),mv=new $n("CSP nonce",{providedIn:"root",factory:()=>function Vl(){if(void 0!==gg)return gg;if(typeof document<"u")return document;throw new J(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let SE=(i,s)=>null;function Ah(i,s){return SE(i,s)}class wv{}class AE{}class Ev{resolveComponentFactory(s){throw function yT(i){const s=Error(`No component factory found for ${ne(i)}.`);return s.ngComponent=i,s}(s)}}let Mh=(()=>{class i{}return i.NULL=new Ev,i})();function _T(){return fc(Lr(),ke())}function fc(i,s){return new pc(li(i,s))}let pc=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=_T,i})();function Iv(i){return i instanceof pc?i.nativeElement:i}class Ng{}let Dv=(()=>{class i{constructor(){this.destroyNode=null}}return i.__NG_ELEMENT_ID__=()=>function Cv(){const i=ke(),a=rs(Lr().index,i);return(k(a)?a:i)[St]}(),i})(),ME=(()=>{class i{}return i.\u0275prov=Nt({token:i,providedIn:"root",factory:()=>null}),i})();class xE{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const ql=new xE("16.1.6"),bv={};function ma(i){for(;i;){i[Bt]|=64;const s=mh(i);if(kt(i)&&!s)return i;i=s}return null}function Zl(i){return i.ngOriginalError}class gu{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Zl(s);for(;a&&Zl(a);)a=Zl(a);return a||null}}const Sv=new $n("",{providedIn:"root",factory:()=>!1});function ya(i){return i instanceof Function?i():i}class ei extends aa{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(s){this._lView=s}onConsumerDependencyMayHaveChanged(){ma(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(s,a,c){const d=vr(this);this.trackingVersion++;try{s(a,c)}finally{vr(d)}}destroy(){this.trackingVersion++}}let Gr=null;function xh(){return Gr??=new ei,Gr}function Lg(i,s){return i[s]??xh()}function PE(i,s){const a=xh();a.hasReadASignal&&(i[s]=Gr,a.lView=i,Gr=new ei)}const Jt={};function kE(i){kv(Cn(),ke(),Ri()+i,!1)}function kv(i,s,a,c){if(!c)if(3==(3&s[Bt])){const f=i.preOrderCheckHooks;null!==f&&eh(s,f,a)}else{const f=i.preOrderHooks;null!==f&&th(s,f,0,a)}eu(a)}function Lv(i,s=null,a=null,c){const d=BE(i,s,a,c);return d.resolveInjectorInitializers(),d}function BE(i,s=null,a=null,c,d=new Set){const f=[a||lt,HM(i)];return c=c||("object"==typeof i?void 0:ne(i)),new Mg(f,s||Ag(),c||null,d)}let Us=(()=>{class i{static create(a,c){if(Array.isArray(a))return Lv({name:""},c,a,"");{const d=a.name??"";return Lv({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=ui,i.NULL=new mE,i.\u0275prov=Nt({token:i,providedIn:"any",factory:()=>On(dv)}),i.__NG_ELEMENT_ID__=-1,i})();function mc(i,s=ht.Default){const a=ke();return null===a?On(i,s):as(Lr(),a,Oe(i),s)}function Vv(){throw new Error("invalid")}function yc(i,s,a,c,d,f,y,_,I,C,S){const F=s.blueprint.slice();return F[hr]=d,F[Bt]=140|c,(null!==C||i&&2048&i[Bt])&&(F[Bt]|=2048),Ep(F),F[rr]=F[es]=i,F[Fn]=a,F[Xi]=y||i&&i[Xi],F[St]=_||i&&i[St],F[Ji]=I||i&&i[Ji]||null,F[Er]=f,F[Ao]=function xM(){return zw++}(),F[ts]=S,F[Ga]=C,F[jn]=2==s.type?i[jn]:F,F}function Kl(i,s,a,c,d){let f=i.data[s];if(null===f)f=function Uv(i,s,a,c,d){const f=Sp(),y=Ap(),I=i.data[s]=function jv(i,s,a,c,d,f){let y=s?s.injectorIndex:-1,_=0;return function Ys(){return null!==Ut.skipHydrationRootTNode}()&&(_|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:_,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=I),null!==f&&(y?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I,I.prev=f)),I}(i,s,a,c,d),function Hu(){return Ut.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const y=function zu(){const i=Ut.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Vi(f,!0),f}function zo(i,s,a,c){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function jE(i,s,a,c,d){const f=Lg(s,ia),y=Ri(),_=2&c;try{if(eu(-1),_&&s.length>Qt&&kv(i,s,Qt,!1),_s(_?2:0,d),_)f.runInContext(a,c,d);else{const C=vr(null);try{a(c,d)}finally{vr(C)}}}finally{_&&null===s[ia]&&PE(s,ia),eu(y),_s(_?3:1,d)}}function Bv(i,s,a){if(de(s)){const c=vr(null);try{const f=s.directiveEnd;for(let y=s.directiveStart;y<f;y++){const _=i.data[y];_.contentQueries&&_.contentQueries(1,a[y],y)}}finally{vr(c)}}}function va(i,s,a){ju()&&(function Zv(i,s,a,c){const d=a.directiveStart,f=a.directiveEnd;we(a)&&function vc(i,s,a){const c=li(s,i),d=Oh(a);let y=16;a.signals?y=4096:a.onPush&&(y=64);const _=$s(i,yc(i,d,null,y,c,s,null,i[Xi].rendererFactory.createRenderer(c,a),null,null,null));i[s.index]=_}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||Xs(a,s),Di(c,s);const y=a.initialInputs;for(let _=d;_<f;_++){const I=i.data[_],C=Fs(s,i,_,a);Di(C,s),null!==y&&DT(0,_-d,C,I,0,y),We(I)&&(rs(a.index,s)[Fn]=Fs(s,i,_,a))}}(i,s,a,li(a,s)),64==(64&a.flags)&&Kv(i,s,a))}function Bg(i,s,a=li){const c=s.localNames;if(null!==c){let d=s.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],_=-1===y?a(s,i):i[y];i[d++]=_}}}function Oh(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=$g(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):s}function $g(i,s,a,c,d,f,y,_,I,C,S){const F=Qt+c,Y=F+d,ie=function Ph(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Jt);return a}(F,Y),xe="function"==typeof C?C():C;return ie[ut]={type:i,blueprint:ie,template:a,queries:null,viewQuery:_,declTNode:s,data:ie.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:Y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:xe,incompleteFirstPass:!1,ssrId:S}}let $v=i=>null;function zv(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const f=i[d];null===c?Hv(a,s,d,f):c.hasOwnProperty(d)&&Hv(a,s,c[d],f)}return a}function Hv(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function zi(i,s,a,c,d,f,y,_){const I=li(s,a);let S,C=s.inputs;!_&&null!=C&&(S=C[c])?(_c(i,a,S,c,d),we(s)&&function Wv(i,s){const a=rs(s,i);16&a[Bt]||(a[Bt]|=64)}(a,s.index)):3&s.type&&(c=function Gv(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=y?y(d,s.value||"",c):d,f.setProperty(I,c,d))}function Gg(i,s,a,c){if(ju()){const d=null===c?null:{"":-1},f=function qE(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];if(Ns(s,y.selectors,!1))if(c||(c=[]),We(y))if(null!==y.findHostDirectiveDefs){const _=[];d=d||new Map,y.findHostDirectiveDefs(y,_,d),c.unshift(..._,y),Yv(i,s,_.length)}else c.unshift(y),Yv(i,s,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(i,a);let y,_;null===f?y=_=null:[y,_]=f,null!==y&&GE(i,s,a,y,d,_),d&&function Lh(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new J(-301,!1);c.push(s[d],f)}}}(a,c,d)}a.mergedAttrs=zt(a.mergedAttrs,a.attrs)}function GE(i,s,a,c,d,f){for(let C=0;C<c.length;C++)Fo(Xs(a,s),i,c[C].type);!function qg(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let C=0;C<c.length;C++){const S=c[C];S.providersResolver&&S.providersResolver(S)}let y=!1,_=!1,I=zo(i,s,c.length,null);for(let C=0;C<c.length;C++){const S=c[C];a.mergedAttrs=zt(a.mergedAttrs,S.hostAttrs),Vh(i,a,s,I,S),ZE(I,S,d),null!==S.contentQueries&&(a.flags|=4),(null!==S.hostBindings||null!==S.hostAttrs||0!==S.hostVars)&&(a.flags|=64);const F=S.type.prototype;!y&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!_&&(F.ngOnChanges||F.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),_=!0),I++}!function Fh(i,s,a){const d=s.directiveEnd,f=i.data,y=s.attrs,_=[];let I=null,C=null;for(let S=s.directiveStart;S<d;S++){const F=f[S],Y=a?a.get(F):null,xe=Y?Y.outputs:null;I=zv(F.inputs,S,I,Y?Y.inputs:null),C=zv(F.outputs,S,C,xe);const ze=null===I||null===y||en(s)?null:KE(I,S,y);_.push(ze)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=8),I.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=_,s.inputs=I,s.outputs=C}(i,a,f)}function Kv(i,s,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,y=function hl(){return Ut.lFrame.currentDirectiveIndex}();try{eu(f);for(let _=c;_<d;_++){const I=i.data[_],C=s[_];Np(_),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&WE(I,C)}}finally{eu(-1),Np(y)}}function WE(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Yv(i,s,a){s.componentOffset=a,(i.components??=[]).push(s.index)}function ZE(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;We(s)&&(a[""]=i)}}function Vh(i,s,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=No(d.type)),y=new _t(f,We(d),mc);i.blueprint[c]=y,a[c]=y,function qv(i,s,a,c,d){const f=d.hostBindings;if(f){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const _=~s.index;(function Wg(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(y)!=_&&y.push(_),y.push(a,c,f)}}(i,s,c,zo(i,a,d.hostVars,Jt),d)}function Bs(i,s,a,c,d,f){const y=li(i,s);!function Qv(i,s,a,c,d,f,y){if(null==f)i.removeAttribute(s,d,a);else{const _=null==y?ae(f):y(f,c||"",d);i.setAttribute(s,d,_,a)}}(s[St],y,f,i.value,a,c,d)}function DT(i,s,a,c,d,f){const y=f[s];if(null!==y)for(let _=0;_<y.length;)Jv(c,a,y[_++],y[_++],y[_++])}function Jv(i,s,a,c,d){const f=vr(null);try{const y=i.inputTransforms;null!==y&&y.hasOwnProperty(c)&&(d=y[c].call(s,d)),null!==i.setInput?i.setInput(s,d,a,c):s[c]=d}finally{vr(f)}}function KE(i,s,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const y=i[f];for(let _=0;_<y.length;_+=2)if(y[_]===s){c.push(f,y[_+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function YE(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null,null]}function mu(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const y=i.data[f];Xa(a[c]),y.contentQueries(2,s[f],f)}}}function $s(i,s){return i[Ks]?i[To][ci]=s:i[Ks]=s,i[To]=s,s}function Yl(i,s,a){Xa(0);const c=vr(null);try{s(i,a)}finally{vr(c)}}function e_(i){return i[Fi]||(i[Fi]=[])}function ar(i){return i.cleanup||(i.cleanup=[])}function Ql(i,s){const a=i[Ji],c=a?a.get(gu,null):null;c&&c.handleError(s)}function _c(i,s,a,c,d){for(let f=0;f<a.length;){const y=a[f++],_=a[f++];Jv(i.data[y],s[y],c,_,d)}}function QE(i,s){const a=rs(s,i),c=a[ut];!function CT(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])}(c,a);const d=a[hr];null!==d&&null===a[ts]&&(a[ts]=Ah(d,a[Ji])),t_(c,a,a[Fn])}function t_(i,s,a){gl(s);try{const c=i.viewQuery;null!==c&&Yl(1,c,a);const d=i.template;null!==d&&jE(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&mu(i,s),i.staticViewQueries&&Yl(2,i.viewQuery,a);const f=i.components;null!==f&&function bT(i,s){for(let a=0;a<s.length;a++)QE(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[Bt]&=-5,Pp()}}let n_=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,c,d){const f=typeof Zone>"u"?null:Zone.current,y=new Aw(a,C=>{this.all.has(C)&&this.queue.set(C,f)},d);let _;this.all.add(y),y.notify();const I=()=>{y.cleanup(),_?.(),this.all.delete(y),this.queue.delete(y)};return _=c?.onDestroy(I),{destroy:I}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}}return i.\u0275prov=Nt({token:i,providedIn:"root",factory:()=>new i}),i})();function $h(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let y=0;y<s.length;y++){const _=s[y];"number"==typeof _?f=_:1==f?d=Le(d,_):2==f&&(c=Le(c,_+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Ho(i,s,a,c,d=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(ir(f)),H(f)){for(let _=$r;_<f.length;_++){const I=f[_],C=I[ut].firstChild;null!==C&&Ho(I[ut],I,C,c)}f[_i]!==f[hr]&&c.push(f[_i])}const y=a.type;if(8&y)Ho(i,s,a.child,c);else if(32&y){const _=Ol(a,s);let I;for(;I=_();)c.push(I)}else if(16&y){const _=tE(s,a);if(Array.isArray(_))c.push(..._);else{const I=mh(s[jn]);Ho(I[ut],I,_,c,!0)}}a=d?a.projectionNext:a.next}return c}function Zg(i,s,a,c=!0){const d=s[Xi].rendererFactory;d.begin&&d.begin();try{eI(i,s,i.template,a)}catch(y){throw c&&Ql(s,y),y}finally{d.end&&d.end(),s[Xi].effectManager?.flush()}}function eI(i,s,a,c){const d=s[Bt];if(256!=(256&d)){s[Xi].effectManager?.flush(),gl(s);try{Ep(s),function Rp(i){return Ut.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&jE(i,s,a,2,c);const y=3==(3&d);if(y){const C=i.preOrderCheckHooks;null!==C&&eh(s,C,null)}else{const C=i.preOrderHooks;null!==C&&th(s,C,0,null),Lp(s,0)}if(function tI(i){for(let s=Zw(i);null!==s;s=og(s)){if(!s[Mo])continue;const a=s[Ro];for(let c=0;c<a.length;c++){Ip(a[c])}}}(s),r_(s,2),null!==i.contentQueries&&mu(i,s),y){const C=i.contentCheckHooks;null!==C&&eh(s,C)}else{const C=i.contentHooks;null!==C&&th(s,C,1),Lp(s,1)}!function $E(i,s){const a=i.hostBindingOpCodes;if(null===a)return;const c=Lg(s,Li);try{for(let d=0;d<a.length;d++){const f=a[d];if(f<0)eu(~f);else{const y=f,_=a[++d],I=a[++d];dl(_,y),c.runInContext(I,2,s[y])}}}finally{null===s[Li]&&PE(s,Li),eu(-1)}}(i,s);const _=i.components;null!==_&&s_(s,_,0);const I=i.viewQuery;if(null!==I&&Yl(2,I,c),y){const C=i.viewCheckHooks;null!==C&&eh(s,C)}else{const C=i.viewHooks;null!==C&&th(s,C,2),Lp(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[Bt]&=-73,Dp(s)}finally{Pp()}}}function r_(i,s){for(let a=Zw(i);null!==a;a=og(a))for(let c=$r;c<a.length;c++)Kg(a[c],s)}function i_(i,s,a){Kg(rs(s,i),a)}function Kg(i,s){if(!function Ny(i){return 128==(128&i[Bt])}(i))return;const a=i[ut];if(80&i[Bt]&&0===s||1024&i[Bt]||2===s)eI(a,i,a.template,i[Fn]);else if(i[ra]>0){r_(i,1);const d=i[ut].components;null!==d&&s_(i,d,1)}}function s_(i,s,a){for(let c=0;c<s.length;c++)i_(i,s[c],a)}class Jl{get rootNodes(){const s=this._lView,a=s[ut];return Ho(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Fn]}set context(s){this._lView[Fn]=s}get destroyed(){return 256==(256&this._lView[Bt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[rr];if(H(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(nv(s,c),Dl(a,c))}this._attachedToViewContainer=!1}cg(this._lView[ut],this._lView)}onDestroy(s){!function Os(i,s){if(256==(256&i[Bt]))throw new J(911,!1);null===i[Ir]&&(i[Ir]=[]),i[Ir].push(s)}(this._lView,s)}markForCheck(){ma(this._cdRefInjectingView||this._lView)}detach(){this._lView[Bt]&=-129}reattach(){this._lView[Bt]|=128}detectChanges(){Zg(this._lView[ut],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function OM(i,s){kl(i,s,s[St],2,null,null)}(this._lView[ut],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=s}}class ST extends Jl{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Zg(s[ut],s,s[Fn],!1)}checkNoChanges(){}get context(){return null}}class nI extends Mh{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=ot(s);return new wa(a,this.ngModule)}}function rI(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Yg{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=W(c);const d=this.injector.get(s,bv,c);return d!==bv||a===bv?d:this.parentInjector.get(s,a,c)}}class wa extends AE{get inputs(){const s=this.componentDef,a=s.inputTransforms,c=rI(s.inputs);if(null!==a)for(const d of c)a.hasOwnProperty(d.propName)&&(d.transform=a[d.propName]);return c}get outputs(){return rI(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Do(i){return i.map(Ba).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,c,d){let f=(d=d||this.ngModule)instanceof lc?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new Yg(s,f):s,_=y.get(Ng,null);if(null===_)throw new J(407,!1);const S={rendererFactory:_,sanitizer:y.get(ME,null),effectManager:y.get(n_,null)},F=_.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",ie=c?function zE(i,s,a,c){const f=c.get(Sv,!1)||a===vt.ShadowDom,y=i.selectRootElement(s,f);return function ji(i){$v(i)}(y),y}(F,c,this.componentDef.encapsulation,y):ug(F,Y,function AT(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(Y)),nt=this.componentDef.signals?4608:this.componentDef.onPush?576:528,Et=$g(0,null,null,1,0,null,null,null,null,null,null),Pe=yc(null,Et,null,nt,null,null,S,F,y,null,null);let Wt,yn;gl(Pe);try{const mt=this.componentDef;let Ai,Yf=null;mt.findHostDirectiveDefs?(Ai=[],Yf=new Map,mt.findHostDirectiveDefs(mt,Ai,Yf),Ai.push(mt)):Ai=[mt];const Qf=function sI(i,s){const a=i[ut],c=Qt;return i[c]=s,Kl(a,c,2,"#host",null)}(Pe,ie),UC=function jh(i,s,a,c,d,f,y){const _=d[ut];!function zh(i,s,a,c){for(const d of i)s.mergedAttrs=zt(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&($h(s,s.mergedAttrs,!0),null!==a&&rE(c,a,s))}(c,i,s,y);let I=null;null!==s&&(I=Ah(s,d[Ji]));const C=f.rendererFactory.createRenderer(s,a);let S=16;a.signals?S=4096:a.onPush&&(S=64);const F=yc(d,Oh(a),null,S,d[i.index],i,f,C,null,null,I);return _.firstCreatePass&&Yv(_,i,c.length-1),$s(d,F),d[i.index]=F}(Qf,ie,mt,Ai,Pe,S,F);yn=_p(Et,Qt),ie&&function xr(i,s,a,c){if(c)Ue(i,a,["ng-version",ql.full]);else{const{attrs:d,classes:f}=function Co(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++c]):8===d&&a.push(f);else{if(!er(d))break;d=f}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&Ue(i,a,d),f&&f.length>0&&nE(i,a,f.join(" "))}}(F,mt,ie,c),void 0!==a&&function oI(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const f=a[d];c.push(null!=f?Array.from(f):null)}}(yn,this.ngContentSelectors,a),Wt=function MT(i,s,a,c,d,f){const y=Lr(),_=d[ut],I=li(y,d);GE(_,d,y,a,null,c);for(let S=0;S<a.length;S++)Di(Fs(d,_,y.directiveStart+S,y),d);Kv(_,d,y),I&&Di(I,d);const C=Fs(d,_,y.directiveStart+y.componentOffset,y);if(i[Fn]=d[Fn]=C,null!==f)for(const S of f)S(C,s);return Bv(_,y,i),C}(UC,mt,Ai,Yf,Pe,[xT]),t_(Et,Pe,null)}finally{Pp()}return new Qg(this.componentType,Wt,fc(yn,Pe),Pe,yn)}}class Qg extends wv{constructor(s,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new ST(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),a))return;const f=this._rootLView;_c(f[ut],f,d,s,a),this.previousInputValues.set(s,a),ma(rs(this._tNode.index,f))}}get injector(){return new no(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function xT(){const i=Lr();yl(ke()[ut],i)}function o_(i){let s=function aI(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(We(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new J(903,!1);d=s.\u0275dir}if(d){if(a){c.push(d);const y=i;y.inputs=Hh(i.inputs),y.inputTransforms=Hh(i.inputTransforms),y.declaredInputs=Hh(i.declaredInputs),y.outputs=Hh(i.outputs);const _=d.hostBindings;_&&lI(i,_);const I=d.viewQuery,C=d.contentQueries;if(I&&cI(i,I),C&&Jg(i,C),G(i.inputs,d.inputs),G(i.declaredInputs,d.declaredInputs),G(i.outputs,d.outputs),null!==d.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),G(y.inputTransforms,d.inputTransforms)),We(d)&&d.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const _=f[y];_&&_.ngInherit&&_(i),_===o_&&(a=!1)}}s=Object.getPrototypeOf(s)}!function uI(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=zt(d.hostAttrs,a=zt(a,d.hostAttrs))}}(c)}function Hh(i){return i===yt?{}:i===lt?[]:i}function cI(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function Jg(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,f)=>{s(c,d,f),a(c,d,f)}:s}function lI(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}function a_(i){const s=i.inputConfig,a={};for(const c in s)if(s.hasOwnProperty(c)){const d=s[c];Array.isArray(d)&&d[2]&&(a[c]=d[2])}i.inputTransforms=a}function em(i){return!!tm(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function tm(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function bi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Ea(i,s,a,c){const d=ke();return bi(d,ua(),s)&&(Cn(),Bs(sr(),d,i,s,a,c)),Ea}function Dc(i,s,a,c){return bi(i,ua(),a)?s+ae(a)+c:Jt}function st(i,s,a,c,d,f,y,_){const I=ke(),C=Cn(),S=i+Qt,F=C.firstCreatePass?function PT(i,s,a,c,d,f,y,_,I){const C=s.consts,S=Kl(s,i,4,y||null,Po(C,_));Gg(s,a,S,Po(C,I)),yl(s,S);const F=S.tView=$g(2,S,c,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C,null);return null!==s.queries&&(s.queries.template(s,S),F.queries=s.queries.embeddedTView(S)),S}(S,C,I,s,a,c,d,f,y):C.data[S];Vi(F,!1);const Y=fe(C,I,F,i);Xd()&&lg(C,I,Y,F),Di(Y,I),$s(I,I[S]=YE(Y,I,Y,F)),$e(F)&&va(C,I,F),null!=y&&Bg(I,F,_)}let fe=function Fe(i,s,a,c){return ca(!0),s[St].createComment("")};function p_(i,s,a){const c=ke();return bi(c,ua(),s)&&zi(Cn(),sr(),c,i,s,c[St],a,!1),p_}function g_(i,s,a,c,d){const y=d?"class":"style";_c(i,a,s.inputs[y],y,c)}function Qh(i,s,a,c){const d=ke(),f=Cn(),y=Qt+i,_=d[St],I=f.firstCreatePass?function LT(i,s,a,c,d,f){const y=s.consts,I=Kl(s,i,2,c,Po(y,d));return Gg(s,a,I,Po(y,f)),null!==I.attrs&&$h(I,I.attrs,!1),null!==I.mergedAttrs&&$h(I,I.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,I),I}(y,f,d,s,a,c):f.data[y],C=bI(f,d,I,_,s,i);d[y]=C;const S=$e(I);return Vi(I,!0),rE(_,C,I),32!=(32&I.flags)&&Xd()&&lg(f,d,C,I),0===function Rw(){return Ut.lFrame.elementDepthCount}()&&Di(C,d),function Oy(){Ut.lFrame.elementDepthCount++}(),S&&(va(f,d,I),Bv(f,I,d)),null!==c&&Bg(d,I),Qh}function lm(){let i=Lr();Ap()?function fr(){Ut.lFrame.isParent=!1}():(i=i.parent,Vi(i,!1));const s=i;(function Zd(i){return Ut.skipHydrationRootTNode===i})(s)&&function Fy(){Ut.skipHydrationRootTNode=null}(),function Py(){Ut.lFrame.elementDepthCount--}();const a=Cn();return a.firstCreatePass&&(yl(a,i),de(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Vy(i){return 0!=(8&i.flags)}(s)&&g_(a,s,ke(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function vl(i){return 0!=(16&i.flags)}(s)&&g_(a,s,ke(),s.stylesWithoutHost,!1),lm}function CI(i,s,a,c){return Qh(i,s,a,c),lm(),CI}let bI=(i,s,a,c,d,f)=>(ca(!0),ug(c,d,function Fp(){return Ut.lFrame.currentNamespace}()));function Cr(){return ke()}function et(i){return!!i&&"function"==typeof i.then}function Jh(i){return!!i&&"function"==typeof i.subscribe}function Xh(i,s,a,c){const d=ke(),f=Cn(),y=Lr();return function ef(i,s,a,c,d,f,y){const _=$e(c),C=i.firstCreatePass&&ar(i),S=s[Fn],F=e_(s);let Y=!0;if(3&c.type||y){const ze=li(c,s),nt=y?y(ze):ze,Et=F.length,Pe=y?yn=>y(ir(yn[c.index])):c.index;let Wt=null;if(!y&&_&&(Wt=function UT(i,s,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===c){const _=s[Fi],I=d[f+2];return _.length>I?_[I]:null}"string"==typeof y&&(f+=2)}return null}(i,s,d,c.index)),null!==Wt)(Wt.__ngLastListenerFn__||Wt).__ngNextListenerFn__=f,Wt.__ngLastListenerFn__=f,Y=!1;else{f=od(c,s,S,f,!1);const yn=a.listen(nt,d,f);F.push(f,yn),C&&C.push(d,Pe,Et,Et+1)}}else f=od(c,s,S,f,!1);const ie=c.outputs;let xe;if(Y&&null!==ie&&(xe=ie[d])){const ze=xe.length;if(ze)for(let nt=0;nt<ze;nt+=2){const mt=s[xe[nt]][xe[nt+1]].subscribe(f),Ai=F.length;F.push(f,mt),C&&C.push(d,c.index,Ai,-(Ai+1))}}}(f,d,d[St],y,i,s,c),Xh}function SI(i,s,a,c){try{return _s(6,s,a),!1!==a(c)}catch(d){return Ql(i,d),!1}finally{_s(7,s,a)}}function od(i,s,a,c,d){return function f(y){if(y===Function)return c;ma(i.componentOffset>-1?rs(i.index,s):s);let I=SI(s,a,c,y),C=f.__ngNextListenerFn__;for(;C;)I=SI(s,a,C,y)&&I,C=C.__ngNextListenerFn__;return d&&!1===I&&y.preventDefault(),I}}function m_(i=1){return function Ly(i){return(Ut.lFrame.contextLView=function Pw(i,s){for(;i>0;)s=s[es],i--;return s}(i,Ut.lFrame.contextLView))[Fn]}(i)}function hm(i,s,a){return fm(i,"",s,"",a),hm}function fm(i,s,a,c,d){const f=ke(),y=Dc(f,s,a,c);return y!==Jt&&zi(Cn(),sr(),f,i,y,f[St],d,!1),fm}function gm(i,s){return i<<17|s<<2}function fs(i){return i>>17&32767}function __(i){return 2|i}function Ac(i){return(131068&i)>>2}function Hi(i,s){return-131069&i|s<<2}function Mc(i){return 1|i}function ho(i,s,a,c,d){const f=i[a+1],y=null===s;let _=c?fs(f):Ac(f),I=!1;for(;0!==_&&(!1===I||y);){const S=i[_+1];NI(i[_],s)&&(I=!0,i[_+1]=c?Mc(S):__(S)),_=c?fs(S):Ac(S)}I&&(i[a+1]=c?__(f):Mc(f))}function NI(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&ls(i,s)>=0}function E_(i,s){return function go(i,s,a,c){const d=ke(),f=Cn(),y=function ks(i){const s=Ut.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function I_(i,s,a,c){const d=i.data;if(null===d[a+1]){const f=d[Ri()],y=function ni(i,s){return s>=i.expandoStartIndex}(i,a);(function br(i,s){return 0!=(i.flags&(s?8:16))})(f,c)&&null===s&&!y&&(s=!1),s=function Eu(i,s,a,c){const d=function Gu(i){const s=Ut.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=Qn(a=ri(null,i,s,a,c),s.attrs,c),f=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==d)if(a=ri(d,i,s,a,c),null===f){let I=function BI(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Ac(c))return i[fs(c)]}(i,s,c);void 0!==I&&Array.isArray(I)&&(I=ri(null,i,s,I[1],c),I=Qn(I,s.attrs,c),function cr(i,s,a,c){i[fs(a?s.classBindings:s.styleBindings)]=c}(i,s,c,I))}else f=function mm(i,s,a){let c;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)c=Qn(c,i[f].hostAttrs,a);return Qn(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(d,f,s,c),function $T(i,s,a,c,d,f){let y=f?s.classBindings:s.styleBindings,_=fs(y),I=Ac(y);i[c]=a;let S,C=!1;if(Array.isArray(a)?(S=a[1],(null===S||ls(a,S)>0)&&(C=!0)):S=a,d)if(0!==I){const Y=fs(i[_+1]);i[c+1]=gm(Y,_),0!==Y&&(i[Y+1]=Hi(i[Y+1],c)),i[_+1]=function v_(i,s){return 131071&i|s<<17}(i[_+1],c)}else i[c+1]=gm(_,0),0!==_&&(i[_+1]=Hi(i[_+1],c)),_=c;else i[c+1]=gm(I,0),0===_?_=c:i[I+1]=Hi(i[I+1],c),I=c;C&&(i[c+1]=__(i[c+1])),ho(i,S,c,!0),ho(i,S,c,!1),function RI(i,s,a,c,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&ls(f,s)>=0&&(a[c+1]=Mc(a[c+1]))}(s,S,i,c,f),y=gm(_,I),f?s.classBindings=y:s.styleBindings=y}(d,f,s,a,y,c)}}(f,i,y,c),s!==Jt&&bi(d,y,s)&&function zI(i,s,a,c,d,f,y,_){if(!(3&s.type))return;const I=i.data,C=I[_+1],S=function nf(i){return 1==(1&i)}(C)?Wr(I,s,a,d,Ac(C),y):void 0;ym(S)||(ym(f)||function xI(i){return 2==(2&i)}(C)&&(f=Wr(I,null,a,d,_,y)),function Fb(i,s,a,c,d){if(s)d?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:ng.DashCase;null==d?i.removeStyle(a,c,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=ng.Important),i.setStyle(a,c,d,f))}}(c,y,ul(Ri(),a),d,f))}(f,f.data[Ri()],d,d[St],i,d[y+1]=function Iu(i,s){return null==i||""===i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ne(oo(i)))),i}(s,a),c,y)}(i,s,null,!0),E_}function ri(i,s,a,c,d){let f=null;const y=a.directiveEnd;let _=a.directiveStylingLast;for(-1===_?_=a.directiveStart:_++;_<y&&(f=s[_],c=Qn(c,f.hostAttrs,d),f!==i);)_++;return null!==i&&(a.directiveStylingLast=_),c}function Qn(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const y=s[f];"number"==typeof y?d=y:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Jr(i,y,!!a||s[++f]))}return void 0===i?null:i}function Wr(i,s,a,c,d,f){const y=null===s;let _;for(;d>0;){const I=i[d],C=Array.isArray(I),S=C?I[1]:I,F=null===S;let Y=a[d+1];Y===Jt&&(Y=F?lt:void 0);let ie=F?ch(Y,c):S===c?Y:void 0;if(C&&!ym(ie)&&(ie=ch(I,c)),ym(ie)&&(_=ie,y))return _;const xe=i[d+1];d=y?fs(xe):Ac(xe)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(_=ch(I,c))}return _}function ym(i){return void 0!==i}function qo(i,s=""){const a=ke(),c=Cn(),d=i+Qt,f=c.firstCreatePass?Kl(c,d,1,s,null):c.data[d],y=rf(c,a,f,s,i);a[d]=y,Xd()&&lg(c,a,y,f),Vi(f,!1)}let rf=(i,s,a,c,d)=>(ca(!0),function vh(i,s){return i.createText(s)}(s[St],c));function D_(i){return Zo("",i,""),D_}function Zo(i,s,a){const c=ke(),d=Dc(c,i,s,a);return d!==Jt&&function _a(i,s,a){const c=ul(s,i);!function tv(i,s,a){i.setValue(s,a)}(i[St],c,a)}(c,Ri(),d),Zo}const Aa=void 0;var JI=["en",[["a","p"],["AM","PM"],Aa],[["AM","PM"],Aa,Aa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Aa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Aa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Aa,"{1} 'at' {0}",Aa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function QI(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let kc={};function R_(i){const s=function JT(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=XI(s);if(a)return a;const c=s.split("-")[0];if(a=XI(c),a)return a;if("en"===c)return JI;throw new J(701,!1)}function N_(i){return R_(i)[ld.PluralCase]}function XI(i){return i in kc||(kc[i]=jt.ng&&jt.ng.common&&jt.ng.common.locales&&jt.ng.common.locales[i]),kc[i]}var ld=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(ld||{});const Ws="en-US";let Ko=Ws;function md(i,s,a,c,d){if(i=Oe(i),Array.isArray(i))for(let f=0;f<i.length;f++)md(i[f],s,a,c,d);else{const f=Cn(),y=ke();let _=$l(i)?i:Oe(i.provide),I=IE(i);const C=Lr(),S=1048575&C.providerIndexes,F=C.directiveStart,Y=C.providerIndexes>>20;if($l(i)||!i.multi){const ie=new _t(I,d,mc),xe=Rm(_,s,d?S:S+Y,F);-1===xe?(Fo(Xs(C,y),f,_),xm(f,i,s.length),s.push(_),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),a.push(ie),y.push(ie)):(a[xe]=ie,y[xe]=ie)}else{const ie=Rm(_,s,S+Y,F),xe=Rm(_,s,S,S+Y),nt=xe>=0&&a[xe];if(d&&!nt||!d&&!(ie>=0&&a[ie])){Fo(Xs(C,y),f,_);const Et=function fS(i,s,a,c,d){const f=new _t(i,a,mc);return f.multi=[],f.index=s,f.componentProviders=0,q_(f,d,c&&!a),f}(d?wD:hS,a.length,d,c,I);!d&&nt&&(a[xe].providerFactory=Et),xm(f,i,s.length,0),s.push(_),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),a.push(Et),y.push(Et)}else xm(f,i,ie>-1?ie:xe,q_(a[d?xe:ie],I,!d&&c));!d&&c&&nt&&a[xe].componentProviders++}}}function xm(i,s,a,c){const d=$l(s),f=function GM(i){return!!i.useClass}(s);if(d||f){const I=(f?Oe(s.useClass):s).prototype.ngOnDestroy;if(I){const C=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const S=C.indexOf(a);-1===S?C.push(a,[c,I]):C[S+1].push(c,I)}else C.push(a,I)}}}function q_(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Rm(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function hS(i,s,a,c){return Nm(this.multi,[])}function wD(i,s,a,c){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,_=Fs(a,a[ut],this.providerFactory.index,c);f=_.slice(0,y),Nm(d,f);for(let I=y;I<_.length;I++)f.push(_[I])}else f=[],Nm(d,f);return f}function Nm(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function ED(i,s=[]){return a=>{a.providersResolver=(c,d)=>function Ef(i,s,a){const c=Cn();if(c.firstCreatePass){const d=We(i);md(a,c.data,c.blueprint,d,!0),md(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class yd{}class ID{}function Z_(i,s){return new Om(i,s??null,[])}class Om extends yd{constructor(s,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new nI(this);const d=or(s);this._bootstrapComponents=ya(d.bootstrap),this._r3Injector=BE(s,a,[{provide:yd,useValue:this},{provide:Mh,useValue:this.componentFactoryResolver},...c],ne(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class K_ extends ID{constructor(s){super(),this.moduleType=s}create(s){return new Om(this.moduleType,s,[])}}class Pm extends yd{constructor(s){super(),this.componentFactoryResolver=new nI(this),this.instance=null;const a=new Mg([...s.providers,{provide:yd,useValue:this},{provide:Mh,useValue:this.componentFactoryResolver}],s.parent||Ag(),s.debugName,new Set(["environment"]));this.injector=a,s.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Y_(i,s,a=null){return new Pm({providers:i,parent:s,debugName:a,runEnvironmentInitializers:!0}).injector}let Df=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const c=sT(0,a.type),d=c.length>0?Y_([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,d)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Nt({token:i,providedIn:"environment",factory:()=>new i(On(lc))}),i})();function _o(i){i.getStandaloneInjector=s=>s.get(Df).getOrCreateStandaloneInjector(i)}function r0(i){return s=>{setTimeout(i,void 0,s)}}const wo=class $c extends h.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,f=a||(()=>null),y=c;if(s&&"object"==typeof s){const I=s;d=I.next?.bind(I),f=I.error?.bind(I),y=I.complete?.bind(I)}this.__isAsync&&(f=r0(f),d&&(d=r0(d)),y&&(y=r0(y)));const _=super.subscribe({next:d,error:f,complete:y});return s instanceof U.w0&&s.add(_),_}};function DS(){return this._results[Symbol.iterator]()}class s0{get changes(){return this._changes||(this._changes=new wo)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=s0.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=DS)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=function Bi(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function Ku(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=s[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Sf=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ru,i})();const Af=Sf,jc=class extends Af{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,a){return this.createEmbeddedViewImpl(s,a,null)}createEmbeddedViewImpl(s,a,c){const y=this._declarationTContainer.tView,_=yc(this._declarationLView,y,s,4096&this._declarationLView[Bt]?4096:16,null,y.declTNode,null,null,null,a||null,c||null);_[Ha]=this._declarationLView[this._declarationTContainer.index];const C=this._declarationLView[ys];return null!==C&&(_[ys]=C.createEmbeddedView(y)),t_(y,_,s),new Jl(_)}};function Ru(){return Mf(Lr(),ke())}function Mf(i,s){return 4&i.type?new jc(s,i,fc(i,s)):null}let Vm=(()=>{class i{}return i.__NG_ELEMENT_ID__=u0,i})();function u0(){return Nf(Lr(),ke())}const Um=Vm,VD=class extends Um{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return fc(this._hostTNode,this._hostLView)}get injector(){return new no(this._hostTNode,this._hostLView)}get parentInjector(){const s=os(this._hostTNode,this._hostLView);if(Lt(s)){const a=nu(s,this._hostLView),c=_l(s);return new no(a[ut].data[c+8],a)}return new no(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=c0(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-$r}createEmbeddedView(s,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const _=s.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(_,d,false),_}createComponent(s,a,c,d,f){const y=s&&!function Zu(i){return"function"==typeof i}(s);let _;if(y)_=a;else{const ze=a||{};_=ze.index,c=ze.injector,d=ze.projectableNodes,f=ze.environmentInjector||ze.ngModuleRef}const I=y?s:new wa(ot(s)),C=c||this.parentInjector;if(!f&&null==I.ngModule){const nt=(y?C:this.parentInjector).get(lc,null);nt&&(f=nt)}ot(I.componentType??{});const ie=I.create(C,d,null,f);return this.insertImpl(ie.hostView,_,false),ie}insert(s,a){return this.insertImpl(s,a,!1)}insertImpl(s,a,c){const d=s._lView,f=d[ut];if(function wp(i){return H(i[rr])}(d)){const I=this.indexOf(s);if(-1!==I)this.detach(I);else{const C=d[rr],S=new VD(C,C[Er],C[rr]);S.detach(S.indexOf(s))}}const y=this._adjustIndex(a),_=this._lContainer;if(function Rb(i,s,a,c){const d=$r+c,f=a.length;c>0&&(a[d-1][ci]=s),c<f-$r?(s[ci]=a[d],ah(a,$r+c,s)):(a.push(s),s[ci]=null),s[rr]=a;const y=s[Ha];null!==y&&a!==y&&function kM(i,s){const a=i[Ro];s[jn]!==s[rr][rr][jn]&&(i[Mo]=!0),null===a?i[Ro]=[s]:a.push(s)}(y,s);const _=s[ys];null!==_&&_.insertView(i),s[Bt]|=128}(f,d,_,y),!c){const I=iv(y,_),C=d[St],S=pa(C,_[_i]);null!==S&&function NM(i,s,a,c,d,f){c[hr]=d,c[Er]=s,kl(i,c,a,1,d,f)}(f,_[Er],C,d,S,I)}return s.attachToViewContainerRef(),ah(zc(_),y,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=c0(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=nv(this._lContainer,a);c&&(Dl(zc(this._lContainer),a),cg(c[ut],c))}detach(s){const a=this._adjustIndex(s,-1),c=nv(this._lContainer,a);return c&&null!=Dl(zc(this._lContainer),a)?new Jl(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function c0(i){return i[8]}function zc(i){return i[8]||(i[8]=[])}function Nf(i,s){let a;const c=s[i.index];return H(c)?a=c:(a=YE(c,s,null,i),s[i.index]=a,$s(s,a)),l0(a,s,i,c),new VD(a,i,s)}let l0=function d0(i,s,a,c){if(i[_i])return;let d;d=8&a.type?ir(c):function Of(i,s){const a=i[St],c=a.createComment(""),d=li(s,i);return oc(a,pa(a,d),c,function Eh(i,s){return i.nextSibling(s)}(a,d),!1),c}(s,a),i[_i]=d};class Id{constructor(s){this.queryList=s,this.matches=null}clone(){return new Id(this.queryList)}setDirty(){this.queryList.setDirty()}}class Dd{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new Dd(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==GD(s,a).matches&&this.queries[a].setDirty()}}class h0{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Yo{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new Yo(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Nu{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Nu(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(s,a,BD(a,f)),this.matchTNodeWithReadOption(s,a,la(a,s,f,!1,!1))}else c===Sf?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,la(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===pc||d===Vm||d===Sf&&4&a.type)this.addMatch(a.index,-2);else{const f=la(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function BD(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function bS(i,s,a,c){return-1===a?function Hc(i,s){return 11&i.type?fc(i,s):4&i.type?Mf(i,s):null}(s,i):-2===a?function Cd(i,s,a){return a===pc?fc(s,i):a===Sf?Mf(s,i):a===Vm?Nf(s,i):void 0}(i,s,c):Fs(i,i[ut],a,s)}function f0(i,s,a,c){const d=s[ys].queries[c];if(null===d.matches){const f=i.data,y=a.matches,_=[];for(let I=0;I<y.length;I+=2){const C=y[I];_.push(C<0?null:bS(s,f[C],y[I+1],a.metadata.read))}d.matches=_}return d.matches}function Qo(i,s,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const y=f0(i,s,d,a);for(let _=0;_<f.length;_+=2){const I=f[_];if(I>0)c.push(y[_/2]);else{const C=f[_+1],S=s[-I];for(let F=$r;F<S.length;F++){const Y=S[F];Y[Ha]===Y[rr]&&Qo(Y[ut],Y,C,c)}if(null!==S[Ro]){const F=S[Ro];for(let Y=0;Y<F.length;Y++){const ie=F[Y];Qo(ie[ut],ie,C,c)}}}}}return c}function p0(i){const s=ke(),a=Cn(),c=fl();Xa(c+1);const d=GD(a,c);if(i.dirty&&function Ry(i){return 4==(4&i[Bt])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?Qo(a,s,c,[]):f0(a,s,d,c);i.reset(f,Iv),i.notifyOnChanges()}return!0}return!1}function g0(i,s,a,c){const d=Cn();if(d.firstCreatePass){const f=Lr();(function Pf(i,s,a){null===i.queries&&(i.queries=new Yo),i.queries.track(new Nu(s,a))})(d,new h0(s,a,c),f.index),function HD(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function zD(i,s,a){const c=new s0(4==(4&a));(function HE(i,s,a,c){const d=e_(s);d.push(a),i.firstCreatePass&&ar(i).push(c,d.length-1)})(i,s,c,c.destroy),null===s[ys]&&(s[ys]=new Dd),s[ys].queries.push(new Id(c))}(d,ke(),a)}function $D(){return function jD(i,s){return i[ys].queries[s].queryList}(ke(),fl())}function GD(i,s){return i.queries.getByIndex(s)}function Bm(i){return!!or(i)}const Uf=new $n("Application Initializer");let Bf=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=Yt(Uf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const f=d();if(et(f))a.push(f);else if(Jh(f)){const y=new Promise((_,I)=>{f.subscribe({complete:_,error:I})});a.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),oC=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const ii=new $n("LocaleId",{providedIn:"root",factory:()=>Yt(ii,ht.Optional|ht.SkipSelf)||function BS(){return typeof $localize<"u"&&$localize.locale||Ws}()}),$S=new $n("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Km=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new O.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class aC{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let zS=(()=>{class i{compileModuleSync(a){return new K_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=ya(or(a).declarations).reduce((y,_)=>{const I=ot(_);return I&&y.push(new wa(I)),y},[]);return new aC(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Qm(...i){}class yi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wo(!1),this.onMicrotaskEmpty=new wo(!1),this.onStable=new wo(!1),this.onError=new wo(!1),typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Td(){const i="function"==typeof jt.requestAnimationFrame;let s=jt[i?"requestAnimationFrame":"setTimeout"],a=jt[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&s&&a){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function A0(i){const s=()=>{!function lC(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(jt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Hf(i),i.isCheckStableRunning=!0,zf(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Hf(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,y,_)=>{try{return Pa(i),a.invokeTask(d,f,y,_)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),M0(i)}},onInvoke:(a,c,d,f,y,_,I)=>{try{return Pa(i),a.invoke(d,f,y,_,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),M0(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Hf(i),zf(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yi.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(yi.isInAngularZone())throw new J(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,s,jf,Qm,Qm);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const jf={};function zf(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Hf(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Pa(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function M0(i){i._nesting--,zf(i)}class WS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wo,this.onMicrotaskEmpty=new wo,this.onStable=new wo,this.onError=new wo}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const Jm=new $n("",{providedIn:"root",factory:dC});function dC(){const i=Yt(yi);let s=!0;const a=new ee.y(d=>{s=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{d.next(s),d.complete()})}),c=new ee.y(d=>{let f;i.runOutsideAngular(()=>{f=i.onStable.subscribe(()=>{yi.assertNotInAngularZone(),queueMicrotask(()=>{!s&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(s=!0,d.next(!0))})})});const y=i.onUnstable.subscribe(()=>{yi.assertInAngularZone(),s&&(s=!1,i.runOutsideAngular(()=>{d.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,se.T)(a,c.pipe((0,_e.B)()))}const Xm=new $n(""),hC=new $n("");let ey,x0=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ey||(function R0(i){ey=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yi.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(On(yi),On(Gf),On(hC))},i.\u0275prov=Nt({token:i,factory:i.\u0275fac}),i})(),Gf=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return ey?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),As=null;const ty=new $n("AllowMultipleToken"),N0=new $n("PlatformDestroyListeners"),O0=new $n("appBootstrapListener");class ZS{constructor(s,a){this.name=s,this.token=a}}function ry(i,s,a=[]){const c=`Platform: ${s}`,d=new $n(c);return(f=[])=>{let y=Wf();if(!y||y.injector.get(ty,!1)){const _=[...a,...f,{provide:d,useValue:!0}];i?i(_):function k0(i){if(As&&!As.get(ty,!1))throw new J(400,!1);(function pC(){!function Tw(i){pp=i}(()=>{throw new J(600,!1)})})(),As=i;const s=i.get(Yc);(function ny(i){i.get(dT,null)?.forEach(a=>a())})(i)}(function iy(i=[],s){return Us.create({name:s,providers:[{provide:EE,useValue:"platform"},{provide:N0,useValue:new Set([()=>As=null])},...i]})}(_,c))}return function gC(i){const s=Wf();if(!s)throw new J(401,!1);return s}()}}function Wf(){return As?.get(Yc)??null}let Yc=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function F0(i="zone.js",s){return"noop"===i?new WS:"zone.js"===i?new yi(s):i}(c?.ngZone,function ka(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const f=function Ur(i,s,a){return new Om(i,s,a)}(a.moduleType,this.injector,function sy(i){return[{provide:yi,useFactory:i},{provide:Cg,multi:!0,useFactory:()=>{const s=Yt(V0,{optional:!0});return()=>s.initialize()}},{provide:vC,useFactory:L0},{provide:Jm,useFactory:dC}]}(()=>d)),y=f.injector.get(gu,null);return d.runOutsideAngular(()=>{const _=d.onError.subscribe({next:I=>{y.handleError(I)}});f.onDestroy(()=>{Fa(this._modules,f),_.unsubscribe()})}),function Qc(i,s,a){try{const c=a();return et(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(y,d,()=>{const _=f.injector.get(Bf);return _.runInitializers(),_.donePromise.then(()=>(function P_(i){rt(i,"Expected localeId to be defined"),"string"==typeof i&&(Ko=i.toLowerCase().replace(/_/g,"-"))}(f.injector.get(ii,Ws)||Ws),this._moduleDoBootstrap(f),f))})})}bootstrapModule(a,c=[]){const d=Jc({},c);return function fC(i,s,a){const c=new K_(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const c=a.injector.get(Xc);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new J(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new J(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(N0,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(On(Us))},i.\u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Jc(i,s){return Array.isArray(s)?s.reduce(Jc,i):{...i,...s}}let Xc=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Yt(vC),this.zoneIsStable=Yt(Jm),this.componentTypes=[],this.components=[],this.isStable=Yt(Km).hasPendingTasks.pipe((0,Ne.w)(a=>a?(0,ye.of)(!1):this.zoneIsStable),(0,pe.x)(),(0,_e.B)()),this._injector=Yt(lc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof AE;if(!this._injector.get(Bf).done)throw!d&&nr(a),new J(405,!1);let y;y=d?a:this._injector.get(Mh).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const _=function P0(i){return i.isBoundToModule}(y)?void 0:this._injector.get(yd),C=y.create(Us.NULL,[],c||y.selector,_),S=C.location.nativeElement,F=C.injector.get(Xm,null);return F?.registerApplication(S),C.onDestroy(()=>{this.detachView(C.hostView),Fa(this.components,C),F?.unregisterApplication(S)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new J(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Fa(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(O0,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Fa(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new J(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Fa(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}const vC=new $n("",{providedIn:"root",factory:()=>Yt(gu).handleError.bind(void 0)});function L0(){const i=Yt(yi),s=Yt(gu);return a=>i.runOutsideAngular(()=>s.handleError(a))}let V0=(()=>{class i{constructor(){this.zone=Yt(yi),this.applicationRef=Yt(Xc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Nt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function QS(){return!1}let JS=(()=>{class i{}return i.__NG_ELEMENT_ID__=IC,i})();function IC(i){return function DC(i,s,a){if(we(i)&&!a){const c=rs(i.index,s);return new Jl(c,c)}return 47&i.type?new Jl(s[jn],s):null}(Lr(),ke(),16==(16&i))}class uy{constructor(){}supports(s){return em(s)}create(s){return new H0(s)}}const nA=(i,s)=>s;class H0{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||nA}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<q0(c,d,f)?a:c,_=q0(y,d,f),I=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const C=_-d,S=I-d;if(C!=S){for(let Y=0;Y<C;Y++){const ie=Y<f.length?f[Y]:f[Y]=0,xe=ie+Y;S<=xe&&xe<C&&(f[Y]=ie+1)}f[y.previousIndex]=S-C}}_!==I&&s(y,_,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!em(s))throw new J(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let _=0;_<this.length;_++)f=s[_],y=this._trackByFn(_,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,_)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,_),c=!0),a=a._next}else d=0,function Wh(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,_=>{y=this._trackByFn(d,_),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,_,y,d)),Object.is(a.item,_)||this._addIdentityChange(a,_)):(a=this._mismatch(a,_,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new G0(a,c),f,d),s}_verifyReinsertion(s,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new el),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new el),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class G0{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class W0{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class el{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new W0,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function q0(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class cy{constructor(){}supports(s){return s instanceof Map||tm(s)}create(){return new rA}}class rA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||tm(s)))throw new J(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const c=new Z0(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class Z0{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Jo(){return new Zf([new uy])}let Zf=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Jo()),deps:[[i,new Xu,new ha]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new J(901,!1)}}return i.\u0275prov=Nt({token:i,providedIn:"root",factory:Jo}),i})();function ly(){return new K0([new cy])}let K0=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||ly()),deps:[[i,new Xu,new ha]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new J(901,!1)}}return i.\u0275prov=Nt({token:i,providedIn:"root",factory:ly}),i})();const sA=ry(null,"core",[]);let Q0=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(On(Xc))},i.\u0275mod=te({type:i}),i.\u0275inj=Zn({}),i})();function dA(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function py(i){const s=ot(i);if(!s)return null;const a=new wa(s);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return s.standalone},get isSignal(){return s.signals}}}},3106:(pt,be,M)=>{M.d(be,{Z:()=>Qe});var h=M(9058),U=M(4537),O=M(534),ee=M(7879);class se{constructor(Ge,Re){this._delegate=Ge,this.firebase=Re,(0,O._addComponent)(Ge,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=Ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ge){this._delegate.automaticDataCollectionEnabled=Ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ge=>{this._delegate.checkDestroyed(),Ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Ge,Re=O._DEFAULT_ENTRY_NAME){var dt;this._delegate.checkDestroyed();const ct=this._delegate.container.getProvider(Ge);return!ct.isInitialized()&&"EXPLICIT"===(null===(dt=ct.getComponent())||void 0===dt?void 0:dt.instantiationMode)&&ct.initialize(),ct.getImmediate({identifier:Re})}_removeServiceInstance(Ge,Re=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ge).clearInstance(Re)}_addComponent(Ge){(0,O._addComponent)(this._delegate,Ge)}_addOrOverwriteComponent(Ge){(0,O._addOrOverwriteComponent)(this._delegate,Ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function pe(){const Oe=function Ne(Oe){const Ge={},Re={__esModule:!0,initializeApp:function J(Ve,z={}){const De=O.initializeApp(Ve,z);if((0,h.r3)(Ge,De.name))return Ge[De.name];const je=new Oe(De,Re);return Ge[De.name]=je,je},app:ct,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ae(Ve){const z=Ve.name,De=z.replace("-compat","");if(O._registerComponent(Ve)&&"PUBLIC"===Ve.type){const je=(wt=ct())=>{if("function"!=typeof wt[De])throw _e.create("invalid-app-argument",{appName:z});return wt[De]()};void 0!==Ve.serviceProps&&(0,h.ZB)(je,Ve.serviceProps),Re[De]=je,Oe.prototype[De]=function(...wt){return this._getService.bind(this,z).apply(this,Ve.multipleInstances?wt:[])}}return"PUBLIC"===Ve.type?Re[De]:null},removeApp:function dt(Ve){delete Ge[Ve]},useAsService:function Me(Ve,z){return"serverAuth"===z?null:z},modularAPIs:O}};function ct(Ve){if(!(0,h.r3)(Ge,Ve=Ve||O._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:Ve});return Ge[Ve]}return Re.default=Re,Object.defineProperty(Re,"apps",{get:function Ie(){return Object.keys(Ge).map(Ve=>Ge[Ve])}}),ct.App=Oe,Re}(se);return Oe.INTERNAL=Object.assign(Object.assign({},Oe.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function Ge(Re){(0,h.ZB)(Oe,Re)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Oe}(),G=new ee.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Oe=self.firebase.SDK_VERSION;Oe&&Oe.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Qe=B;!function Ee(Oe){(0,O.registerVersion)("@firebase/app-compat","0.2.13",Oe)}()},534:(pt,be,M)=>{M.r(be),M.d(be,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>Pr,_DEFAULT_ENTRY_NAME:()=>ht,_addComponent:()=>_r,_addOrOverwriteComponent:()=>Dn,_apps:()=>Mt,_clearComponents:()=>pn,_components:()=>Rt,_getProvider:()=>wn,_registerComponent:()=>jt,_removeServiceInstance:()=>ai,deleteApp:()=>Sn,getApp:()=>Ar,getApps:()=>Un,initializeApp:()=>wr,onLog:()=>Hn,registerVersion:()=>Mn,setLogLevel:()=>On});var h=M(5861),U=M(4537),O=M(7879),ee=M(9058);const se=(L,q)=>q.some(oe=>L instanceof oe);let ye,_e;const B=new WeakMap,G=new WeakMap,ne=new WeakMap,Le=new WeakMap,Ee=new WeakMap;let Ge={get(L,q,oe){if(L instanceof IDBTransaction){if("done"===q)return G.get(L);if("objectStoreNames"===q)return L.objectStoreNames||ne.get(L);if("store"===q)return oe.objectStoreNames[1]?void 0:oe.objectStore(oe.objectStoreNames[0])}return J(L[q])},set:(L,q,oe)=>(L[q]=oe,!0),has:(L,q)=>L instanceof IDBTransaction&&("done"===q||"store"===q)||q in L};function ct(L){return"function"==typeof L?function dt(L){return L!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return _e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(L)?function(...q){return L.apply(Ie(this),q),J(B.get(this))}:function(...q){return J(L.apply(Ie(this),q))}:function(q,...oe){const Ue=L.call(Ie(this),q,...oe);return ne.set(Ue,q.sort?q.sort():[q]),J(Ue)}}(L):(L instanceof IDBTransaction&&function Oe(L){if(G.has(L))return;const q=new Promise((oe,Ue)=>{const Ke=()=>{L.removeEventListener("complete",ft),L.removeEventListener("error",zt),L.removeEventListener("abort",zt)},ft=()=>{oe(),Ke()},zt=()=>{Ue(L.error||new DOMException("AbortError","AbortError")),Ke()};L.addEventListener("complete",ft),L.addEventListener("error",zt),L.addEventListener("abort",zt)});G.set(L,q)}(L),se(L,function Ne(){return ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(L,Ge):L)}function J(L){if(L instanceof IDBRequest)return function Qe(L){const q=new Promise((oe,Ue)=>{const Ke=()=>{L.removeEventListener("success",ft),L.removeEventListener("error",zt)},ft=()=>{oe(J(L.result)),Ke()},zt=()=>{Ue(L.error),Ke()};L.addEventListener("success",ft),L.addEventListener("error",zt)});return q.then(oe=>{oe instanceof IDBCursor&&B.set(oe,L)}).catch(()=>{}),Ee.set(q,L),q}(L);if(Le.has(L))return Le.get(L);const q=ct(L);return q!==L&&(Le.set(L,q),Ee.set(q,L)),q}const Ie=L=>Ee.get(L),Ve=["get","getKey","getAll","getAllKeys","count"],z=["put","add","delete","clear"],De=new Map;function je(L,q){if(!(L instanceof IDBDatabase)||q in L||"string"!=typeof q)return;if(De.get(q))return De.get(q);const oe=q.replace(/FromIndex$/,""),Ue=q!==oe,Ke=z.includes(oe);if(!(oe in(Ue?IDBIndex:IDBObjectStore).prototype)||!Ke&&!Ve.includes(oe))return;const ft=function(){var zt=(0,h.Z)(function*(Pn,...kn){const Fr=this.transaction(Pn,Ke?"readwrite":"readonly");let en=Fr.store;return Ue&&(en=en.index(kn.shift())),(yield Promise.all([en[oe](...kn),Ke&&Fr.done]))[0]});return function(kn){return zt.apply(this,arguments)}}();return De.set(q,ft),ft}!function Re(L){Ge=L(Ge)}(L=>({...L,get:(q,oe,Ue)=>je(q,oe)||L.get(q,oe,Ue),has:(q,oe)=>!!je(q,oe)||L.has(q,oe)}));class wt{constructor(q){this.container=q}getPlatformInfoString(){return this.container.getProviders().map(oe=>{if(function ln(L){const q=L.getComponent();return"VERSION"===q?.type}(oe)){const Ue=oe.getImmediate();return`${Ue.library}/${Ue.version}`}return null}).filter(oe=>oe).join(" ")}}const dn="@firebase/app",hn=new O.Yd("@firebase/app"),ht="[DEFAULT]",xt={[dn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Mt=new Map,Rt=new Map;function _r(L,q){try{L.container.addComponent(q)}catch(oe){hn.debug(`Component ${q.name} failed to register with FirebaseApp ${L.name}`,oe)}}function Dn(L,q){L.container.addOrOverwriteComponent(q)}function jt(L){const q=L.name;if(Rt.has(q))return hn.debug(`There were multiple attempts to register component ${q}.`),!1;Rt.set(q,L);for(const oe of Mt.values())_r(oe,L);return!0}function wn(L,q){const oe=L.container.getProvider("heartbeat").getImmediate({optional:!0});return oe&&oe.triggerHeartbeat(),L.container.getProvider(q)}function ai(L,q,oe=ht){wn(L,q).clearInstance(oe)}function pn(){Rt.clear()}const Pt=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class gn{constructor(q,oe,Ue){this._isDeleted=!1,this._options=Object.assign({},q),this._config=Object.assign({},oe),this._name=oe.name,this._automaticDataCollectionEnabled=oe.automaticDataCollectionEnabled,this._container=Ue,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(q){this.checkDestroyed(),this._automaticDataCollectionEnabled=q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(q){this._isDeleted=q}checkDestroyed(){if(this.isDeleted)throw Pt.create("app-deleted",{appName:this._name})}}const Pr="9.23.0";function wr(L,q={}){let oe=L;"object"!=typeof q&&(q={name:q});const Ue=Object.assign({name:ht,automaticDataCollectionEnabled:!1},q),Ke=Ue.name;if("string"!=typeof Ke||!Ke)throw Pt.create("bad-app-name",{appName:String(Ke)});if(oe||(oe=(0,ee.aH)()),!oe)throw Pt.create("no-options");const ft=Mt.get(Ke);if(ft){if((0,ee.vZ)(oe,ft.options)&&(0,ee.vZ)(Ue,ft.config))return ft;throw Pt.create("duplicate-app",{appName:Ke})}const zt=new U.H0(Ke);for(const kn of Rt.values())zt.addComponent(kn);const Pn=new gn(oe,Ue,zt);return Mt.set(Ke,Pn),Pn}function Ar(L=ht){const q=Mt.get(L);if(!q&&L===ht&&(0,ee.aH)())return wr();if(!q)throw Pt.create("no-app",{appName:L});return q}function Un(){return Array.from(Mt.values())}function Sn(L){return zn.apply(this,arguments)}function zn(){return(zn=(0,h.Z)(function*(L){const q=L.name;Mt.has(q)&&(Mt.delete(q),yield Promise.all(L.container.getProviders().map(oe=>oe.delete())),L.isDeleted=!0)})).apply(this,arguments)}function Mn(L,q,oe){var Ue;let Ke=null!==(Ue=xt[L])&&void 0!==Ue?Ue:L;oe&&(Ke+=`-${oe}`);const ft=Ke.match(/\s|\//),zt=q.match(/\s|\//);if(ft||zt){const Pn=[`Unable to register library "${Ke}" with version "${q}":`];return ft&&Pn.push(`library name "${Ke}" contains illegal characters (whitespace or "/")`),ft&&zt&&Pn.push("and"),zt&&Pn.push(`version name "${q}" contains illegal characters (whitespace or "/")`),void hn.warn(Pn.join(" "))}jt(new U.wA(`${Ke}-version`,()=>({library:Ke,version:q}),"VERSION"))}function Hn(L,q){if(null!==L&&"function"!=typeof L)throw Pt.create("invalid-log-argument");(0,O.Am)(L,q)}function On(L){(0,O.Ub)(L)}const kr="firebase-heartbeat-database",Yt=1,W="firebase-heartbeat-store";let j=null;function R(){return j||(j=function ae(L,q,{blocked:oe,upgrade:Ue,blocking:Ke,terminated:ft}={}){const zt=indexedDB.open(L,q),Pn=J(zt);return Ue&&zt.addEventListener("upgradeneeded",kn=>{Ue(J(zt.result),kn.oldVersion,kn.newVersion,J(zt.transaction),kn)}),oe&&zt.addEventListener("blocked",kn=>oe(kn.oldVersion,kn.newVersion,kn)),Pn.then(kn=>{ft&&kn.addEventListener("close",()=>ft()),Ke&&kn.addEventListener("versionchange",Fr=>Ke(Fr.oldVersion,Fr.newVersion,Fr))}).catch(()=>{}),Pn}(kr,Yt,{upgrade:(L,q)=>{0===q&&L.createObjectStore(W)}}).catch(L=>{throw Pt.create("idb-open",{originalErrorMessage:L.message})})),j}function A(){return(A=(0,h.Z)(function*(L){try{return yield(yield R()).transaction(W).objectStore(W).get(Je(L))}catch(q){if(q instanceof ee.ZR)hn.warn(q.message);else{const oe=Pt.create("idb-get",{originalErrorMessage:q?.message});hn.warn(oe.message)}}})).apply(this,arguments)}function X(L,q){return ve.apply(this,arguments)}function ve(){return(ve=(0,h.Z)(function*(L,q){try{const Ue=(yield R()).transaction(W,"readwrite");yield Ue.objectStore(W).put(q,Je(L)),yield Ue.done}catch(oe){if(oe instanceof ee.ZR)hn.warn(oe.message);else{const Ue=Pt.create("idb-set",{originalErrorMessage:oe?.message});hn.warn(Ue.message)}}})).apply(this,arguments)}function Je(L){return`${L.name}!${L.options.appId}`}class lt{constructor(q){this.container=q,this._heartbeatsCache=null;const oe=this.container.getProvider("app").getImmediate();this._storage=new Ft(oe),this._heartbeatsCachePromise=this._storage.read().then(Ue=>(this._heartbeatsCache=Ue,Ue))}triggerHeartbeat(){var q=this;return(0,h.Z)(function*(){const Ue=q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ke=Tt();if(null===q._heartbeatsCache&&(q._heartbeatsCache=yield q._heartbeatsCachePromise),q._heartbeatsCache.lastSentHeartbeatDate!==Ke&&!q._heartbeatsCache.heartbeats.some(ft=>ft.date===Ke))return q._heartbeatsCache.heartbeats.push({date:Ke,agent:Ue}),q._heartbeatsCache.heartbeats=q._heartbeatsCache.heartbeats.filter(ft=>{const zt=new Date(ft.date).valueOf();return Date.now()-zt<=2592e6}),q._storage.overwrite(q._heartbeatsCache)})()}getHeartbeatsHeader(){var q=this;return(0,h.Z)(function*(){if(null===q._heartbeatsCache&&(yield q._heartbeatsCachePromise),null===q._heartbeatsCache||0===q._heartbeatsCache.heartbeats.length)return"";const oe=Tt(),{heartbeatsToSend:Ue,unsentEntries:Ke}=function mn(L,q=1024){const oe=[];let Ue=L.slice();for(const Ke of L){const ft=oe.find(zt=>zt.agent===Ke.agent);if(ft){if(ft.dates.push(Ke.date),Jn(oe)>q){ft.dates.pop();break}}else if(oe.push({agent:Ke.agent,dates:[Ke.date]}),Jn(oe)>q){oe.pop();break}Ue=Ue.slice(1)}return{heartbeatsToSend:oe,unsentEntries:Ue}}(q._heartbeatsCache.heartbeats),ft=(0,ee.L)(JSON.stringify({version:2,heartbeats:Ue}));return q._heartbeatsCache.lastSentHeartbeatDate=oe,Ke.length>0?(q._heartbeatsCache.heartbeats=Ke,yield q._storage.overwrite(q._heartbeatsCache)):(q._heartbeatsCache.heartbeats=[],q._storage.overwrite(q._heartbeatsCache)),ft})()}}function Tt(){return(new Date).toISOString().substring(0,10)}class Ft{constructor(q){this.app=q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var q=this;return(0,h.Z)(function*(){return(yield q._canUseIndexedDBPromise)&&(yield function P(L){return A.apply(this,arguments)}(q.app))||{heartbeats:[]}})()}overwrite(q){var oe=this;return(0,h.Z)(function*(){var Ue;if(yield oe._canUseIndexedDBPromise){const ft=yield oe.read();return X(oe.app,{lastSentHeartbeatDate:null!==(Ue=q.lastSentHeartbeatDate)&&void 0!==Ue?Ue:ft.lastSentHeartbeatDate,heartbeats:q.heartbeats})}})()}add(q){var oe=this;return(0,h.Z)(function*(){var Ue;if(yield oe._canUseIndexedDBPromise){const ft=yield oe.read();return X(oe.app,{lastSentHeartbeatDate:null!==(Ue=q.lastSentHeartbeatDate)&&void 0!==Ue?Ue:ft.lastSentHeartbeatDate,heartbeats:[...ft.heartbeats,...q.heartbeats]})}})()}}function Jn(L){return(0,ee.L)(JSON.stringify({version:2,heartbeats:L})).length}!function Z(L){jt(new U.wA("platform-logger",q=>new wt(q),"PRIVATE")),jt(new U.wA("heartbeat",q=>new lt(q),"PRIVATE")),Mn(dn,"0.9.13",L),Mn(dn,"0.9.13","esm2017"),Mn("fire-js","")}("")},4537:(pt,be,M)=>{M.d(be,{H0:()=>Ne,wA:()=>O});var h=M(5861),U=M(9058);class O{constructor(B,G,ne){this.name=B,this.instanceFactory=G,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ee="[DEFAULT]";class se{constructor(B,G){this.name=B,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const G=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(G)){const ne=new U.BH;if(this.instancesDeferred.set(G,ne),this.isInitialized(G)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:G});Le&&ne.resolve(Le)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(B){var G;const ne=this.normalizeInstanceIdentifier(B?.identifier),Le=null!==(G=B?.optional)&&void 0!==G&&G;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Ee){if(Le)return null;throw Ee}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function _e(pe){return"EAGER"===pe.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[G,ne]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(G);try{const Ee=this.getOrInitializeService({instanceIdentifier:Le});ne.resolve(Ee)}catch{}}}}clearInstance(B=ee){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,h.Z)(function*(){const G=Array.from(B.instances.values());yield Promise.all([...G.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...G.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ee){return this.instances.has(B)}getOptions(B=ee){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:G={}}=B,ne=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:ne,options:G});for(const[Ee,Qe]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Ee)&&Qe.resolve(Le);return Le}onInit(B,G){var ne;const Le=this.normalizeInstanceIdentifier(G),Ee=null!==(ne=this.onInitCallbacks.get(Le))&&void 0!==ne?ne:new Set;Ee.add(B),this.onInitCallbacks.set(Le,Ee);const Qe=this.instances.get(Le);return Qe&&B(Qe,Le),()=>{Ee.delete(B)}}invokeOnInitCallbacks(B,G){const ne=this.onInitCallbacks.get(G);if(ne)for(const Le of ne)try{Le(B,G)}catch{}}getOrInitializeService({instanceIdentifier:B,options:G={}}){let ne=this.instances.get(B);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=B,pe===ee?void 0:pe),options:G}),this.instances.set(B,ne),this.instancesOptions.set(B,G),this.invokeOnInitCallbacks(ne,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,ne)}catch{}var pe;return ne||null}normalizeInstanceIdentifier(B=ee){return this.component?this.component.multipleInstances?B:ee:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ne{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const G=this.getProvider(B.name);if(G.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);G.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const G=new se(B,this);return this.providers.set(B,G),G}getProviders(){return Array.from(this.providers.values())}}},2591:(pt,be,M)=>{var h=M(5861),U=M(534),O=M(4537),ee=M(9058);const se=($,te)=>te.some(Ce=>$ instanceof Ce);let ye,_e;const B=new WeakMap,G=new WeakMap,ne=new WeakMap,Le=new WeakMap,Ee=new WeakMap;let Ge={get($,te,Ce){if($ instanceof IDBTransaction){if("done"===te)return G.get($);if("objectStoreNames"===te)return $.objectStoreNames||ne.get($);if("store"===te)return Ce.objectStoreNames[1]?void 0:Ce.objectStore(Ce.objectStoreNames[0])}return J($[te])},set:($,te,Ce)=>($[te]=Ce,!0),has:($,te)=>$ instanceof IDBTransaction&&("done"===te||"store"===te)||te in $};function ct($){return"function"==typeof $?function dt($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return _e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...te){return $.apply(Ie(this),te),J(B.get(this))}:function(...te){return J($.apply(Ie(this),te))}:function(te,...Ce){const at=$.call(Ie(this),te,...Ce);return ne.set(at,te.sort?te.sort():[te]),J(at)}}($):($ instanceof IDBTransaction&&function Oe($){if(G.has($))return;const te=new Promise((Ce,at)=>{const sn=()=>{$.removeEventListener("complete",on),$.removeEventListener("error",ot),$.removeEventListener("abort",ot)},on=()=>{Ce(),sn()},ot=()=>{at($.error||new DOMException("AbortError","AbortError")),sn()};$.addEventListener("complete",on),$.addEventListener("error",ot),$.addEventListener("abort",ot)});G.set($,te)}($),se($,function Ne(){return ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,Ge):$)}function J($){if($ instanceof IDBRequest)return function Qe($){const te=new Promise((Ce,at)=>{const sn=()=>{$.removeEventListener("success",on),$.removeEventListener("error",ot)},on=()=>{Ce(J($.result)),sn()},ot=()=>{at($.error),sn()};$.addEventListener("success",on),$.addEventListener("error",ot)});return te.then(Ce=>{Ce instanceof IDBCursor&&B.set(Ce,$)}).catch(()=>{}),Ee.set(te,$),te}($);if(Le.has($))return Le.get($);const te=ct($);return te!==$&&(Le.set($,te),Ee.set(te,$)),te}const Ie=$=>Ee.get($),Ve=["get","getKey","getAll","getAllKeys","count"],z=["put","add","delete","clear"],De=new Map;function je($,te){if(!($ instanceof IDBDatabase)||te in $||"string"!=typeof te)return;if(De.get(te))return De.get(te);const Ce=te.replace(/FromIndex$/,""),at=te!==Ce,sn=z.includes(Ce);if(!(Ce in(at?IDBIndex:IDBObjectStore).prototype)||!sn&&!Ve.includes(Ce))return;const on=function(){var ot=(0,h.Z)(function*(an,..._n){const nr=this.transaction(an,sn?"readwrite":"readonly");let or=nr.store;return at&&(or=or.index(_n.shift())),(yield Promise.all([or[Ce](..._n),sn&&nr.done]))[0]});return function(_n){return ot.apply(this,arguments)}}();return De.set(te,on),on}!function Re($){Ge=$(Ge)}($=>({...$,get:(te,Ce,at)=>je(te,Ce)||$.get(te,Ce,at),has:(te,Ce)=>!!je(te,Ce)||$.has(te,Ce)}));const wt="@firebase/installations",ln="0.6.4",dn=1e4,bn=`w:${ln}`,hn="FIS_v2",qn="https://firebaseinstallations.googleapis.com/v1",Nr=36e5,ue=new ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Te($){return $ instanceof ee.ZR&&$.code.includes("request-failed")}function Be({projectId:$}){return`${qn}/projects/${$}/installations`}function rt($){return{token:$.token,requestStatus:2,expiresIn:Zn($.expiresIn),creationTime:Date.now()}}function Xe($,te){return qt.apply(this,arguments)}function qt(){return(qt=(0,h.Z)(function*($,te){const at=(yield te.json()).error;return ue.create("request-failed",{requestName:$,serverCode:at.code,serverMessage:at.message,serverStatus:at.status})})).apply(this,arguments)}function It({apiKey:$}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":$})}function Nt($){return fn.apply(this,arguments)}function fn(){return(fn=(0,h.Z)(function*($){const te=yield $();return te.status>=500&&te.status<600?$():te})).apply(this,arguments)}function Zn($){return Number($.replace("s","000"))}function Nn(){return(Nn=(0,h.Z)(function*({appConfig:$,heartbeatServiceProvider:te},{fid:Ce}){const at=Be($),sn=It($),on=te.getImmediate({optional:!0});if(on){const nr=yield on.getHeartbeatsHeader();nr&&sn.append("x-firebase-client",nr)}const an={method:"POST",headers:sn,body:JSON.stringify({fid:Ce,authVersion:hn,appId:$.appId,sdkVersion:bn})},_n=yield Nt(()=>fetch(at,an));if(_n.ok){const nr=yield _n.json();return{fid:nr.fid||Ce,registrationStatus:2,refreshToken:nr.refreshToken,authToken:rt(nr.authToken)}}throw yield Xe("Create Installation",_n)})).apply(this,arguments)}function mr($){return new Promise(te=>{setTimeout(te,$)})}const lr=/^[cdef][\w-]{21}$/,Tn="";function dr(){try{const $=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues($),$[0]=112+$[0]%16;const Ce=function oi($){return function Or($){return btoa(String.fromCharCode(...$)).replace(/\+/g,"-").replace(/\//g,"_")}($).substr(0,22)}($);return lr.test(Ce)?Ce:Tn}catch{return Tn}}function ht($){return`${$.appName}!${$.appId}`}const xt=new Map;function Mt($,te){const Ce=ht($);Dn(Ce,te),function jt($,te){const Ce=function ai(){return!wn&&"BroadcastChannel"in self&&(wn=new BroadcastChannel("[Firebase] FID Change"),wn.onmessage=$=>{Dn($.data.key,$.data.fid)}),wn}();Ce&&Ce.postMessage({key:$,fid:te}),function pn(){0===xt.size&&wn&&(wn.close(),wn=null)}()}(Ce,te)}function Dn($,te){const Ce=xt.get($);if(Ce)for(const at of Ce)at(te)}let wn=null;const ui="firebase-installations-database",Pt=1,gn="firebase-installations-store";let Pr=null;function wr(){return Pr||(Pr=function ae($,te,{blocked:Ce,upgrade:at,blocking:sn,terminated:on}={}){const ot=indexedDB.open($,te),an=J(ot);return at&&ot.addEventListener("upgradeneeded",_n=>{at(J(ot.result),_n.oldVersion,_n.newVersion,J(ot.transaction))}),Ce&&ot.addEventListener("blocked",()=>Ce()),an.then(_n=>{on&&_n.addEventListener("close",()=>on()),sn&&_n.addEventListener("versionchange",()=>sn())}).catch(()=>{}),an}(ui,Pt,{upgrade:($,te)=>{0===te&&$.createObjectStore(gn)}})),Pr}function Ar($,te){return Un.apply(this,arguments)}function Un(){return(Un=(0,h.Z)(function*($,te){const Ce=ht($),sn=(yield wr()).transaction(gn,"readwrite"),on=sn.objectStore(gn),ot=yield on.get(Ce);return yield on.put(te,Ce),yield sn.done,(!ot||ot.fid!==te.fid)&&Mt($,te.fid),te})).apply(this,arguments)}function Sn($){return zn.apply(this,arguments)}function zn(){return(zn=(0,h.Z)(function*($){const te=ht($),at=(yield wr()).transaction(gn,"readwrite");yield at.objectStore(gn).delete(te),yield at.done})).apply(this,arguments)}function Mn($,te){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,h.Z)(function*($,te){const Ce=ht($),sn=(yield wr()).transaction(gn,"readwrite"),on=sn.objectStore(gn),ot=yield on.get(Ce),an=te(ot);return void 0===an?yield on.delete(Ce):yield on.put(an,Ce),yield sn.done,an&&(!ot||ot.fid!==an.fid)&&Mt($,an.fid),an})).apply(this,arguments)}function On($){return kr.apply(this,arguments)}function kr(){return kr=(0,h.Z)(function*($){let te;const Ce=yield Mn($.appConfig,at=>{const sn=function Yt($){return ve($||{fid:dr(),registrationStatus:0})}(at),on=function W($,te){if(0===te.registrationStatus){if(!navigator.onLine)return{installationEntry:te,registrationPromise:Promise.reject(ue.create("app-offline"))};const Ce={fid:te.fid,registrationStatus:1,registrationTime:Date.now()},at=function j($,te){return R.apply(this,arguments)}($,Ce);return{installationEntry:Ce,registrationPromise:at}}return 1===te.registrationStatus?{installationEntry:te,registrationPromise:P($)}:{installationEntry:te}}($,sn);return te=on.registrationPromise,on.installationEntry});return Ce.fid===Tn?{installationEntry:yield te}:{installationEntry:Ce,registrationPromise:te}}),kr.apply(this,arguments)}function R(){return R=(0,h.Z)(function*($,te){try{const Ce=yield function vn($,te){return Nn.apply(this,arguments)}($,te);return Ar($.appConfig,Ce)}catch(Ce){throw Te(Ce)&&409===Ce.customData.serverCode?yield Sn($.appConfig):yield Ar($.appConfig,{fid:te.fid,registrationStatus:0}),Ce}}),R.apply(this,arguments)}function P($){return A.apply(this,arguments)}function A(){return(A=(0,h.Z)(function*($){let te=yield X($.appConfig);for(;1===te.registrationStatus;)yield mr(100),te=yield X($.appConfig);if(0===te.registrationStatus){const{installationEntry:Ce,registrationPromise:at}=yield On($);return at||Ce}return te})).apply(this,arguments)}function X($){return Mn($,te=>{if(!te)throw ue.create("installation-not-found");return ve(te)})}function ve($){return function Je($){return 1===$.registrationStatus&&$.registrationTime+dn<Date.now()}($)?{fid:$.fid,registrationStatus:0}:$}function yt(){return(yt=(0,h.Z)(function*({appConfig:$,heartbeatServiceProvider:te},Ce){const at=function lt($,{fid:te}){return`${Be($)}/${te}/authTokens:generate`}($,Ce),sn=function Xt($,{refreshToken:te}){const Ce=It($);return Ce.append("Authorization",function Kn($){return`${hn} ${$}`}(te)),Ce}($,Ce),on=te.getImmediate({optional:!0});if(on){const nr=yield on.getHeartbeatsHeader();nr&&sn.append("x-firebase-client",nr)}const an={method:"POST",headers:sn,body:JSON.stringify({installation:{sdkVersion:bn,appId:$.appId}})},_n=yield Nt(()=>fetch(at,an));if(_n.ok)return rt(yield _n.json());throw yield Xe("Generate Auth Token",_n)})).apply(this,arguments)}function Tt($){return mn.apply(this,arguments)}function mn(){return mn=(0,h.Z)(function*($,te=!1){let Ce;const at=yield Mn($.appConfig,on=>{if(!oe(on))throw ue.create("not-registered");const ot=on.authToken;if(!te&&function Ue($){return 2===$.requestStatus&&!function Ke($){const te=Date.now();return te<$.creationTime||$.creationTime+$.expiresIn<te+Nr}($)}(ot))return on;if(1===ot.requestStatus)return Ce=function Ft($,te){return Jn.apply(this,arguments)}($,te),on;{if(!navigator.onLine)throw ue.create("app-offline");const an=function ft($){const te={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},$),{authToken:te})}(on);return Ce=function L($,te){return q.apply(this,arguments)}($,an),an}});return Ce?yield Ce:at.authToken}),mn.apply(this,arguments)}function Jn(){return(Jn=(0,h.Z)(function*($,te){let Ce=yield Z($.appConfig);for(;1===Ce.authToken.requestStatus;)yield mr(100),Ce=yield Z($.appConfig);const at=Ce.authToken;return 0===at.requestStatus?Tt($,te):at})).apply(this,arguments)}function Z($){return Mn($,te=>{if(!oe(te))throw ue.create("not-registered");return function zt($){return 1===$.requestStatus&&$.requestTime+dn<Date.now()}(te.authToken)?Object.assign(Object.assign({},te),{authToken:{requestStatus:0}}):te})}function q(){return q=(0,h.Z)(function*($,te){try{const Ce=yield function vt($,te){return yt.apply(this,arguments)}($,te),at=Object.assign(Object.assign({},te),{authToken:Ce});return yield Ar($.appConfig,at),Ce}catch(Ce){if(!Te(Ce)||401!==Ce.customData.serverCode&&404!==Ce.customData.serverCode){const at=Object.assign(Object.assign({},te),{authToken:{requestStatus:0}});yield Ar($.appConfig,at)}else yield Sn($.appConfig);throw Ce}}),q.apply(this,arguments)}function oe($){return void 0!==$&&2===$.registrationStatus}function kn(){return(kn=(0,h.Z)(function*($){const te=$,{installationEntry:Ce,registrationPromise:at}=yield On(te);return at?at.catch(console.error):Tt(te).catch(console.error),Ce.fid})).apply(this,arguments)}function en(){return en=(0,h.Z)(function*($,te=!1){const Ce=$;return yield function qs($){return Eo.apply(this,arguments)}(Ce),(yield Tt(Ce,te)).token}),en.apply(this,arguments)}function Eo(){return(Eo=(0,h.Z)(function*($){const{registrationPromise:te}=yield On($);te&&(yield te)})).apply(this,arguments)}function Ba($){return ue.create("missing-app-config-values",{valueName:$})}const Do="installations",na=$=>{const te=$.getProvider("app").getImmediate(),Ce=function Io($){if(!$||!$.options)throw Ba("App Configuration");if(!$.name)throw Ba("App Name");const te=["projectId","apiKey","appId"];for(const Ce of te)if(!$.options[Ce])throw Ba(Ce);return{appName:$.name,projectId:$.options.projectId,apiKey:$.options.apiKey,appId:$.options.appId}}(te);return{app:te,appConfig:Ce,heartbeatServiceProvider:(0,U._getProvider)(te,"heartbeat"),_delete:()=>Promise.resolve()}},$a=$=>{const te=$.getProvider("app").getImmediate(),Ce=(0,U._getProvider)(te,Do).getImmediate();return{getId:()=>function Pn($){return kn.apply(this,arguments)}(Ce),getToken:sn=>function Fr($){return en.apply(this,arguments)}(Ce,sn)}};(function Fu(){(0,U._registerComponent)(new O.wA(Do,na,"PUBLIC")),(0,U._registerComponent)(new O.wA("installations-internal",$a,"PRIVATE"))})(),(0,U.registerVersion)(wt,ln),(0,U.registerVersion)(wt,ln,"esm2017")},7879:(pt,be,M)=>{M.d(be,{Am:()=>pe,Ub:()=>Ne,Yd:()=>_e,in:()=>U});const h=[];var U=function(B){return B[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",B}(U||{});const O={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},ee=U.INFO,se={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},ye=(B,G,...ne)=>{if(G<B.logLevel)return;const Le=(new Date).toISOString(),Ee=se[G];if(!Ee)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Ee](`[${Le}]  ${B.name}:`,...ne)};class _e{constructor(G){this.name=G,this._logLevel=ee,this._logHandler=ye,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in U))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?O[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...G),this._logHandler(this,U.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...G),this._logHandler(this,U.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,U.INFO,...G),this._logHandler(this,U.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,U.WARN,...G),this._logHandler(this,U.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...G),this._logHandler(this,U.ERROR,...G)}}function Ne(B){h.forEach(G=>{G.setLogLevel(B)})}function pe(B,G){for(const ne of h){let Le=null;G&&G.level&&(Le=O[G.level]),ne.userLogHandler=null===B?null:(Ee,Qe,...Oe)=>{const Ge=Oe.map(Re=>{if(null==Re)return null;if("string"==typeof Re)return Re;if("number"==typeof Re||"boolean"==typeof Re)return Re.toString();if(Re instanceof Error)return Re.message;try{return JSON.stringify(Re)}catch{return null}}).filter(Re=>Re).join(" ");Qe>=(Le??Ee.logLevel)&&B({level:U[Qe].toLowerCase(),message:Ge,args:Oe,type:Ee.name})}}}},2650:(pt,be,M)=>{M.d(be,{Gb:()=>X,KL:()=>lt,LP:()=>Tt,pQ:()=>Ft,ps:()=>Jn});var h=M(5861),O=(M(2591),M(4537)),ee=M(9240),se=M(9058),ye=M(534);const _e="/firebase-messaging-sw.js",Ne="/firebase-cloud-messaging-push-scope",pe="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",B="https://fcmregistrations.googleapis.com/v1",G="google.c.a.c_id",ne="google.c.a.c_l",Le="google.c.a.ts";var Oe=function(Z){return Z.PUSH_RECEIVED="push-received",Z.NOTIFICATION_CLICKED="notification-clicked",Z}(Oe||{});function Ge(Z){const L=new Uint8Array(Z);return btoa(String.fromCharCode(...L)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Re(Z){const q=(Z+"=".repeat((4-Z.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),oe=atob(q),Ue=new Uint8Array(oe.length);for(let Ke=0;Ke<oe.length;++Ke)Ue[Ke]=oe.charCodeAt(Ke);return Ue}const dt="fcm_token_details_db",ct=5,J="fcm_token_object_Store";function ae(){return ae=(0,h.Z)(function*(Z){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ke=>Ke.name).includes(dt))return null;let L=null;return(yield(0,ee.X3)(dt,ct,{upgrade:(oe=(0,h.Z)(function*(Ue,Ke,ft,zt){var Pn;if(Ke<2||!Ue.objectStoreNames.contains(J))return;const kn=zt.objectStore(J),Fr=yield kn.index("fcmSenderId").get(Z);if(yield kn.clear(),Fr)if(2===Ke){const en=Fr;if(!en.auth||!en.p256dh||!en.endpoint)return;L={token:en.fcmToken,createTime:null!==(Pn=en.createTime)&&void 0!==Pn?Pn:Date.now(),subscriptionOptions:{auth:en.auth,p256dh:en.p256dh,endpoint:en.endpoint,swScope:en.swScope,vapidKey:"string"==typeof en.vapidKey?en.vapidKey:Ge(en.vapidKey)}}}else if(3===Ke){const en=Fr;L={token:en.fcmToken,createTime:en.createTime,subscriptionOptions:{auth:Ge(en.auth),p256dh:Ge(en.p256dh),endpoint:en.endpoint,swScope:en.swScope,vapidKey:Ge(en.vapidKey)}}}else if(4===Ke){const en=Fr;L={token:en.fcmToken,createTime:en.createTime,subscriptionOptions:{auth:Ge(en.auth),p256dh:Ge(en.p256dh),endpoint:en.endpoint,swScope:en.swScope,vapidKey:Ge(en.vapidKey)}}}}),function(Ke,ft,zt,Pn){return oe.apply(this,arguments)})})).close(),yield(0,ee.Lj)(dt),yield(0,ee.Lj)("fcm_vapid_details_db"),yield(0,ee.Lj)("undefined"),function Me(Z){if(!Z||!Z.subscriptionOptions)return!1;const{subscriptionOptions:L}=Z;return"number"==typeof Z.createTime&&Z.createTime>0&&"string"==typeof Z.token&&Z.token.length>0&&"string"==typeof L.auth&&L.auth.length>0&&"string"==typeof L.p256dh&&L.p256dh.length>0&&"string"==typeof L.endpoint&&L.endpoint.length>0&&"string"==typeof L.swScope&&L.swScope.length>0&&"string"==typeof L.vapidKey&&L.vapidKey.length>0}(L)?L:null;var oe}),ae.apply(this,arguments)}const Ve="firebase-messaging-database",z=1,De="firebase-messaging-store";let je=null;function wt(){return je||(je=(0,ee.X3)(Ve,z,{upgrade:(Z,L)=>{0===L&&Z.createObjectStore(De)}})),je}function ln(Z){return dn.apply(this,arguments)}function dn(){return dn=(0,h.Z)(function*(Z){const L=le(Z),oe=yield(yield wt()).transaction(De).objectStore(De).get(L);if(oe)return oe;{const Ue=yield function Ie(Z){return ae.apply(this,arguments)}(Z.appConfig.senderId);if(Ue)return yield bn(Z,Ue),Ue}}),dn.apply(this,arguments)}function bn(Z,L){return hn.apply(this,arguments)}function hn(){return(hn=(0,h.Z)(function*(Z,L){const q=le(Z),Ue=(yield wt()).transaction(De,"readwrite");return yield Ue.objectStore(De).put(L,q),yield Ue.done,L})).apply(this,arguments)}function Nr(){return(Nr=(0,h.Z)(function*(Z){const L=le(Z),oe=(yield wt()).transaction(De,"readwrite");yield oe.objectStore(De).delete(L),yield oe.done})).apply(this,arguments)}function le({appConfig:Z}){return Z.appId}const he=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ue(Z,L){return Te.apply(this,arguments)}function Te(){return(Te=(0,h.Z)(function*(Z,L){const q=yield Xt(Z),oe=fn(L),Ue={method:"POST",headers:q,body:JSON.stringify(oe)};let Ke;try{Ke=yield(yield fetch(It(Z.appConfig),Ue)).json()}catch(ft){throw he.create("token-subscribe-failed",{errorInfo:ft?.toString()})}if(Ke.error)throw he.create("token-subscribe-failed",{errorInfo:Ke.error.message});if(!Ke.token)throw he.create("token-subscribe-no-token");return Ke.token})).apply(this,arguments)}function rt(){return(rt=(0,h.Z)(function*(Z,L){const q=yield Xt(Z),oe=fn(L.subscriptionOptions),Ue={method:"PATCH",headers:q,body:JSON.stringify(oe)};let Ke;try{Ke=yield(yield fetch(`${It(Z.appConfig)}/${L.token}`,Ue)).json()}catch(ft){throw he.create("token-update-failed",{errorInfo:ft?.toString()})}if(Ke.error)throw he.create("token-update-failed",{errorInfo:Ke.error.message});if(!Ke.token)throw he.create("token-update-no-token");return Ke.token})).apply(this,arguments)}function Xe(Z,L){return qt.apply(this,arguments)}function qt(){return(qt=(0,h.Z)(function*(Z,L){const oe={method:"DELETE",headers:yield Xt(Z)};try{const Ke=yield(yield fetch(`${It(Z.appConfig)}/${L}`,oe)).json();if(Ke.error)throw he.create("token-unsubscribe-failed",{errorInfo:Ke.error.message})}catch(Ue){throw he.create("token-unsubscribe-failed",{errorInfo:Ue?.toString()})}})).apply(this,arguments)}function It({projectId:Z}){return`${B}/projects/${Z}/registrations`}function Xt(Z){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,h.Z)(function*({appConfig:Z,installations:L}){const q=yield L.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Z.apiKey,"x-goog-firebase-installations-auth":`FIS ${q}`})})).apply(this,arguments)}function fn({p256dh:Z,auth:L,endpoint:q,vapidKey:oe}){const Ue={web:{endpoint:q,auth:L,p256dh:Z}};return oe!==pe&&(Ue.web.applicationPubKey=oe),Ue}const Zn=6048e5;function vn(){return vn=(0,h.Z)(function*(Z){const L=yield function oi(Z,L){return ht.apply(this,arguments)}(Z.swRegistration,Z.vapidKey),q={vapidKey:Z.vapidKey,swScope:Z.swRegistration.scope,endpoint:L.endpoint,auth:Ge(L.getKey("auth")),p256dh:Ge(L.getKey("p256dh"))},oe=yield ln(Z.firebaseDependencies);if(oe){if(function xt(Z,L){return L.vapidKey===Z.vapidKey&&L.endpoint===Z.endpoint&&L.auth===Z.auth&&L.p256dh===Z.p256dh}(oe.subscriptionOptions,q))return Date.now()>=oe.createTime+Zn?function Or(Z,L){return lr.apply(this,arguments)}(Z,{token:oe.token,createTime:Date.now(),subscriptionOptions:q}):oe.token;try{yield Xe(Z.firebaseDependencies,oe.token)}catch(Ue){console.warn(Ue)}return Tn(Z.firebaseDependencies,q)}return Tn(Z.firebaseDependencies,q)}),vn.apply(this,arguments)}function Nn(Z){return mr.apply(this,arguments)}function mr(){return mr=(0,h.Z)(function*(Z){const L=yield ln(Z.firebaseDependencies);L&&(yield Xe(Z.firebaseDependencies,L.token),yield function qn(Z){return Nr.apply(this,arguments)}(Z.firebaseDependencies));const q=yield Z.swRegistration.pushManager.getSubscription();return!q||q.unsubscribe()}),mr.apply(this,arguments)}function lr(){return lr=(0,h.Z)(function*(Z,L){try{const q=yield function Be(Z,L){return rt.apply(this,arguments)}(Z.firebaseDependencies,L),oe=Object.assign(Object.assign({},L),{token:q,createTime:Date.now()});return yield bn(Z.firebaseDependencies,oe),q}catch(q){throw yield Nn(Z),q}}),lr.apply(this,arguments)}function Tn(Z,L){return dr.apply(this,arguments)}function dr(){return(dr=(0,h.Z)(function*(Z,L){const oe={token:yield ue(Z,L),createTime:Date.now(),subscriptionOptions:L};return yield bn(Z,oe),oe.token})).apply(this,arguments)}function ht(){return(ht=(0,h.Z)(function*(Z,L){return(yield Z.pushManager.getSubscription())||Z.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Re(L)})})).apply(this,arguments)}function Mt(Z){const L={from:Z.from,collapseKey:Z.collapse_key,messageId:Z.fcmMessageId};return function Rt(Z,L){if(!L.notification)return;Z.notification={};const q=L.notification.title;q&&(Z.notification.title=q);const oe=L.notification.body;oe&&(Z.notification.body=oe);const Ue=L.notification.image;Ue&&(Z.notification.image=Ue);const Ke=L.notification.icon;Ke&&(Z.notification.icon=Ke)}(L,Z),function _r(Z,L){L.data&&(Z.data=L.data)}(L,Z),function Dn(Z,L){var q,oe,Ue,Ke,ft;if(!(L.fcmOptions||null!==(q=L.notification)&&void 0!==q&&q.click_action))return;Z.fcmOptions={};const zt=null!==(Ue=null===(oe=L.fcmOptions)||void 0===oe?void 0:oe.link)&&void 0!==Ue?Ue:null===(Ke=L.notification)||void 0===Ke?void 0:Ke.click_action;zt&&(Z.fcmOptions.link=zt);const Pn=null===(ft=L.fcmOptions)||void 0===ft?void 0:ft.analytics_label;Pn&&(Z.fcmOptions.analyticsLabel=Pn)}(L,Z),L}function wn(Z,L){const q=[];for(let oe=0;oe<Z.length;oe++)q.push(Z.charAt(oe)),oe<L.length&&q.push(L.charAt(oe));return q.join("")}function pn(Z){return he.create("missing-app-config-values",{valueName:Z})}wn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),wn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ui{constructor(L,q,oe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ue=function ai(Z){if(!Z||!Z.options)throw pn("App Configuration Object");if(!Z.name)throw pn("App Name");const L=["projectId","apiKey","appId","messagingSenderId"],{options:q}=Z;for(const oe of L)if(!q[oe])throw pn(oe);return{appName:Z.name,projectId:q.projectId,apiKey:q.apiKey,appId:q.appId,senderId:q.messagingSenderId}}(L);this.firebaseDependencies={app:L,appConfig:Ue,installations:q,analyticsProvider:oe}}_delete(){return Promise.resolve()}}function Pt(Z){return gn.apply(this,arguments)}function gn(){return(gn=(0,h.Z)(function*(Z){try{Z.swRegistration=yield navigator.serviceWorker.register(_e,{scope:Ne}),Z.swRegistration.update().catch(()=>{})}catch(L){throw he.create("failed-service-worker-registration",{browserErrorMessage:L?.message})}})).apply(this,arguments)}function wr(){return(wr=(0,h.Z)(function*(Z,L){if(!L&&!Z.swRegistration&&(yield Pt(Z)),L||!Z.swRegistration){if(!(L instanceof ServiceWorkerRegistration))throw he.create("invalid-sw-registration");Z.swRegistration=L}})).apply(this,arguments)}function Un(){return(Un=(0,h.Z)(function*(Z,L){L?Z.vapidKey=L:Z.vapidKey||(Z.vapidKey=pe)})).apply(this,arguments)}function Sn(Z,L){return zn.apply(this,arguments)}function zn(){return zn=(0,h.Z)(function*(Z,L){if(!navigator)throw he.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw he.create("permission-blocked");return yield function Ar(Z,L){return Un.apply(this,arguments)}(Z,L?.vapidKey),yield function Pr(Z,L){return wr.apply(this,arguments)}(Z,L?.serviceWorkerRegistration),function Kn(Z){return vn.apply(this,arguments)}(Z)}),zn.apply(this,arguments)}function Hn(){return(Hn=(0,h.Z)(function*(Z,L,q){const oe=function On(Z){switch(Z){case Oe.NOTIFICATION_CLICKED:return"notification_open";case Oe.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(L);(yield Z.firebaseDependencies.analyticsProvider.get()).logEvent(oe,{message_id:q[G],message_name:q[ne],message_time:q[Le],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Yt(){return Yt=(0,h.Z)(function*(Z,L){const q=L.data;if(!q.isFirebaseMessaging)return;Z.onMessageHandler&&q.messageType===Oe.PUSH_RECEIVED&&("function"==typeof Z.onMessageHandler?Z.onMessageHandler(Mt(q)):Z.onMessageHandler.next(Mt(q)));const oe=q.data;(function jt(Z){return"object"==typeof Z&&!!Z&&G in Z})(oe)&&"1"===oe["google.c.a.e"]&&(yield function Mn(Z,L,q){return Hn.apply(this,arguments)}(Z,q.messageType,oe))}),Yt.apply(this,arguments)}const W="@firebase/messaging",j="0.12.4",R=Z=>{const L=new ui(Z.getProvider("app").getImmediate(),Z.getProvider("installations-internal").getImmediate(),Z.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",q=>function kr(Z,L){return Yt.apply(this,arguments)}(L,q)),L},P=Z=>{const L=Z.getProvider("messaging").getImmediate();return{getToken:oe=>Sn(L,oe)}};function X(){return ve.apply(this,arguments)}function ve(){return(ve=(0,h.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function vt(){return(vt=(0,h.Z)(function*(Z){if(!navigator)throw he.create("only-available-in-window");return Z.swRegistration||(yield Pt(Z)),Nn(Z)})).apply(this,arguments)}function lt(Z=(0,ye.getApp)()){return X().then(L=>{if(!L)throw he.create("unsupported-browser")},L=>{throw he.create("indexed-db-unsupported")}),(0,ye._getProvider)((0,se.m9)(Z),"messaging").getImmediate()}function Tt(Z,L){return mn.apply(this,arguments)}function mn(){return(mn=(0,h.Z)(function*(Z,L){return Sn(Z=(0,se.m9)(Z),L)})).apply(this,arguments)}function Ft(Z){return function Je(Z){return vt.apply(this,arguments)}(Z=(0,se.m9)(Z))}function Jn(Z,L){return function yt(Z,L){if(!navigator)throw he.create("only-available-in-window");return Z.onMessageHandler=L,()=>{Z.onMessageHandler=null}}(Z=(0,se.m9)(Z),L)}!function A(){(0,ye._registerComponent)(new O.wA("messaging",R,"PUBLIC")),(0,ye._registerComponent)(new O.wA("messaging-internal",P,"PRIVATE")),(0,ye.registerVersion)(W,j),(0,ye.registerVersion)(W,j,"esm2017")}()},9240:(pt,be,M)=>{M.d(be,{Lj:()=>J,X3:()=>ct});var h=M(5861);const U=(z,De)=>De.some(je=>z instanceof je);let O,ee;const _e=new WeakMap,Ne=new WeakMap,pe=new WeakMap,B=new WeakMap,G=new WeakMap;let Ee={get(z,De,je){if(z instanceof IDBTransaction){if("done"===De)return Ne.get(z);if("objectStoreNames"===De)return z.objectStoreNames||pe.get(z);if("store"===De)return je.objectStoreNames[1]?void 0:je.objectStore(je.objectStoreNames[0])}return Re(z[De])},set:(z,De,je)=>(z[De]=je,!0),has:(z,De)=>z instanceof IDBTransaction&&("done"===De||"store"===De)||De in z};function Ge(z){return"function"==typeof z?function Oe(z){return z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(z)?function(...De){return z.apply(dt(this),De),Re(_e.get(this))}:function(...De){return Re(z.apply(dt(this),De))}:function(De,...je){const wt=z.call(dt(this),De,...je);return pe.set(wt,De.sort?De.sort():[De]),Re(wt)}}(z):(z instanceof IDBTransaction&&function Le(z){if(Ne.has(z))return;const De=new Promise((je,wt)=>{const ln=()=>{z.removeEventListener("complete",dn),z.removeEventListener("error",bn),z.removeEventListener("abort",bn)},dn=()=>{je(),ln()},bn=()=>{wt(z.error||new DOMException("AbortError","AbortError")),ln()};z.addEventListener("complete",dn),z.addEventListener("error",bn),z.addEventListener("abort",bn)});Ne.set(z,De)}(z),U(z,function se(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(z,Ee):z)}function Re(z){if(z instanceof IDBRequest)return function ne(z){const De=new Promise((je,wt)=>{const ln=()=>{z.removeEventListener("success",dn),z.removeEventListener("error",bn)},dn=()=>{je(Re(z.result)),ln()},bn=()=>{wt(z.error),ln()};z.addEventListener("success",dn),z.addEventListener("error",bn)});return De.then(je=>{je instanceof IDBCursor&&_e.set(je,z)}).catch(()=>{}),G.set(De,z),De}(z);if(B.has(z))return B.get(z);const De=Ge(z);return De!==z&&(B.set(z,De),G.set(De,z)),De}const dt=z=>G.get(z);function ct(z,De,{blocked:je,upgrade:wt,blocking:ln,terminated:dn}={}){const bn=indexedDB.open(z,De),hn=Re(bn);return wt&&bn.addEventListener("upgradeneeded",qn=>{wt(Re(bn.result),qn.oldVersion,qn.newVersion,Re(bn.transaction))}),je&&bn.addEventListener("blocked",()=>je()),hn.then(qn=>{dn&&qn.addEventListener("close",()=>dn()),ln&&qn.addEventListener("versionchange",()=>ln())}).catch(()=>{}),hn}function J(z,{blocked:De}={}){const je=indexedDB.deleteDatabase(z);return De&&je.addEventListener("blocked",()=>De()),Re(je).then(()=>{})}const Ie=["get","getKey","getAll","getAllKeys","count"],ae=["put","add","delete","clear"],Me=new Map;function Ve(z,De){if(!(z instanceof IDBDatabase)||De in z||"string"!=typeof De)return;if(Me.get(De))return Me.get(De);const je=De.replace(/FromIndex$/,""),wt=De!==je,ln=ae.includes(je);if(!(je in(wt?IDBIndex:IDBObjectStore).prototype)||!ln&&!Ie.includes(je))return;const dn=function(){var bn=(0,h.Z)(function*(hn,...qn){const Nr=this.transaction(hn,ln?"readwrite":"readonly");let le=Nr.store;return wt&&(le=le.index(qn.shift())),(yield Promise.all([le[je](...qn),ln&&Nr.done]))[0]});return function(qn){return bn.apply(this,arguments)}}();return Me.set(De,dn),dn}!function Qe(z){Ee=z(Ee)}(z=>({...z,get:(De,je,wt)=>Ve(De,je)||z.get(De,je,wt),has:(De,je)=>!!Ve(De,je)||z.has(De,je)}))},3182:(pt,be,M)=>{M.d(be,{C6:()=>h.getApps,KN:()=>h.registerVersion,Mq:()=>h.getApp,ZF:()=>h.initializeApp});var h=M(534);(0,h.registerVersion)("firebase","9.23.0","app")},7142:(pt,be,M)=>{M.d(be,{Z:()=>h.Z});var h=M(3106);h.Z.registerVersion("firebase","9.23.0","app-compat")},6365:(pt,be,M)=>{M.r(be);var h=M(5861),U=M(3106),O=M(6878),ee=M(9058),_e=(M(534),M(7879),M(4537));function Ne(){return window}function G(){return G=(0,h.Z)(function*(R,P,A){var X;const{BuildInfo:ve}=Ne();(0,O.as)(P.sessionId,"AuthEvent did not contain a session ID");const Je=yield function Re(R){return dt.apply(this,arguments)}(P.sessionId),vt={};return(0,O.at)()?vt.ibi=ve.packageName:(0,O.au)()?vt.apn=ve.packageName:(0,O.av)(R,"operation-not-supported-in-this-environment"),ve.displayName&&(vt.appDisplayName=ve.displayName),vt.sessionId=Je,(0,O.aw)(R,A,P.type,void 0,null!==(X=P.eventId)&&void 0!==X?X:void 0,vt)}),G.apply(this,arguments)}function Le(){return(Le=(0,h.Z)(function*(R){const{BuildInfo:P}=Ne(),A={};(0,O.at)()?A.iosBundleId=P.packageName:(0,O.au)()?A.androidPackageName=P.packageName:(0,O.av)(R,"operation-not-supported-in-this-environment"),yield(0,O.ax)(R,A)})).apply(this,arguments)}function Oe(){return(Oe=(0,h.Z)(function*(R,P,A){const{cordova:X}=Ne();let ve=()=>{};try{yield new Promise((Je,vt)=>{let yt=null;function lt(){var Ft;Je();const Jn=null===(Ft=X.plugins.browsertab)||void 0===Ft?void 0:Ft.close;"function"==typeof Jn&&Jn(),"function"==typeof A?.close&&A.close()}function Tt(){yt||(yt=window.setTimeout(()=>{vt((0,O.az)(R,"redirect-cancelled-by-user"))},2e3))}function mn(){"visible"===document?.visibilityState&&Tt()}P.addPassiveListener(lt),document.addEventListener("resume",Tt,!1),(0,O.au)()&&document.addEventListener("visibilitychange",mn,!1),ve=()=>{P.removePassiveListener(lt),document.removeEventListener("resume",Tt,!1),document.removeEventListener("visibilitychange",mn,!1),yt&&window.clearTimeout(yt)}})}finally{ve()}})).apply(this,arguments)}function dt(){return(dt=(0,h.Z)(function*(R){const P=function ct(R){if((0,O.as)(/[0-9a-zA-Z]+/.test(R),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(R);const P=new ArrayBuffer(R.length),A=new Uint8Array(P);for(let X=0;X<R.length;X++)A[X]=R.charCodeAt(X);return A}(R),A=yield crypto.subtle.digest("SHA-256",P);return Array.from(new Uint8Array(A)).map(ve=>ve.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ie extends O.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(P=>{this.resolveInialized=P})}addPassiveListener(P){this.passiveListeners.add(P)}removePassiveListener(P){this.passiveListeners.delete(P)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(P){return this.resolveInialized(),this.passiveListeners.forEach(A=>A(P)),super.onEvent(P)}initialized(){var P=this;return(0,h.Z)(function*(){yield P.initPromise})()}}function Ve(R){return z.apply(this,arguments)}function z(){return(z=(0,h.Z)(function*(R){const P=yield wt()._get(ln(R));return P&&(yield wt()._remove(ln(R))),P})).apply(this,arguments)}function je(){const R=[];for(let A=0;A<20;A++){const X=Math.floor(62*Math.random());R.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(X))}return R.join("")}function wt(){return(0,O.aC)(O.b)}function ln(R){return(0,O.aD)("authEvent",R.config.apiKey,R.name)}function hn(R){if(!R?.includes("?"))return{};const[P,...A]=R.split("?");return(0,ee.zd)(A.join("?"))}const le=class Nr{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(P){var A=this;return(0,h.Z)(function*(){const X=P._key();let ve=A.eventManagers.get(X);return ve||(ve=new Ie(P),A.eventManagers.set(X,ve),A.attachCallbackListeners(P,ve)),ve})()}_openPopup(P){(0,O.av)(P,"operation-not-supported-in-this-environment")}_openRedirect(P,A,X,ve){var Je=this;return(0,h.Z)(function*(){!function Ge(R){var P,A,X,ve,Je,vt,yt,lt,Tt,mn;const Ft=Ne();(0,O.aA)("function"==typeof(null===(P=Ft?.universalLinks)||void 0===P?void 0:P.subscribe),R,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aA)(typeof(null===(A=Ft?.BuildInfo)||void 0===A?void 0:A.packageName)<"u",R,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aA)("function"==typeof(null===(Je=null===(ve=null===(X=Ft?.cordova)||void 0===X?void 0:X.plugins)||void 0===ve?void 0:ve.browsertab)||void 0===Je?void 0:Je.openUrl),R,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(lt=null===(yt=null===(vt=Ft?.cordova)||void 0===vt?void 0:vt.plugins)||void 0===yt?void 0:yt.browsertab)||void 0===lt?void 0:lt.isAvailable),R,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(mn=null===(Tt=Ft?.cordova)||void 0===Tt?void 0:Tt.InAppBrowser)||void 0===mn?void 0:mn.open),R,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(P);const vt=yield Je._initialize(P);yield vt.initialized(),vt.resetRedirect(),(0,O.aG)(),yield Je._originValidation(P);const yt=function ae(R,P,A=null){return{type:P,eventId:A,urlResponse:null,sessionId:je(),postBody:null,tenantId:R.tenantId,error:(0,O.az)(R,"no-auth-event")}}(P,X,ve);yield function Me(R,P){return wt()._set(ln(R),P)}(P,yt);const lt=yield function B(R,P,A){return G.apply(this,arguments)}(P,yt,A),Tt=yield function Ee(R){const{cordova:P}=Ne();return new Promise(A=>{P.plugins.browsertab.isAvailable(X=>{let ve=null;X?P.plugins.browsertab.openUrl(R):ve=P.InAppBrowser.open(R,(0,O.ay)()?"_blank":"_system","location=yes"),A(ve)})})}(lt);return function Qe(R,P,A){return Oe.apply(this,arguments)}(P,vt,Tt)})()}_isIframeWebStorageSupported(P,A){throw new Error("Method not implemented.")}_originValidation(P){const A=P._key();return this.originValidationPromises[A]||(this.originValidationPromises[A]=function ne(R){return Le.apply(this,arguments)}(P)),this.originValidationPromises[A]}attachCallbackListeners(P,A){const{universalLinks:X,handleOpenURL:ve,BuildInfo:Je}=Ne(),vt=setTimeout((0,h.Z)(function*(){yield Ve(P),A.onEvent(ge())}),500),yt=function(){var mn=(0,h.Z)(function*(Ft){clearTimeout(vt);const Jn=yield Ve(P);let Z=null;Jn&&Ft?.url&&(Z=function De(R,P){var A,X;const ve=function bn(R){const P=hn(R),A=P.link?decodeURIComponent(P.link):void 0,X=hn(A).link,ve=P.deep_link_id?decodeURIComponent(P.deep_link_id):void 0;return hn(ve).link||ve||X||A||R}(P);if(ve.includes("/__/auth/callback")){const Je=hn(ve),vt=Je.firebaseError?function dn(R){try{return JSON.parse(R)}catch{return null}}(decodeURIComponent(Je.firebaseError)):null,yt=null===(X=null===(A=vt?.code)||void 0===A?void 0:A.split("auth/"))||void 0===X?void 0:X[1],lt=yt?(0,O.az)(yt):null;return lt?{type:R.type,eventId:R.eventId,tenantId:R.tenantId,error:lt,urlResponse:null,sessionId:null,postBody:null}:{type:R.type,eventId:R.eventId,tenantId:R.tenantId,sessionId:R.sessionId,urlResponse:ve,postBody:null}}return null}(Jn,Ft.url)),A.onEvent(Z||ge())});return function(Jn){return mn.apply(this,arguments)}}();typeof X<"u"&&"function"==typeof X.subscribe&&X.subscribe(null,yt);const lt=ve,Tt=`${Je.packageName.toLowerCase()}://`;Ne().handleOpenURL=function(){var mn=(0,h.Z)(function*(Ft){if(Ft.toLowerCase().startsWith(Tt)&&yt({url:Ft}),"function"==typeof lt)try{lt(Ft)}catch(Jn){console.error(Jn)}});return function(Ft){return mn.apply(this,arguments)}}()}};function ge(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.az)("no-auth-event")}}function rt(){var R;return(null===(R=self?.location)||void 0===R?void 0:R.protocol)||null}function qt(R=(0,ee.z$)()){return!("file:"!==rt()&&"ionic:"!==rt()&&"capacitor:"!==rt()||!R.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zn(){try{const R=self.localStorage,P=O.aL();if(R)return R.setItem(P,"1"),R.removeItem(P),!function fn(R=(0,ee.z$)()){return function Xt(){return(0,ee.w1)()&&11===document?.documentMode}()||function Nt(R=(0,ee.z$)()){return/Edge\/\d+/.test(R)}(R)}()||(0,ee.hl)()}catch{return Kn()&&(0,ee.hl)()}return!1}function Kn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function vn(){return(function Xe(){return"http:"===rt()||"https:"===rt()}()||(0,ee.ru)()||qt())&&!function It(){return(0,ee.b$)()||(0,ee.UG)()}()&&Zn()&&!Kn()}function Nn(){return qt()&&typeof document<"u"}function Or(){return(Or=(0,h.Z)(function*(){return!!Nn()&&new Promise(R=>{const P=setTimeout(()=>{R(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(P),R(!0)})})})).apply(this,arguments)}const Tn={LOCAL:"local",NONE:"none",SESSION:"session"},dr=O.aA,oi="persistence";function xt(R){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,h.Z)(function*(R){yield R._initializationPromise;const P=_r(),A=O.aD(oi,R.config.apiKey,R.name);P&&P.setItem(A,R._getPersistence())})).apply(this,arguments)}function _r(){var R;try{return(null===(R=function lr(){return typeof window<"u"?window:null}())||void 0===R?void 0:R.sessionStorage)||null}catch{return null}}const Dn=O.aA;class jt{constructor(){this.browserResolver=O.aC(O.k),this.cordovaResolver=O.aC(le),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(P){var A=this;return(0,h.Z)(function*(){return yield A.selectUnderlyingResolver(),A.assertedUnderlyingResolver._initialize(P)})()}_openPopup(P,A,X,ve){var Je=this;return(0,h.Z)(function*(){return yield Je.selectUnderlyingResolver(),Je.assertedUnderlyingResolver._openPopup(P,A,X,ve)})()}_openRedirect(P,A,X,ve){var Je=this;return(0,h.Z)(function*(){return yield Je.selectUnderlyingResolver(),Je.assertedUnderlyingResolver._openRedirect(P,A,X,ve)})()}_isIframeWebStorageSupported(P,A){this.assertedUnderlyingResolver._isIframeWebStorageSupported(P,A)}_originValidation(P){return this.assertedUnderlyingResolver._originValidation(P)}get _shouldInitProactively(){return Nn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Dn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var P=this;return(0,h.Z)(function*(){if(P.underlyingResolver)return;const A=yield function mr(){return Or.apply(this,arguments)}();P.underlyingResolver=A?P.cordovaResolver:P.browserResolver})()}}function wn(R){return R.unwrap()}function pn(R){return Pt(R)}function Pt(R){const{_tokenResponse:P}=R instanceof ee.ZR?R.customData:R;if(!P)return null;if(!(R instanceof ee.ZR)&&"temporaryProof"in P&&"phoneNumber"in P)return O.P.credentialFromResult(R);const A=P.providerId;if(!A||A===O.p.PASSWORD)return null;let X;switch(A){case O.p.GOOGLE:X=O.V;break;case O.p.FACEBOOK:X=O.U;break;case O.p.GITHUB:X=O.W;break;case O.p.TWITTER:X=O.Z;break;default:const{oauthIdToken:ve,oauthAccessToken:Je,oauthTokenSecret:vt,pendingToken:yt,nonce:lt}=P;return Je||vt||ve||yt?yt?A.startsWith("saml.")?O.aO._create(A,yt):O.L._fromParams({providerId:A,signInMethod:A,pendingToken:yt,idToken:ve,accessToken:Je}):new O.X(A).credential({idToken:ve,accessToken:Je,rawNonce:lt}):null}return R instanceof ee.ZR?X.credentialFromError(R):X.credentialFromResult(R)}function gn(R,P){return P.catch(A=>{throw A instanceof ee.ZR&&function ui(R,P){var A;const X=null===(A=P.customData)||void 0===A?void 0:A._tokenResponse;if("auth/multi-factor-auth-required"===P?.code)P.resolver=new Ar(R,O.aq(R,P));else if(X){const ve=Pt(P),Je=P;ve&&(Je.credential=ve,Je.tenantId=X.tenantId||void 0,Je.email=X.email||void 0,Je.phoneNumber=X.phoneNumber||void 0)}}(R,A),A}).then(A=>{const ve=A.user;return{operationType:A.operationType,credential:pn(A),additionalUserInfo:O.ao(A),user:Un.getOrCreate(ve)}})}function Pr(R,P){return wr.apply(this,arguments)}function wr(){return(wr=(0,h.Z)(function*(R,P){const A=yield P;return{verificationId:A.verificationId,confirm:X=>gn(R,A.confirm(X))}})).apply(this,arguments)}class Ar{constructor(P,A){this.resolver=A,this.auth=function ai(R){return R.wrapped()}(P)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(P){return gn(wn(this.auth),this.resolver.resolveSignIn(P))}}class Un{constructor(P){this._delegate=P,this.multiFactor=O.ar(P)}static getOrCreate(P){return Un.USER_MAP.has(P)||Un.USER_MAP.set(P,new Un(P)),Un.USER_MAP.get(P)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(P){return this._delegate.getIdTokenResult(P)}getIdToken(P){return this._delegate.getIdToken(P)}linkAndRetrieveDataWithCredential(P){return this.linkWithCredential(P)}linkWithCredential(P){var A=this;return(0,h.Z)(function*(){return gn(A.auth,O.a0(A._delegate,P))})()}linkWithPhoneNumber(P,A){var X=this;return(0,h.Z)(function*(){return Pr(X.auth,O.l(X._delegate,P,A))})()}linkWithPopup(P){var A=this;return(0,h.Z)(function*(){return gn(A.auth,O.d(A._delegate,P,jt))})()}linkWithRedirect(P){var A=this;return(0,h.Z)(function*(){return yield xt(O.aH(A.auth)),O.g(A._delegate,P,jt)})()}reauthenticateAndRetrieveDataWithCredential(P){return this.reauthenticateWithCredential(P)}reauthenticateWithCredential(P){var A=this;return(0,h.Z)(function*(){return gn(A.auth,O.a1(A._delegate,P))})()}reauthenticateWithPhoneNumber(P,A){return Pr(this.auth,O.r(this._delegate,P,A))}reauthenticateWithPopup(P){return gn(this.auth,O.e(this._delegate,P,jt))}reauthenticateWithRedirect(P){var A=this;return(0,h.Z)(function*(){return yield xt(O.aH(A.auth)),O.h(A._delegate,P,jt)})()}sendEmailVerification(P){return O.ae(this._delegate,P)}unlink(P){var A=this;return(0,h.Z)(function*(){return yield O.an(A._delegate,P),A})()}updateEmail(P){return O.aj(this._delegate,P)}updatePassword(P){return O.ak(this._delegate,P)}updatePhoneNumber(P){return O.u(this._delegate,P)}updateProfile(P){return O.ai(this._delegate,P)}verifyBeforeUpdateEmail(P,A){return O.af(this._delegate,P,A)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Un.USER_MAP=new WeakMap;const Sn=O.aA;let zn=(()=>{class R{constructor(A,X){if(this.app=A,X.isInitialized())return this._delegate=X.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ve}=A.options;Sn(ve,"invalid-api-key",{appName:A.name}),Sn(ve,"invalid-api-key",{appName:A.name});const Je=typeof window<"u"?jt:void 0;this._delegate=X.initialize({options:{persistence:Hn(ve,A.name),popupRedirectResolver:Je}}),this._delegate._updateErrorMap(O.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Un.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(A){this._delegate.languageCode=A}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(A){this._delegate.tenantId=A}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(A,X){O.I(this._delegate,A,X)}applyActionCode(A){return O.a5(this._delegate,A)}checkActionCode(A){return O.a6(this._delegate,A)}confirmPasswordReset(A,X){return O.a4(this._delegate,A,X)}createUserWithEmailAndPassword(A,X){var ve=this;return(0,h.Z)(function*(){return gn(ve._delegate,O.a8(ve._delegate,A,X))})()}fetchProvidersForEmail(A){return this.fetchSignInMethodsForEmail(A)}fetchSignInMethodsForEmail(A){return O.ad(this._delegate,A)}isSignInWithEmailLink(A){return O.ab(this._delegate,A)}getRedirectResult(){var A=this;return(0,h.Z)(function*(){Sn(vn(),A._delegate,"operation-not-supported-in-this-environment");const X=yield O.j(A._delegate,jt);return X?gn(A._delegate,Promise.resolve(X)):{credential:null,user:null}})()}addFrameworkForLogging(A){!function he(R,P){(0,O.aH)(R)._logFramework(P)}(this._delegate,A)}onAuthStateChanged(A,X,ve){const{next:Je,error:vt,complete:yt}=Mn(A,X,ve);return this._delegate.onAuthStateChanged(Je,vt,yt)}onIdTokenChanged(A,X,ve){const{next:Je,error:vt,complete:yt}=Mn(A,X,ve);return this._delegate.onIdTokenChanged(Je,vt,yt)}sendSignInLinkToEmail(A,X){return O.aa(this._delegate,A,X)}sendPasswordResetEmail(A,X){return O.a3(this._delegate,A,X||void 0)}setPersistence(A){var X=this;return(0,h.Z)(function*(){let ve;switch(function ht(R,P){dr(Object.values(Tn).includes(P),R,"invalid-persistence-type"),(0,ee.b$)()?dr(P!==Tn.SESSION,R,"unsupported-persistence-type"):(0,ee.UG)()?dr(P===Tn.NONE,R,"unsupported-persistence-type"):Kn()?dr(P===Tn.NONE||P===Tn.LOCAL&&(0,ee.hl)(),R,"unsupported-persistence-type"):dr(P===Tn.NONE||Zn(),R,"unsupported-persistence-type")}(X._delegate,A),A){case Tn.SESSION:ve=O.a;break;case Tn.LOCAL:ve=(yield O.aC(O.i)._isAvailable())?O.i:O.b;break;case Tn.NONE:ve=O.N;break;default:return O.av("argument-error",{appName:X._delegate.name})}return X._delegate.setPersistence(ve)})()}signInAndRetrieveDataWithCredential(A){return this.signInWithCredential(A)}signInAnonymously(){return gn(this._delegate,O._(this._delegate))}signInWithCredential(A){return gn(this._delegate,O.$(this._delegate,A))}signInWithCustomToken(A){return gn(this._delegate,O.a2(this._delegate,A))}signInWithEmailAndPassword(A,X){return gn(this._delegate,O.a9(this._delegate,A,X))}signInWithEmailLink(A,X){return gn(this._delegate,O.ac(this._delegate,A,X))}signInWithPhoneNumber(A,X){return Pr(this._delegate,O.s(this._delegate,A,X))}signInWithPopup(A){var X=this;return(0,h.Z)(function*(){return Sn(vn(),X._delegate,"operation-not-supported-in-this-environment"),gn(X._delegate,O.c(X._delegate,A,jt))})()}signInWithRedirect(A){var X=this;return(0,h.Z)(function*(){return Sn(vn(),X._delegate,"operation-not-supported-in-this-environment"),yield xt(X._delegate),O.f(X._delegate,A,jt)})()}updateCurrentUser(A){return this._delegate.updateCurrentUser(A)}verifyPasswordResetCode(A){return O.a7(this._delegate,A)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return R.Persistence=Tn,R})();function Mn(R,P,A){let X=R;"function"!=typeof R&&({next:X,error:P,complete:A}=R);const ve=X;return{next:vt=>ve(vt&&Un.getOrCreate(vt)),error:P,complete:A}}function Hn(R,P){const A=function Rt(R,P){const A=_r();if(!A)return[];const X=O.aD(oi,R,P);switch(A.getItem(X)){case Tn.NONE:return[O.N];case Tn.LOCAL:return[O.i,O.a];case Tn.SESSION:return[O.a];default:return[]}}(R,P);if(typeof self<"u"&&!A.includes(O.i)&&A.push(O.i),typeof window<"u")for(const X of[O.b,O.a])A.includes(X)||A.push(X);return A.includes(O.N)||A.push(O.N),A}class On{constructor(){this.providerId="phone",this._delegate=new O.P(wn(U.Z.auth()))}static credential(P,A){return O.P.credential(P,A)}verifyPhoneNumber(P,A){return this._delegate.verifyPhoneNumber(P,A)}unwrap(){return this._delegate}}On.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,On.PROVIDER_ID=O.P.PROVIDER_ID;const kr=O.aA;class Yt{constructor(P,A,X=U.Z.app()){var ve;kr(null===(ve=X.options)||void 0===ve?void 0:ve.apiKey,"invalid-api-key",{appName:X.name}),this._delegate=new O.R(P,A,X.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function j(R){R.INTERNAL.registerComponent(new _e.wA("auth-compat",P=>{const A=P.getProvider("app-compat").getImmediate(),X=P.getProvider("auth");return new zn(A,X)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.Q,FacebookAuthProvider:O.U,GithubAuthProvider:O.W,GoogleAuthProvider:O.V,OAuthProvider:O.X,SAMLAuthProvider:O.Y,PhoneAuthProvider:On,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:Yt,TwitterAuthProvider:O.Z,Auth:zn,AuthCredential:O.J,Error:ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),R.registerVersion("@firebase/auth-compat","0.4.2")}(U.Z)},8990:(pt,be,M)=>{M.d(be,{Gb:()=>h.Gb,KL:()=>h.KL});var h=M(2650)},5861:(pt,be,M)=>{function h(O,ee,se,ye,_e,Ne,pe){try{var B=O[Ne](pe),G=B.value}catch(ne){return void se(ne)}B.done?ee(G):Promise.resolve(G).then(ye,_e)}function U(O){return function(){var ee=this,se=arguments;return new Promise(function(ye,_e){var Ne=O.apply(ee,se);function pe(G){h(Ne,ye,_e,pe,B,"next",G)}function B(G){h(Ne,ye,_e,pe,B,"throw",G)}pe(void 0)})}}M.d(be,{Z:()=>U})},7582:(pt,be,M)=>{function ee(le,ge){var he={};for(var ue in le)Object.prototype.hasOwnProperty.call(le,ue)&&ge.indexOf(ue)<0&&(he[ue]=le[ue]);if(null!=le&&"function"==typeof Object.getOwnPropertySymbols){var Te=0;for(ue=Object.getOwnPropertySymbols(le);Te<ue.length;Te++)ge.indexOf(ue[Te])<0&&Object.prototype.propertyIsEnumerable.call(le,ue[Te])&&(he[ue[Te]]=le[ue[Te]])}return he}function ne(le,ge,he,ue){return new(he||(he=Promise))(function(Be,rt){function Xe(Xt){try{It(ue.next(Xt))}catch(Nt){rt(Nt)}}function qt(Xt){try{It(ue.throw(Xt))}catch(Nt){rt(Nt)}}function It(Xt){Xt.done?Be(Xt.value):function Te(Be){return Be instanceof he?Be:new he(function(rt){rt(Be)})}(Xt.value).then(Xe,qt)}It((ue=ue.apply(le,ge||[])).next())})}function J(le){return this instanceof J?(this.v=le,this):new J(le)}function Ie(le,ge,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,ue=he.apply(le,ge||[]),Be=[];return Te={},rt("next"),rt("throw"),rt("return"),Te[Symbol.asyncIterator]=function(){return this},Te;function rt(fn){ue[fn]&&(Te[fn]=function(Zn){return new Promise(function(Kn,vn){Be.push([fn,Zn,Kn,vn])>1||Xe(fn,Zn)})})}function Xe(fn,Zn){try{!function qt(fn){fn.value instanceof J?Promise.resolve(fn.value.v).then(It,Xt):Nt(Be[0][2],fn)}(ue[fn](Zn))}catch(Kn){Nt(Be[0][3],Kn)}}function It(fn){Xe("next",fn)}function Xt(fn){Xe("throw",fn)}function Nt(fn,Zn){fn(Zn),Be.shift(),Be.length&&Xe(Be[0][0],Be[0][1])}}function Me(le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,ge=le[Symbol.asyncIterator];return ge?ge.call(le):(le=function Oe(le){var ge="function"==typeof Symbol&&Symbol.iterator,he=ge&&le[ge],ue=0;if(he)return he.call(le);if(le&&"number"==typeof le.length)return{next:function(){return le&&ue>=le.length&&(le=void 0),{value:le&&le[ue++],done:!le}}};throw new TypeError(ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(le),he={},ue("next"),ue("throw"),ue("return"),he[Symbol.asyncIterator]=function(){return this},he);function ue(Be){he[Be]=le[Be]&&function(rt){return new Promise(function(Xe,qt){!function Te(Be,rt,Xe,qt){Promise.resolve(qt).then(function(It){Be({value:It,done:Xe})},rt)}(Xe,qt,(rt=le[Be](rt)).done,rt.value)})}}}M.d(be,{FC:()=>Ie,KL:()=>Me,_T:()=>ee,mG:()=>ne,qq:()=>J}),"function"==typeof SuppressedError&&SuppressedError}},pt=>{pt(pt.s=3652)}]);